var Atlantis=window.Atlantis||{};Atlantis.MusicState=Atlantis.MusicState||{};
(function(){Atlantis.MusicState.PLAYING=1;Atlantis.MusicState.STOPPED=2;Atlantis.MusicState.PAUSED=3;Atlantis.AudioManager=function(){this.repeatMusic=!1;this.currentMusic=null;this.volume=1;this.currentState=Atlantis.MusicState.STOPPED};Atlantis.AudioManager.prototype.playMusic=function(a,c){this.stopMusic();this.currentMusic=a;this.repeat=c;this.currentMusic.play()};Atlantis.AudioManager.prototype.stopMusic=function(){};Atlantis.AudioManager.prototype.pauseMusic=function(){null!=this.currentMusic&&
this.currentState==Atlantis.MusicState.PLAYING&&this.currentMusic.pause()};Atlantis.AudioManager.prototype.playSound=function(){}})();Atlantis=window.Atlantis||{};
(function(){Atlantis.ContentManager=function(a){this.rootDirectory=a||"";this.assets=[]};Atlantis.ContentManager.prototype.load=function(a){if("undefined"==typeof this.assets[a]){var c=a.split("."),b=c[c.length-1];switch(b){case "png":case "jpg":case "bmp":var c=this.assets,d=new Image;d.src=a;c[a]=d;break;case "mp3":case "ogg":case "wav":c=this.assets;d=document.createElement("audio");d.src=a;d.controls=!1;c[a]=d;break;case "mp4":case "ogv":c=this.assets,d=document.createElement("video"),d.src=a,
c[a]=d;case "xml":case "json":case "js":var e=this.assets;"undefined"!=typeof Atlantis.ajax?Atlantis.ajax({method:"GET",url:a,success:function(c){var d=c;"json"==b&&(d=JSON.parse(c));e[a]=d}}):console.error("[Content] Impossible to load the resource becanse the Atlantis.Helper class isn't loaded")}}return this.assets[a]};Atlantis.ContentManager.prototype.dispose=function(){this.assets=[]}})();Atlantis=window.Atlantis||{};
(function(){Atlantis.GameComponent=function(a){this.game=a};Atlantis.GameComponent.prototype.initialize=function(){};Atlantis.GameComponent.prototype.update=function(){};Atlantis.DrawableGameComponent=function(a){Atlantis.GameComponent.call(this,a)};Atlantis.DrawableGameComponent.prototype=new Atlantis.GameComponent;Atlantis.GameComponent.prototype.draw=function(){};Atlantis.GameComponentCollection=function(){this.components=[]};Atlantis.GameComponentCollection.prototype.add=function(a){-1==this.components.indexOf(a)&&
this.components.push(a)};Atlantis.GameComponentCollection.prototype.get=function(a){a=this.components.indexOf(a);return-1<a?this.components[a]:null};Atlantis.GameComponentCollection.prototype.remove=function(a){a=this.components.indexOf(a);-1<a&&this.components.splice(a,1)};Atlantis.GameComponentCollection.prototype.initialize=function(){for(var a=0,c=this.components.length;a<c;a++)this.components[a].initialize()};Atlantis.GameComponentCollection.prototype.update=function(a){for(var c=0,b=this.components.length;c<
b;c++)this.components[c].update(a)};Atlantis.GameComponentCollection.prototype.draw=function(a,c){for(var b=0,d=this.components.length;b<d;b++)this.components[b]instanceof Atlantis.DrawableGameComponent&&this.components[b].draw(a,c)}})();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};(function(){Atlantis.Graphics.drawCircle=function(a,c,b,d,e){a.beginPath();a.arc(c,b,d,0,2*Math.PI,!0);a.fillStyle=e||"#ffffff";a.fill()};Atlantis.Graphics.drawRectPoint=function(a,c,b,d,e,f){a.rect(c,b,d,e);a.fillStyle=f||"#ffffff"};Atlantis.Graphics.drawText=function(a,c,b,d,e){e=e||{};var f=e.style||"normal",g=e.size||12,h=e.font||"sans-serif";a.fillStyle=e.color||"#fff";a.font=f+" "+g+"px "+h;a.fillText(c,b,d)}})();Atlantis=window.Atlantis||{};
(function(){var a=[];Atlantis.ajax=function(a){var b=parameters.url,d=parameters.method||"GET";a=parameters.params||"";var e=parameters.success||null,f=new XMLHttpRequest;"POST"==d?(f.open("POST",b,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.setRequestHeader("Content-length",a.length),f.setRequestHeader("Connection","close"),f.onreadystatechange=function(){4==f.readyState&&200==f.status&&null!=e&&e(f.responseText)},f.send(a)):(f.open("GET",""!=a?b+"?"+a:b,!0),f.onreadystatechange=
function(){4==f.readyState&&null!=e&&e(f.responseText)},f.send(null))};Atlantis.notify=function(c,b){if("undefined"!=typeof a[c]){var d=a[c];if(b instanceof Object)for(var e in b)d[e]=b[e];document.dispatchEvent(d)}else return a[c]=document.createEvent("HTMLEvents"),a[c].initEvent(c,!0,!1),Atlantis.notify(c,b)}})();Atlantis=Atlantis||{};
(function(){Atlantis.Point=function(a,c){this.x=a||0;this.y=c||0};Atlantis.Rectangle=function(a,c,b,d){this.x=a||0;this.y=c||0;this.width=b||0;this.height=d||0};Atlantis.Rectangle.prototype.getTop=function(){return this.y};Atlantis.Rectangle.prototype.getBottom=function(){return this.y+this.height};Atlantis.Rectangle.prototype.getLeft=function(){return this.x};Atlantis.Rectangle.prototype.getRight=function(){return this.x+this.width};Atlantis.Rectangle.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/
2,this.y+this.height/2)};Atlantis.Rectangle.prototype.contains=function(a){return a instanceof Atlantis.Point?this.x<=a.x&&a.x<this.getRight()&&this.y<=a.y&&a.y<this.getBottom():a instanceof Atlantis.Rectangle?this.x<=a.x&&a.getRight()<=this.getRight()&&this.y<=a.y&&a.getBottom()<=this.getBottom():!1};Atlantis.Rectangle.prototype.intersects=function(a){return a.getLeft()<this.getRight()&&this.getLeft()<a.getRight()&&a.getTop()<this.getBottom()&&this.getTop()<a.getBottom()}})();Atlantis=window.Atlantis||{};(function(){Atlantis.Vector2=function(a,c){this.x=a||0;this.y=c||0}})();var Atlantis=window.Atlantis||{},Keys=window.Keys||{};
(function(){Keys={up:38,down:40,left:37,right:39,space:32,escape:27};Atlantis.KeyboardState=function(){this.keys=[];for(var a=0;110>a;a++)this.keys[a]=!1};Atlantis.KeyboardState.prototype.initialize=function(){for(var a=this.keys,c=0;110>c;c++)a[c]=!1;var b=this;document.addEventListener("keydown",function(a){b.onKeyStateChange(a,b)},!1);document.addEventListener("keyup",function(a){b.onKeyStateChange(a,b)},!1)};Atlantis.KeyboardState.prototype.onKeyStateChange=function(a,c){c.keys[a.keyCode]="keydown"==
a.type?!0:!1}})();Atlantis=window.Atlantis||{};
(function(){function a(a,b){var d;d="undefined"!=typeof a.touches&&0<a.touches.length?a.touches[0]:a;b.last.x=this.x;b.last.y=this.y;b.x=d.pageX;b.y=d.pageY}Atlantis.MouseState=function(){this.y=this.x=0;this.last={x:0,y:0};this.delta={x:0,y:0};this.click=!1;this.release=!0;this.drag=!1;this.domElement=document;this.initialized=!1};Atlantis.MouseState.prototype.initialize=function(){if(!this.initialized){var a=this;this.domElement.addEventListener("mousedown",function(b){a.update(b,a)},!1);this.domElement.addEventListener("mousemove",
function(b){a.update(b,a)},!1);this.domElement.addEventListener("mouseup",function(b){a.update(b,a)},!1);this.domElement.addEventListener("click",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchstart",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchmove",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchend",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchcancer",function(b){a.update(b,a)},!1);this.initialized=!0}};
Atlantis.MouseState.prototype.update=function(c,b){c.preventDefault();a(c,b);"mousedown"==c.type||"touchstart"==c.type?(b.click=!0,b.release=!1):"mousemove"==c.type||"touchmove"==c.type?b.drag=b.click?!0:!1:"mouseup"==c.type||"touchend"==c.type?(b.click=!1,b.release=!0,b.drag=!1):"click"==c.type&&(b.click=!1,b.release=!0,b.drag=!1);b.delta.x=b.x-b.last.x;b.delta.y=b.y-b.last.y}})();Atlantis=window.Atlantis||{};Atlantis.Input=Atlantis.Input||{};Atlantis=window.Atlantis||{};
(function(){Atlantis.GameTime=function(){var a=(new Date).getTime(),c=0,b=0;this.getElapsedTime=function(){return 0.0010*c};this.getTotalGameTime=function(){return 0.0010*b};this.update=function(){var d=(new Date).getTime();c=d-a;b+=c;a=d}};Atlantis.Game=function(a,c,b,d){d=d||{};this.width=a;this.height=c;this.domElement=b||document.body;if(!(a=d.canvas))a=this.width,c=this.height,b=document.body,d=document.createElement("canvas"),d.setAttribute("id","Atlantis.Canvas2D"),d.width=a,d.height=c,d.style.backgroundColor=
"#000",0<b.children.length?b.insertBefore(d,b.children[0]):b.appendChild(d),a=d;this.canvas=a;this.canvasContext=this.canvas.getContext("2d");this.gameTime=new Atlantis.GameTime;this.components=new Atlantis.GameComponentCollection;this.content=new Atlantis.ContentManager;this.keyboard=new Atlantis.KeyboardState;this.mouse=new Atlantis.MouseState};Atlantis.Game.prototype.initialize=function(){var a=this;this.components.initialize();this.keyboard.initialize();this.mouse.initialize();this.domElement.addEventListener("resize",
function(c){a.width=c.target.innerWidth;a.height=c.target.innerHeight;a.canvas.width=that.width;a.canvas.height=that.height},!1)};Atlantis.Game.prototype.update=function(a){this.components.update(a)};Atlantis.Game.prototype.draw=function(a,c){c.clearRect(0,0,this.width,this.height);this.components.draw(a,c)};Atlantis.Game.prototype.run=function(){this.gameTime.update();this.update(this.gameTime.getElapsedTime());this.draw(this.gameTime.getElapsedTime(),this.canvasContext)}})();Atlantis=window.Atlantis||{};Atlantis=window.Atlantis||{};
(function(){Atlantis.Sprite=function(){this.position=new Atlantis.Vector2;this.velocity=new Atlantis.Vector2;this.maxVelocity=1;this.direction=new Atlantis.Vector2;this.lastPosition=new Atlantis.Vector2;this.viewport=new Atlantis.Rectangle;this.hasAnimation=this.acrossScreen=this.insideScreen=!1;this.texture=null;this.textureName="";this.assetLoaded=!1;this.height=this.width=0;Object.defineProperty(this,"x",{get:function(){return that.position.x},set:function(a){that.position.x=a},enumerable:!0,configurable:!0});
Object.defineProperty(this,"y",{get:function(){return that.position.y},set:function(a){that.position.y=a},enumerable:!0,configurable:!0})};Atlantis.Sprite.prototype.initialize=function(){};Atlantis.Sprite.prototype.loadContent=function(a){""!=this.textureName&&!1==this.assetLoaded&&(this.texture=a.load(this.textureName),this.width=this.texture.getWidth(),this.height=this.texture.getHeight())};Atlantis.Sprite.prototype.update=function(){};Atlantis.Sprite.prototype.draw=function(a,c){c.drawImage(this.texture,
this.position.x,this.position.y,this.width,this.height)}})();
