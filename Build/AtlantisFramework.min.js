(function(){for(var b=0,a=["ms","moz","webkit","o"],c=0;c<a.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[a[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[c]+"CancelAnimationFrame"]||window[a[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var e=(new Date).getTime(),g=Math.max(0,16-(e-b)),h=window.setTimeout(function(){a(e+g)},g);b=e+g;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();var Atlantis=window.Atlantis||{};
Atlantis.ContentManager=function(){function b(a,b,f){if("undefined"!=typeof Atlantis.ajax)return Atlantis.ajax({method:"GET",url:b,success:function(e){var g=e;"json"==f&&(g=JSON.parse(e));a[b]=g}}),a[b];console.error("[Content] Impossible to load the resource because the Atlantis.Helper class isn't loaded")}var a=function(a){this.rootDirectory=a||"";this.assets=[]};a.prototype.load=function(a){if("undefined"===typeof this.assets[a]){var d=a.split("."),d=d[d.length-1];switch(d){case "png":case "jpg":case "bmp":var d=
this.assets,f=new Image;f.src=a;d[a]=f;break;case "mp3":case "ogg":case "wav":d=this.assets;f=document.createElement("audio");f.src=a;f.controls=!1;d[a]=f;break;case "mp4":case "ogv":var f=this.assets,e=document.createElement("video");e.src=a;f[a]=e;case "xml":case "json":case "js":b(this.assets,a,d)}}return this.assets[a]};a.prototype.dispose=function(){this.assets.length=0};return a}();Atlantis=window.Atlantis||{};Atlantis.GameComponent=function(){var b=function(a){this.game=a;this.enabled=!0;this.initialized=!1};b.prototype.initialize=function(){this.initialized=!0};b.prototype.update=function(a){};b.prototype.isEnabled=function(){return this.enabled};b.prototype.isInitialized=function(){return this.initialized};b.prototype.setEnabled=function(a){this.enabled=a};return b}();Atlantis=window.Atlantis||{};Atlantis.DrawableGameComponent=function(){var b=function(a){Atlantis.GameComponent.call(this,a);this.visible=!0;this.assetLoaded=!1};b.prototype=new Atlantis.GameComponent;b.prototype.loadContent=function(){this.assetLoaded=!0};b.prototype.unloadContent=function(){this.assetLoaded=!1};b.prototype.draw=function(a,c){};b.prototype.isVisible=function(){return this.isVisible};b.prototype.setVisible=function(a){this.isVisible=a};return b}();Atlantis=window.Atlantis||{};
Atlantis.GameComponentCollection=function(){var b=function(){this.components=[];this.drawables=[];this.assetLoaded=this.initialized=!1};b.prototype.initialize=function(a){a=0;for(var c=this.components.length;a<c;a++)this.components[a].initialize();this.initialized=!0};b.prototype.loadContent=function(){for(var a=0,c=this.drawables.length;a<c;a++)this.drawables[a].loadContent();this.assetLoaded=!0};b.prototype.unloadContent=function(a){a=0;for(var c=this.drawables.length;a<c;a++)this.drawables[a].unloadContent();
this.assetLoaded=!1};b.prototype.update=function(a){for(var c=0,b=this.components.length;c<b;c++)this.components[c].isEnabled()&&this.components[c].update(a)};b.prototype.draw=function(a,c){for(var b=0,f=this.drawables.length;b<f;b++)this.drawables[b].isVisible()&&this.drawables[b].draw(a,c)};b.prototype.add=function(a){-1==this.components.indexOf(a)&&(this.components.push(a),this.initialized&&component.initialize(),a instanceof Atlantis.DrawableGameComponent&&(this.drawables.push(a),this.assetLoaded&&
a.loadContent()))};b.prototype.remove=function(a){var c=this.components.indexOf(a);return-1<c?(this.components.splice(c,1),a instanceof Atlantis.DrawableGameComponent&&(c=this.drawables.indexOf(a),-1<c&&this.drawables.splice(c,1)),!0):!1};b.prototype.get=function(a){this.components.indexOf(gameComponent);return null};return b}();Atlantis=window.Atlantis||{};
Atlantis.GameTime=function(){var b=function(){this.reset()};b.prototype.reset=function(){this.totalGameTime=this.elapsedTime=0;this.currentTime=+new Date;this.fps=0};b.prototype.update=function(){var a=+new Date;this.elapsedTime=a-this.currentTime;this.totalGameTime+=this.elapsedTime;this.fps=1E3/(a-this.currentTime);this.currentTime=a};b.prototype.getElapsedTime=function(){return this.elapsedTime};b.prototype.getTotalGameTime=function(){return this.totalGameTime};b.prototype.getFPS=function(){return this.fps};
return b}();Atlantis=window.Atlantis||{};
(function(){var b=[];Atlantis.ajax=function(a){var c=a.params||{},b=a.url,f=a.method||"GET",e=a.success||function(){};a="undefined"!=typeof a.async?a.async:!0;var g;"undefined"!==typeof WinJS?WinJS.xhr({url:b}).then(e):(g=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"POST"==f?(g.open("POST",b,a),g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.setRequestHeader("Content-length",c.length),g.setRequestHeader("Connection","close"),g.onreadystatechange=
function(){4==g.readyState&&200==g.status&&null!=e&&e(g.responseText)},g.send(c)):(g.open("GET",""!=c?b+"?"+c:b,a),g.onreadystatechange=function(){4==g.readyState&&null!=e&&e(g.responseText)},g.send(null)))};Atlantis.notify=function(a,c){if("undefined"!=typeof b[a]){var d=b[a];if(c instanceof Object)for(var f in c)d[f]=c[f];document.dispatchEvent(d)}else return b[a]=document.createEvent("HTMLEvents"),b[a].initEvent(a,!0,!1),Atlantis.notify(a,c)};Atlantis.getImageSize=function(a){a.style.position=
"absolute";a.style.left="-9999px";document.body.appendChild(a);document.body.removeChild(a);a.style.position="";a.style.left=""}})();Atlantis=window.Atlantis||{};Atlantis.MathHelper=Atlantis.MathHelper||{};
(function(){Atlantis.MathHelper.Pi=function(){return Math.PI};Atlantis.MathHelper.PiOver2=function(){return Math.PI/2};Atlantis.MathHelper.PiOver4=function(){return Math.PI/4};Atlantis.MathHelper.TwoPi=function(){return 2*Math.PI};Atlantis.MathHelper.clamp=function(b,a,c){b=b>c?c:b;return b<a?a:b};Atlantis.MathHelper.distance=function(b,a){return Math.abs(b-a)};Atlantis.MathHelper.lerp=function(b,a,c){c=0>c?0:c;return b+(a-b)*(1<c?1:c)};Atlantis.MathHelper.toDegrees=function(b){return b*(180/Math.PI)};
Atlantis.MathHelper.toRadians=function(b){return b*(Math.PI/180)};Atlantis.MathHelper.isPowerOfTwo=function(b){return 0<b&&0==(b&b-1)}})();Atlantis=Atlantis||{};
Atlantis.Rectangle=function(){var b=function(a,c,b,f){a instanceof Atlantis.Rectangle?(this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):(this.x=a||0,this.y=c||0,this.width=b||0,this.height=f||0)};b.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.width+=a.width;this.height+=a.height};b.prototype.divide=function(a){this.x/=a.x;this.y/=a.y;this.width/=a.width;this.height/=a.height};b.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;this.width*=a.width;this.height*=a.height};
b.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;this.width-=a.width;this.height-=a.height};b.prototype.contains=function(a,c){return a instanceof Atlantis.Point?this.x<=value.x&&value.x<this.getRight()&&this.y<=value.y&&value.y<this.getBottom():a instanceof Atlantis.Rectangle?this.x<=a.x&&a.getRight()<=this.getRight()&&this.y<=a.y&&a.getBottom()<=this.getBottom():this.x<=a&&a<this.getRight()&&this.y<=c&&c<this.getBottom()};b.prototype.intersects=function(a){return a.getLeft()<this.getRight()&&
this.getLeft()<a.getRight()&&a.getTop()<this.getBottom()&&this.getTop()<a.getBottom()};b.prototype.toString=function(){return["x: ",this.x," y: ",this.y," width: ",this.width," height: ",this.height].toString()};b.prototype.toVector2=function(){return new Atlantis.Vector2(this.x,this.y)};b.prototype.toPoint=function(){return new Atlantis.Point(this.x,this.y)};b.prototype.getTop=function(){return this.y};b.prototype.getBottom=function(){return this.y+this.height};b.prototype.getLeft=function(){return this.x};
b.prototype.getRight=function(){return this.x+this.width};b.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/2,this.y+this.height/2)};b.prototype.getWidth=function(){return this.width};b.prototype.getHeight=function(){return this.height};b.prototype.getTopCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y)};b.prototype.getBottomCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y+this.height)};b.prototype.getLeftCenter=function(){return new Atlantis.Vector2(this.x,
this.y+this.height/2)};b.prototype.getRightCenter=function(){return new Atlantis.Vector2(this.x+this.width,this.y+this.height/2)};b.prototype.set=function(a,c,b,f){a instanceof Atlantis.Rectangle?(this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):a instanceof Altantis.Vector2||a instanceof Atlantis.Point?(this.x=a.x,this.y=a.y):(this.x=a,this.y=c,this.width=b,this.height=f)};b.prototype.setPosition=function(a,c){a instanceof Altantis.Vector2||a instanceof Atlantis.Point?(this.x=a.x,this.y=
a.y):(this.x=a,this.y=c)};b.prototype.setSize=function(a,c){this.width=a;this.height=c};b.prototype.toString=function(){return["x: ",this.x," y: ",this.y," width: ",this.width," height: ",this.height].join("")};return b}();Atlantis=window.Atlantis||{};
Atlantis.Matrix=function(){var b=function(a){a instanceof Atlantis.Matrix?(a=a.toArray(),this.set(a)):a instanceof Array&&16==a.length?this.set(a):this.M44=this.M43=this.M42=this.M41=this.M34=this.M33=this.M32=this.M31=this.M24=this.M23=this.M22=this.M21=this.M14=this.M13=this.M12=this.M11=0};b.prototype.set=function(a){16==a.length&&(this.M11=a[0],this.M12=a[1],this.M13=a[2],this.M14=a[3],this.M21=a[4],this.M22=a[5],this.M23=a[6],this.M24=a[7],this.M31=a[8],this.M32=a[9],this.M33=a[10],this.M34=
a[11],this.M41=a[12],this.M42=a[13],this.M43=a[14],this.M44=a[15])};b.prototype.getIdentityValues=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};b.prototype.getZeroValues=function(){for(var a=[],c=0;16>c;c++)a.push(0);return a};b.prototype.setIdentity=function(){this.set(this.getIdentityValues())};b.getMatrixIdentity=function(){var a=new Atlantis.Matrix;a.setIdentity();return a};b.prototype.toArray=function(){var a=[];a.push(this.M11);a.push(this.M12);a.push(this.M13);a.push(this.M14);a.push(this.M21);
a.push(this.M22);a.push(this.M23);a.push(this.M24);a.push(this.M31);a.push(this.M32);a.push(this.M33);a.push(this.M34);a.push(this.M41);a.push(this.M42);a.push(this.M43);a.push(this.M44);return a};b.prototype.setLeft=function(a){this.M11=-a.x;this.M12=-a.y;this.M13=-a.z};b.prototype.getLeft=function(){var a=new Atlantis.Vector3;a.x=-this.M11;a.y=-this.M12;a.z=-this.M13;return a};b.prototype.setRight=function(a){this.M11=a.x;this.M12=a.y;this.M13=a.z};b.prototype.getRight=function(){var a=new Atlantis.Vector3;
a.x=this.M11;a.y=this.M12;a.z=this.M13;return a};b.prototype.setUp=function(a){this.M21=a.x;this.M22=a.y;this.M23=a.z};b.prototype.getUp=function(){var a=new Atlantis.Vector3;a.x=this.M21;a.y=this.M22;a.z=this.M23;return a};b.prototype.setDown=function(a){this.M21=-a.x;this.M22=-a.y;this.M23=-a.z};b.prototype.getDown=function(){var a=new Atlantis.Vector3;a.x=-this.M21;a.y=-this.M22;a.z=-this.M23;return a};b.prototype.setBackward=function(a){this.M31=a.x;this.M32=a.y;this.M33=a.z};b.prototype.getBackward=
function(){var a=new Atlantis.Vector3;a.x=this.M31;a.y=this.M32;a.z=this.M33;return a};b.prototype.setForward=function(a){this.M31=-a.x;this.M32=-a.y;this.M33=-a.z};b.prototype.getForward=function(){var a=new Atlantis.Vector3;a.x=-this.M31;a.y=-this.M32;a.z=-this.M33;return a};b.prototype.setTranslation=function(a){this.M41=a.x;this.M42=a.y;this.M43=a.z};b.prototype.add=function(a){var c=this.toArray();a=a.toArray();for(var b=0;16>b;b++)c[b]+=a[b];this.set(c)};b.add=function(a,c){var b=new Atlantis.Matrix(a);
b.add(c);return b};b.createRotationX=function(a){var c=getMatrixIdentity(),b=Math.cos(a);a=Math.sin(a);c.M22=b;c.M23=a;c.M32=-a;c.M33=b;return c};b.createRotationY=function(a){var c=getMatrixIdentity(),b=Math.cos(a);a=Math.sin(a);c.M11=b;c.M13=-a;c.M31=a;c.M33=b;return c};b.createRotationZ=function(a){var c=this.getMatrixIdentity(),b=Math.cos(a);a=Math.sin(a);c.M11=b;c.M13=a;c.M31=-a;c.M33=b;return c};b.createScale=function(a,c,b){var f=Atlantis.Matrix.getMatrixIdentity();f.M11=a;f.M22=c||a;f.M33=
b||a;return f};b.createTranslation=function(a,c,b){var f=Atantis.Matrix.getMatrixIdentity();f.M41=a;f.M42=c||a;f.M43=b||a;return f};b.createLookAt=function(a,c,b){c=Atlantis.Vector3.subtract(c,a);c.normalize();b=Atlantis.Vector3.cross(b,c);b.normalize();var f=Atlantis.Vector3.cross(c,b);f.normalize();var e=Atlantis.Matrix.getMatrixIdentity();e.M11=b.x;e.M21=b.y;e.M31=b.z;e.M12=f.x;e.M22=f.y;e.M32=f.z;e.M13=c.x;e.M23=c.y;e.M33=c.z;e.M41=-Atlantis.Vector3.dot(b,a);e.M42=-Atlantis.Vector3.dot(f,a);e.M43=
-Atlantis.Vector3.dot(c,a);return e};b.createOrthographic=function(a,c,b,f){var e=new Matrix;e.M11=2/a;e.M12=e.M13=e.M14=0;e.M22=2/c;e.M21=e.M23=e.M24=0;e.M33=1/(b-f);e.M31=e.M32=e.M34=0;e.M41=e.M42=0;e.M43=b/(b-f);e.M44=1;return e};b.createOrthographicOffCenter=function(a,c,b,f,e,g){var h=new Atlantis.Matrix;h.M11=2/(c-a);h.M12=0;h.M13=0;h.M14=0;h.M21=0;h.M22=2/(f-b);h.M23=0;h.M24=0;h.M31=0;h.M32=0;h.M33=1/(e-g);h.M34=0;h.M41=(a+c)/(a-c);h.M42=(f+b)/(b-f);h.M43=e/(e-g);h.M44=1;return h};b.createPerspectiveFieldOfView=
function(a,c,b,f){a=1/Math.tan(0.5*a);c=b/(a/c);a=b/a;return Atlantis.Matrix.createPerspectiveOffCenter(-c,c,-a,a,b,f)};b.createPerspetiveFieldOfViewRH=function(a,c,b,f){a=1/Math.tan(0.5*a);c=b/(a/c);a=b/a;return Matrix.createPerspectiveOffCenterRH(-c,c,-a,a,b,f)};b.createPerspectiveOffCenter=function(a,c,b,f,e,g){g/=g-e;var h=new Atlantis.Matrix;h.M11=2*e/(c-a);h.M22=2*e/(f-b);h.M31=(a+c)/(a-c);h.M32=(f+b)/(b-f);h.M33=g;h.M34=1;h.M43=-e*g;return h};b.createPerspectiveOffCenterRH=function(a,c,b,f,
e,g){a=createPerspectiveOffCenter(a,c,b,f,e,g);a.M31*=-1;a.M32*=-1;a.M33*=-1;a.M34*=-1;return a};b.prototype.invert=function(){var a=this.M31*this.M42-this.M32*this.M41,c=this.M31*this.M43-this.M33*this.M41,b=this.M34*this.M41-this.M31*this.M44,f=this.M32*this.M43-this.M33*this.M42,e=this.M34*this.M42-this.M32*this.M44,g=this.M33*this.M44-this.M34*this.M43,h=this.M22*g+this.M23*e+this.M24*f,s=this.M21*g+this.M23*b+this.M24*c,t=this.M21*-e+this.M22*b+this.M24*a,u=this.M21*f+this.M22*-c+this.M23*a,
k=this.M11*h-this.M12*s+this.M13*t-this.M14*u;if(0==Math.abs(k))this.set(this.getZeroValues());else{var k=1/k,l=this.M11*this.M22-this.M12*this.M21,n=this.M11*this.M23-this.M13*this.M21,m=this.M14*this.M21-this.M11*this.M24,p=this.M12*this.M23-this.M13*this.M22,q=this.M14*this.M22-this.M12*this.M24,r=this.M13*this.M24-this.M14*this.M23,v=this.M12*g+this.M13*e+this.M14*f,g=this.M11*g+this.M13*b+this.M14*c,b=this.M11*-e+this.M12*b+this.M14*a,a=this.M11*f+this.M12*-c+this.M13*a,c=this.M42*r+this.M43*
q+this.M44*p,f=this.M41*r+this.M43*m+this.M44*n,e=this.M41*-q+this.M42*m+this.M44*l,w=this.M41*p+this.M42*-n+this.M43*l,x=this.M32*r+this.M33*q+this.M34*p,r=this.M31*r+this.M33*m+this.M34*n,m=this.M31*-q+this.M32*m+this.M34*l,l=this.M31*p+this.M32*-n+this.M33*l;this.M11=+h*k;this.M12=-v*k;this.M13=+c*k;this.M14=-x*k;this.M21=-s*k;this.M22=+g*k;this.M23=-f*k;this.M24=+r*k;this.M31=+t*k;this.M32=-b*k;this.M33=+e*k;this.M34=-m*k;this.M41=-u*k;this.M42=+a*k;this.M43=-w*k;this.M44=+l*k}};b.invert=function(a){a=
new Matrix(a);a.invert();return a};b.createWorld=function(a,c,b){var f=new Atlantis.Matrix;b=Atlantis.Vector3.cross(c,b);var e=Atlantis.Vector3.cross(b,c);Atlantis.Vector3.normalize(c);b.normalize();e.normalize();f.setTranslation(a);f.M44=1;return f};b.prototype.multiply=function(a){var b=this.M11*a.M12+this.M12*a.M22+this.M13*a.M32+this.M14*a.M42,d=this.M11*a.M13+this.M12*a.M23+this.M13*a.M33+this.M14*a.M43,f=this.M11*a.M14+this.M12*a.M24+this.M13*a.M34+this.M14*a.M44,e=this.M21*a.M11+this.M22*a.M21+
this.M23*a.M31+this.M24*a.M41,g=this.M21*a.M12+this.M22*a.M22+this.M23*a.M32+this.M24*a.M42,h=this.M21*a.M13+this.M22*a.M23+this.M23*a.M33+this.M24*a.M43,s=this.M21*a.M14+this.M22*a.M24+this.M23*a.M34+this.M24*a.M44,t=this.M31*a.M11+this.M32*a.M21+this.M33*a.M31+this.M34*a.M41,u=this.M31*a.M12+this.M32*a.M22+this.M33*a.M32+this.M34*a.M42,k=this.M31*a.M13+this.M32*a.M23+this.M33*a.M33+this.M34*a.M43,l=this.M31*a.M14+this.M32*a.M24+this.M33*a.M34+this.M34*a.M44,n=this.M41*a.M11+this.M42*a.M21+this.M43*
a.M31+this.M44*a.M41,m=this.M41*a.M12+this.M42*a.M22+this.M43*a.M32+this.M44*a.M42,p=this.M41*a.M13+this.M42*a.M23+this.M43*a.M33+this.M44*a.M43,q=this.M41*a.M14+this.M42*a.M24+this.M43*a.M34+this.M44*a.M44;this.M11=this.M11*a.M11+this.M12*a.M21+this.M13*a.M31+this.M14*a.M41;this.M12=b;this.M13=d;this.M14=f;this.M21=e;this.M22=g;this.M23=h;this.M24=s;this.M31=t;this.M32=u;this.M33=k;this.M34=l;this.M41=n;this.M42=m;this.M43=p;this.M44=q};b.multiply=function(a,b,d){a=new Atlantis.Matrix(a);a.multiply(b);
d instanceof Atlantis.Matrix&&a.multiply(d);return a};b.prototype.subtract=function(a){var b=this.toArray();a=a.toArray();for(var d=0;16>d;d++)b[d]-=a[d];this.set(b)};b.subtract=function(a,b){var d=new Atlantis.Matrix(a);d.subtract(b);return d};b.prototype.toString=function(){for(var a=this.toArray(),b=[],d=0;16>d;d+=4)b.push("["),b.push(a[d]+" "),b.push(a[d+1]+" "),b.push(a[d+2]+" "),b.push(a[d+3]),b.push("] ");return b.join("")};return b}();Atlantis=Atlantis||{};Atlantis.Quaternion=function(){}();Atlantis=window.Atlantis||{};
Atlantis.Vector2=function(){var b=function(a,b){a instanceof Atlantis.Vector2?(this.x=a.x,this.y=a.y):(this.x=a||0,this.y=b||0)};b.Zero=function(){return new Vector2};b.One=function(){return new Vector2(1,1)};b.UnitX=function(){return new Vector2(1,0)};b.UnitY=function(){return new Vector2(0,1)};b.prototype.add=function(a){a instanceof Atlantis.Vector2?(this.x+=a.x,this.y+=a.y):(this.x+=a,this.y+=a)};b.add=function(a,b){var d=new Atlantis.Vector2(a);d.add(b);return d};b.prototype.subtract=function(a){a instanceof
Atlantis.Vector2?(this.x-=a.x,this.y-=a.y):(this.x-=a,this.y-=a)};b.subtract=function(a,b){var d=new Atlantis.Vector2(a);d.subtract(b);return d};b.prototype.divide=function(a){a instanceof Atlantis.Vector2?(this.x/=a.x,this.y/=a.y):(this.x/=a,this.y/=a)};b.divide=function(a,b){var d=new Atlantis.Vector2(a);d.divide(b);return d};b.prototype.multiply=function(a){a instanceof Atlantis.Vector2?(this.x*=a.x,this.y*=a.y):(this.x*=a,this.y*=a)};b.multiply=function(a,b){var d=new Atlantis.Vector2(a);d.multiply(b);
return d};b.prototype.distance=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};b.distance=function(a,c){return(new b(a)).distance(c)};b.prototype.distance=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};b.dot=function(a,b){return a.x*b.x+a.y*b.y};b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.lerp=function(a,b,d){return new Atlantis.Vector2(Atlantis.MathHelper.lerp(a.x,b.x,amount),Atlantis.MathHelper.lerp(b.y,b.y,amount))};
b.min=function(a,b){var d=new Atlantis.Vector2;d.x=a.x<b.x?a.x:b.x;d.y=a.y<b.y?a.y:b.y;return d};b.max=function(a,b){var d=new Vector2;d.x=a.x>b.x?a.x:b.x;d.y=a.y>b.y?a.y:b.y;return d};b.prototype.negate=function(a){a instanceof Atlantis.Vector2?(this.x=-a.x,this.y=-a.y):(this.x=-a,this.y=-a)};b.negate=function(a){a=new Atlantis.Vector2(a);a.x*=-1;a.y*=-1;return a};b.prototype.normalize=function(){var a=Atlantis.Vector3.distance(this,new Vector3);0!=a&&(a=1/a,this.set(this.x*a,this.y*a,this.z*a))};
b.normalize=function(a){a=new b(a);a.normalize();return a};b.transform=function(a,b){return new Atlantis.Vector3(a.x*b.M11+a.y*b.M21+a.z*b.M31+b.M41,a.x*b.M12+a.y*b.M22+a.z*b.M32+b.M42,a.x*b.M13+a.y*b.M23+a.z*b.M33+b.M43)};b.transformCoordinate=function(a,b){var d=new Atlantis.Vector4;d.x=a.x*b.M11+a.y*b.M21+a.z*b.M31+b.M41;d.y=a.x*b.M12+a.y*b.M22+a.z*b.M32+b.M42;d.z=a.x*b.M13+a.y*b.M23+a.z*b.M33+b.M43;d.w=1/(a.x*b.M14+a.y*b.M24+a.z*b.M34+b.M44);return new Vector3(d.x*d.w,d.y*d.w,d.z*d.w)};b.prototype.set=
function(a,b){this.x=a;this.y=b};b.prototype.toString=function(){return["x: ",this.x," y: ",this.y].join("")};return b}();Atlantis=window.Atlantis||{};
Atlantis.Vector3=function(){var b=function(a,b,d){a instanceof Atlantis.Vector3?(this.x=a.x,this.y=a.y,this.z=a.z):(this.x=a||0,this.y=b||0,this.z=d||0)};b.Zero=function(){return new Atlantis.Vector3(0,0,0)};b.One=function(){return new Atlantis.Vector3(1,1,1)};b.UnitX=function(){return new Atlantis.Vector3(1,0,0)};b.UnitY=function(){return new Atlantis.Vector3(0,1,0)};b.UnitZ=function(){return new Atlantis.Vector3(0,0,1)};b.Up=function(){return new Atlantis.Vector3(0,1,0)};b.Down=function(){return new Atlantis.Vector3(0,
-1,0)};b.Right=function(){return new Atlantis.Vector3(1,0,0)};b.Left=function(){return new Atlantis.Vector3(-1,0,0)};b.Forward=function(){return new Atlantis.Vector3(0,0,-1)};b.Backward=function(){return new Atlantis.Vector3(0,0,1)};b.prototype.add=function(a){a instanceof Atlantis.Vector3?(this.x+=a.x,this.y+=a.y,this.z+=a.z):(this.x+=a,this.y+=a,this.z+=a)};b.add=function(a,b){var d=new Vector3(a);d.add(b);return d};b.prototype.subtract=function(a){a instanceof Atlantis.Vector3?(this.x-=a.x,this.y-=
a.y,this.z-=a.z):(this.x-=a,this.y-=a,this.z-=a)};b.subtract=function(a,b){var d=new Atlantis.Vector3(a);d.subtract(b);return d};b.prototype.divide=function(a){0!=a.x&&(this.x/=a.x);0!=a.y&&(this.y/=a.y);0!=a.z&&(this.z/=a.z)};b.divide=function(a,b){var d=new Atlantis.Vector3(a);d.divide(b);return d};b.prototype.multiply=function(a){a instanceof Atlantis.Vector3?(this.x*=a.x,this.y*=a.y,this.z*=a.z):(this.x*=a,this.y*=a,this.z*=a)};b.multiply=function(a,b){var d=new Atlantis.Vector3(a);d.multiply(b);
return d};b.cross=function(a,b){var d=new Atlantis.Vector3;d.x=a.y*b.z-b.y*a.z;d.y=-(a.x*b.z-b.x*a.z);d.z=a.x*b.y-b.x*a.y;return d};b.distance=function(a,b){return Math.sqrt(Atlantis.Vector3.distanceSquared(a,b))};b.distanceSquared=function(a,b){var d=a.x-b.x,f=a.y-b.y,e=a.z-b.z;return d*d+f*f+e*e};b.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};b.prototype.lerp=function(a,b){this.x=Atlantis.MathHelper.lerp(this.x,
a.x,b);this.y=Atlantis.MathHelper.lerp(this.y,a.y,b);this.z=Atlantis.MathHelper.lerp(this.z,a.z,b)};b.lerp=function(a,b){var d=Atlantis.MathHelper.lerp(a.x,b.x,amount),f=Atlantis.MathHelper.lerp(a.y,b.y,amount),e=Atlantis.MathHelper.lerp(a.z,b.z,amount);return new Atlantis.Vector3(d,f,e)};b.min=function(a,b){var d=new Atlantis.Vector3;d.x=a.x<b.x?a.x:b.x;d.y=a.y<b.y?a.y:b.y;d.z=a.z<b.z?a.z:b.z;return d};b.max=function(a,b){var d=new Atlantis.Vector3;d.x=a.x>b.x?a.x:b.x;d.y=a.y>b.y?a.y:b.y;d.z=a.z>
b.z?a.z:b.z;return d};b.prototype.negate=function(){this.x*=-1;this.y*=-1;this.z*=-1};b.negate=function(a){a=new Atlantis.Vector3(a);a.negate();return a};b.normalize=function(){var a=distance(this,new Atlantis.Vector3);0!=a&&(a=1/a,this.set(this.x*a,this.y*a,this.z*a))};b.normalize=function(a){a=new Vector3(a);a.normalize();return a};b.transform=function(a,b){return new Vector3(a.x*b.M11+a.y*b.M21+a.z*b.M31+b.M41,a.x*b.M12+a.y*b.M22+a.z*b.M32+b.M42,a.x*b.M13+a.y*b.M23+a.z*b.M33+b.M43)};b.transformCoordinate=
function(a,b){var d=new Atlantis.Vector4;d.x=a.x*b.M11+a.y*b.M21+a.z*b.M31+b.M41;d.y=a.x*b.M12+a.y*b.M22+a.z*b.M32+b.M42;d.z=a.x*b.M13+a.y*b.M23+a.z*b.M33+b.M43;d.w=1/(a.x*b.M14+a.y*b.M24+a.z*b.M34+b.M44);return new Atlantis.Vector3(d.x*d.w,d.y*d.w,d.z*d.w)};b.prototype.set=function(a,b,d){this.x=a;this.y=b;this.z=d};b.prototype.toString=function(){return["x: ",this.x," y: ",this.y," z: ",this.z].join("")};return b};Atlantis=window.Atlantis||{};Atlantis.Vector4=function(){}();Atlantis=window.Atlantis||{};Atlantis.Input=Atlantis.Input||{};Atlantis.Input.KeyboardState=function(){var b=function(a){this.keys=a};b.prototype.isKeyDown=function(a){return!0==this.keys[a]};b.prototype.isKeyUp=function(a){return!1==this.keys[a]};return b}();Atlantis=window.Atlantis||{};Atlantis.Input=Atlantis.Input||{};Atlantis.Keys={up:38,down:40,left:37,right:39,space:32,escape:27};
Atlantis.Input.KeyboardManager=function(){var b=null,a=function(a){this.keys=[];this.maxKeys=a||110;for(var d=0;d<a;d++)this.keys[d]=!1;this.preventDefault=!0;document.addEventListener("keydown",this.onKeyStateChange,!1);document.addEventListener("keyup",this.onKeyStateChange,!1);b=this};a.prototype.getState=function(){return new Atlantis.Input.KeyboardState(this.keys)};a.prototype.onKeyStateChange=function(a){b.preventDefault&&a.preventDefault();b.keys[a.keyCode]="keydown"==a.type?!0:!1};return a}();Atlantis=window.Atlantis||{};Atlantis.Input=Atlantis.Input||{};
Atlantis.Input.PointerManager=function(){var b,a=function(a){this.y=this.x=0;this.previousState={x:0,y:0};this.delta={x:0,y:0};this.click=!1;this.release=!0;this.drag=!1;this.hasTouch=!!("ontouchstart"in window)||!!("onmsgesturechange"in window);this.touch=!1;this.domElement=a;this.initialized=!1;this.startEventListeners();b=this};a.prototype.startEventListeners=function(){this.initialized||(this.domElement.addEventListener("mousedown",this.updateHandler,!1),this.domElement.addEventListener("mousemove",
this.updateHandler,!1),this.domElement.addEventListener("mouseup",this.updateHandler,!1),this.domElement.addEventListener("click",this.updateHandler,!1),this.domElement.addEventListener("touchstart",this.updateHandler,!1),this.domElement.addEventListener("touchmove",this.updateHandler,!1),this.domElement.addEventListener("touchend",this.updateHandler,!1),this.domElement.addEventListener("touchcancel",this.updateHandler,!1),this.initialized=!0)};a.prototype.stopEventListeners=function(){this.initialized&&
(this.domElement.removeEventListener("mousedown",this.updateHandler),this.domElement.removeEventListener("mousemove",this.updateHandler),this.domElement.removeEventListener("mouseup",this.updateHandler),this.domElement.removeEventListener("click",this.updateHandler),this.domElement.removeEventListener("touchstart",this.updateHandler),this.domElement.removeEventListener("touchmove",this.updateHandler),this.domElement.removeEventListener("touchend",this.updateHandler),this.domElement.removeEventListener("touchcancel",
this.updateHandler),this.initialized=!1)};a.prototype.updatePosition=function(a){var d=a;"undefined"!==typeof a.touches&&0<a.touches.length&&(d=a.touches[0]);a=d;b.previousState.x=b.x;b.previousState.y=b.y;b.x=a.pageX;b.y=a.pageY};a.prototype.updateClickStates=function(a){a=a||{};"mousedown"==a.type||"touchstart"==a.type?(b.click=!0,b.release=!1,b.touch=b.hasTouch?!0:!1):"mousemove"==a.type||"touchmove"==a.type?b.drag=b.click?!0:!1:(b.click=!1,b.release=!0,b.drag=!1,b.touch=!1)};a.prototype.updateHandler=
function(a){a.preventDefault();b.updatePosition(a);b.updateClickStates(a);b.updateDelta()};a.prototype.updateDelta=function(){b.delta.x=b.x==b.previousState.x?0:b.x-b.previousState.x;b.delta.y=b.y==b.previousState.y?0:b.y-b.previousState.y;100<b.delta.x&&(b.delta.x=0);b.delta.x=50<b.delta.x?0:b.delta.x;b.delta.y=50<b.delta.y?0:b.delta.y};return a}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};Atlantis.Graphics.GraphicsDevice=function(){var b=function(a){this.mainRenderTarget=new Atlantis.Graphics.RenderTarget2D(a.width,a.height);this.width=a.width;this.height=a.height};b.prototype.getGraphics=function(a){return this.canvas.getContent(a||"2d")};b.prototype.getRenderTarget=function(){return this.mainRenderTarget};b.prototype.getWidth=function(){return this.width};b.prototype.getHeight=function(){return this.height};return b}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};Atlantis.Graphics.Texture2D=function(){return function(){}}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};Atlantis.Graphics.RenderTarget2D=function(){var b=function(a,b){Atlantis.Graphics.Texture2D.call(this,a,b)};b.prototype=new Atlantis.Graphics.Texture2D;return b}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};Atlantis.Graphics.SpriteEffect={None:0,FlipHorizontally:1,FlipVertically:2};Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};Atlantis.Graphics.SpriteFont=function(){return function(){}}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};Atlantis.Graphics.SpriteBatch=function(){return function(b){}}();Atlantis=window.Atlantis||{};
Atlantis.Game=function(){function b(){c.gameTime.update();c.update(c.gameTime);c.draw(c.gameTime,c.canvasContext);requestAnimationFrame(b)}function a(a){c.width=a.target.innerWidth;c.height=a.target.innerHeight;c.canvas.width=c.width;c.canvas.height=c.height}var c=null,d=function(b,d,g,h){h=h||{};this.width=b||640;this.height=d||480;this.domElement=g||document.body;this.gameTime=new Atlantis.GameTime;this.components=new Atlantis.GameComponentCollection;this.contentManager=new Atlantis.ContentManager;
this.keyboardManager=new Atlantis.Input.KeyboardManager;this.canvas=h.canvas;this.initialized=this.isRunning=!1;if(null!=this.domElement){if(!(b=this.canvas))b=this.width,d=this.height,g=document.createElement("canvas"),g.setAttribute("id","Atlantis.Canvas2D"),g.width=b,g.height=d,g.style.backgroundColor="#000",b=g;this.canvas=b;this.canvas.style.msTouchAction="none";this.canvasContext=this.canvas.getContext("2d")}this.pointerManager=new Atlantis.Input.PointerManager(this.domElement);this.graphicsDevice=
new Atlantis.Graphics.GraphicsDevice(this.canvas);this.domElement.addEventListener("resize",a,!1);c=this};d.prototype.initialize=function(){0<this.domElement.children.length?this.domElement.insertBefore(this.canvas,this.domElement.children[0]):this.domElement.appendChild(this.canvas);this.components.initialize()};d.prototype.loadContent=function(){this.components.loadContent()};d.prototype.unloadContent=function(){};d.prototype.update=function(a){this.components.update(a)};d.prototype.draw=function(a,
b){b.clearRect(0,0,this.width,this.height);this.components.draw(a,b)};d.prototype.run=function(){this.initialized||(this.initialized=!0,this.initialize(),this.loadContent(),b())};return d}();
