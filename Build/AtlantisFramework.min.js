var Atlantis=window.Atlantis||{};
Atlantis.ContentManager=function(){function b(a,b,d){if("undefined"!=typeof Atlantis.ajax)return Atlantis.ajax({method:"GET",url:b,success:function(g){var f=g;"json"==d&&(f=JSON.parse(g));a[b]=f}}),a[b];console.error("[Content] Impossible to load the resource becanse the Atlantis.Helper class isn't loaded")}var a=function(a){this.rootDirectory=a||"";this.assets=[]};a.prototype.load=function(a){if("undefined"==typeof this.assets[a]){var c=a.split("."),c=c[c.length-1];switch(c){case "png":case "jpg":case "bmp":var c=
this.assets,d=new Image;d.src=a;c[a]=d;break;case "mp3":case "ogg":case "wav":c=this.assets;d=document.createElement("audio");d.src=a;d.controls=!1;c[a]=d;break;case "mp4":case "ogv":var d=this.assets,g=document.createElement("video");g.src=a;d[a]=g;case "xml":case "json":case "js":b(this.assets,a,c)}}return this.assets[a]};a.prototype.dispose=function(){this.assets.length=0};return a}();Atlantis=window.Atlantis||{};Atlantis.GameComponent=function(){var b=function(a){this.game=a;this.enabled=this.visible=!0};b.prototype.isActive=function(){return this.visible&&this.enabled};b.prototype.setActive=function(a){this.visible=this.enabled=a};b.prototype.initialize=function(){};b.prototype.update=function(a){};return b}();
Atlantis.DrawableGameComponent=function(){var b=function(a){Atlantis.GameComponent.call(this,a)};b.prototype=new Atlantis.GameComponent;b.prototype.draw=function(a,e){};return b}();
Atlantis.GameComponentCollection=function(){var b=function(){this.components=[];this.drawables=[]};b.prototype.add=function(a){-1==this.components.indexOf(a)&&(this.components.push(a),a instanceof Atlantis.DrawableGameComponent&&this.drawables.push(a))};b.prototype.get=function(a){this.components.indexOf(gameComponent);return null};b.prototype.remove=function(a){var e=this.components.indexOf(a);-1<e&&(this.components.splice(e,1),a instanceof Atlantis.DrawableGameComponent&&(e=this.drawables.indexOf(a),
-1<e&&this.drawables.splice(e,1)))};b.prototype.initialize=function(a){a=0;for(var e=this.components.length;a<e;a++)this.components[a].initialize()};b.prototype.loadContent=function(a){for(var e=0,b=this.drawables.length;e<b;e++)this.drawables[e].loadContent(a)};b.prototype.update=function(a){for(var e=0,b=this.components.length;e<b;e++)this.components[e].enabled&&this.components[e].update(a)};b.prototype.draw=function(a,b){for(var c=0,d=this.drawables.length;c<d;c++)this.drawables[c].visible&&this.drawables[c].draw(a,
b)};return b}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};(function(){Atlantis.Graphics.drawCircle=function(b,a,e,c,d){b.beginPath();b.arc(a,e,c,0,2*Math.PI,!0);b.fillStyle=d||"#ffffff";b.fill()};Atlantis.Graphics.drawRectPoint=function(b,a,e,c,d,g){b.fillStyle=g||"#ffffff";b.fillRect(a,e,c,d)};Atlantis.Graphics.drawText=function(b,a,e,c,d){d=d||{};var g=d.style||"normal",f=d.size||12,h=d.font||"sans-serif";b.fillStyle=d.color||"#ffffff";b.font=g+" "+f+"px "+h;b.fillText(a,e,c)}})();Atlantis=window.Atlantis||{};
(function(){var b=[];Atlantis.ajax=function(a){var b=a.params||{},c=a.url,d=a.method||"GET",g=a.success||function(){};a="undefined"!=typeof a.async?a.async:!0;var f;"undefined"!==typeof WinJS?WinJS.xhr({url:c}).then(g):(f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"POST"==d?(f.open("POST",c,a),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.setRequestHeader("Content-length",b.length),f.setRequestHeader("Connection","close"),f.onreadystatechange=
function(){4==f.readyState&&200==f.status&&null!=g&&g(f.responseText)},f.send(b)):(f.open("GET",""!=b?c+"?"+b:c,a),f.onreadystatechange=function(){4==f.readyState&&null!=g&&g(f.responseText)},f.send(null)))};Atlantis.notify=function(a,e){if("undefined"!=typeof b[a]){var c=b[a];if(e instanceof Object)for(var d in e)c[d]=e[d];document.dispatchEvent(c)}else return b[a]=document.createEvent("HTMLEvents"),b[a].initEvent(a,!0,!1),Atlantis.notify(a,e)};Atlantis.getImageSize=function(a){a.style.position=
"absolute";a.style.left="-9999px";document.body.appendChild(a);document.body.removeChild(a);a.style.position="";a.style.left=""}})();Atlantis=Atlantis||{};Atlantis.Point=function(){return function(b,a){b instanceof Atlantis.Point?(this.x=b.x,this.y=b.y):(this.x=b||0,this.y=a||0)}}();
Atlantis.Rectangle=function(){var b=function(a,b,c,d){a instanceof Atlantis.Rectangle?(this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):(this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0)};b.prototype.contains=function(a,b){return a instanceof Atlantis.Point?this.x<=value.x&&value.x<this.getRight()&&this.y<=value.y&&value.y<this.getBottom():a instanceof Atlantis.Rectangle?this.x<=a.x&&a.getRight()<=this.getRight()&&this.y<=a.y&&a.getBottom()<=this.getBottom():this.x<=a&&a<this.getRight()&&
this.y<=b&&b<this.getBottom()};b.prototype.intersects=function(a){return a.getLeft()<this.getRight()&&this.getLeft()<a.getRight()&&a.getTop()<this.getBottom()&&this.getTop()<a.getBottom()};b.prototype.toString=function(){return["x: ",this.x," y: ",this.y," width: ",this.width," height: ",this.height].toString()};b.prototype.toVector2=function(){return new Atlantis.Vector2(this.x,this.y)};b.prototype.toPoint=function(){return new Atlantis.Point(this.x,this.y)};b.prototype.getTop=function(){return this.y};
b.prototype.getBottom=function(){return this.y+this.height};b.prototype.getLeft=function(){return this.x};b.prototype.getRight=function(){return this.x+this.width};b.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/2,this.y+this.height/2)};b.prototype.getWidth=function(){return this.width};b.prototype.getHeight=function(){return this.height};b.prototype.getTopCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y)};b.prototype.getBottomCenter=function(){return new Atlantis.Vector2(this.x+
this.width/2,this.y+this.height)};b.prototype.getLeftCenter=function(){return new Atlantis.Vector2(this.x,this.y+this.height/2)};b.prototype.getRightCenter=function(){return new Atlantis.Vector2(this.x+this.width,this.y+this.height/2)};b.prototype.set=function(a,b,c,d){a instanceof Atlantis.Rectangle?(this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):a instanceof Altantis.Vector2||a instanceof Atlantis.Point?(this.x=a.x,this.y=a.y):(this.x=a,this.y=b,this.width=c,this.height=d)};b.prototype.setPosition=
function(a,b){a instanceof Altantis.Vector2||a instanceof Atlantis.Point?(this.x=a.x,this.y=a.y):(this.x=a,this.y=b)};b.prototype.setSize=function(a,b){this.width=a;this.height=b};return b}();Atlantis=window.Atlantis||{};
Atlantis.Vector2=function(){var b=function(a,b){a instanceof Atlantis.Vector2?(this.x=a.x,this.y=a.y):(this.x=a||0,this.y=b||0)};b.prototype.add=function(a){a instanceof Atlantis.Vector2?(this.x+=a.x,this.y+=a.y):(this.x+=a,this.y+=a)};b.add=function(a,b){var c=new Atlantis.Vector2(a);c.add(b);return c};b.prototype.subtract=function(a){a instanceof Atlantis.Vector2?(this.x-=a.x,this.y-=a.y):(this.x-=a,this.y-=a)};b.subtract=function(a,b){var c=new Atlantis.Vector2(a);c.subtract(b);return c};b.prototype.divide=
function(a){a instanceof Atlantis.Vector2?(this.x/=a.x,this.y/=a.y):(this.x/=a,this.y/=a)};b.divide=function(a,b){var c=new Atlantis.Vector2(a);c.divide(b);return c};b.prototype.multiply=function(a){a instanceof Atlantis.Vector2?(this.x*=a.x,this.y*=a.y):(this.x*=a,this.y*=a)};b.multiply=function(a,b){var c=new Atlantis.Vector2(a);c.multiply(b);return c};b.prototype.distance=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};b.distance=function(a,e){return(new b(a)).distance(e)};
b.prototype.distance=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};b.dot=function(a,b){return a.x*b.x+a.y*b.y};b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.lerp=function(a,b,c){return new Atlantis.Vector2(Atlantis.MathHelper.lerp(a.x,b.x,amount),Atlantis.MathHelper.lerp(b.y,b.y,amount))};b.min=function(a,b){var c=new Atlantis.Vector2;c.x=a.x<b.x?a.x:b.x;c.y=a.y<b.y?a.y:b.y;return c};b.max=function(a,b){var c=new Vector2;c.x=a.x>b.x?a.x:b.x;
c.y=a.y>b.y?a.y:b.y;return c};b.prototype.negate=function(a){a instanceof Atlantis.Vector2?(this.x=-a.x,this.y=-a.y):(this.x=-a,this.y=-a)};b.negate=function(a){a=new Atlantis.Vector2(a);a.x*=-1;a.y*=-1;return a};b.prototype.normalize=function(){var a=Atlantis.Vector3.distance(this,new Vector3);0!=a&&(a=1/a,this.set(this.x*a,this.y*a,this.z*a))};b.normalize=function(a){a=new b(a);a.normalize();return a};b.transform=function(a,b){return new Atlantis.Vector3(a.x*b.M11+a.y*b.M21+a.z*b.M31+b.M41,a.x*
b.M12+a.y*b.M22+a.z*b.M32+b.M42,a.x*b.M13+a.y*b.M23+a.z*b.M33+b.M43)};b.transformCoordinate=function(a,b){var c=new Atlantis.Vector4;c.x=a.x*b.M11+a.y*b.M21+a.z*b.M31+b.M41;c.y=a.x*b.M12+a.y*b.M22+a.z*b.M32+b.M42;c.z=a.x*b.M13+a.y*b.M23+a.z*b.M33+b.M43;c.w=1/(a.x*b.M14+a.y*b.M24+a.z*b.M34+b.M44);return new Vector3(c.x*c.w,c.y*c.w,c.z*c.w)};b.prototype.set=function(a,b){this.x=a;this.y=b};b.prototype.toString=function(){return["x: ",this.x," y: ",this.y].join("")};return b}();Atlantis=window.Atlantis||{};Atlantis.Input=Atlantis.Input||{};Atlantis.Keys={up:38,down:40,left:37,right:39,space:32,escape:27};Atlantis.Input.KeyboardState=function(){}();
Atlantis.Input.KeyboardManager=function(){var b=null,a=function(a){this.keys=[];this.maxKeys=a||110;for(var c=0;c<a;c++)this.keys[c]=!1;this.preventDefault=!0;b=this};a.prototype.initialize=function(){document.addEventListener("keydown",this.onKeyStateChange,!1);document.addEventListener("keyup",this.onKeyStateChange,!1)};a.prototype.getState=function(){return new Atlantis.KeyboardState(this.keys)};a.prototype.onKeyStateChange=function(a){b.preventDefault&&a.preventDefault();b.keys[a.keyCode]="keydown"==
a.type?!0:!1};return a}();Atlantis=window.Atlantis||{};Atlantis.Input=Atlantis.Input||{};
Atlantis.Input.PointerManager=function(){var b,a=function(a){this.y=this.x=0;this.lastState={x:0,y:0};this.delta={x:0,y:0};this.click=!1;this.release=!0;this.drag=!1;this.hasTouch=!!("ontouchstart"in window)||!!("onmsgesturechange"in window);this.touch=!1;this.domElement=a;this.initialized=!1;this.startEventListeners();b=this};a.prototype.startEventListeners=function(){this.initialized||(this.domElement.addEventListener("mousedown",this.updateHandler,!1),this.domElement.addEventListener("mousemove",
this.updateHandler,!1),this.domElement.addEventListener("mouseup",this.updateHandler,!1),this.domElement.addEventListener("click",this.updateHandler,!1),this.domElement.addEventListener("touchstart",this.updateHandler,!1),this.domElement.addEventListener("touchmove",this.updateHandler,!1),this.domElement.addEventListener("touchend",this.updateHandler,!1),this.domElement.addEventListener("touchcancel",this.updateHandler,!1),this.initialized=!0)};a.prototype.stopEventListeners=function(){this.initialized&&
(this.domElement.removeEventListener("mousedown",this.updateHandler),this.domElement.removeEventListener("mousemove",this.updateHandler),this.domElement.removeEventListener("mouseup",this.updateHandler),this.domElement.removeEventListener("click",this.updateHandler),this.domElement.removeEventListener("touchstart",this.updateHandler),this.domElement.removeEventListener("touchmove",this.updateHandler),this.domElement.removeEventListener("touchend",this.updateHandler),this.domElement.removeEventListener("touchcancel",
this.updateHandler),this.initialized=!1)};a.prototype.updatePosition=function(a){var c=a;"undefined"!==typeof a.touches&&0<a.touches.length&&(c=a.touches[0]);a=c;b.lastState.x=b.x;b.lastState.y=b.y;b.x=a.pageX;b.y=a.pageY};a.prototype.updateClickStates=function(a){a=a||{};"mousedown"==a.type||"touchstart"==a.type?(b.click=!0,b.release=!1,b.touch=b.hasTouch?!0:!1):"mousemove"==a.type||"touchmove"==a.type?b.drag=b.click?!0:!1:(b.click=!1,b.release=!0,b.drag=!1,b.touch=!1)};a.prototype.updateHandler=
function(a){a.preventDefault();b.updatePosition(a);b.updateClickStates(a);b.updateDelta()};a.prototype.updateDelta=function(){b.delta.x=b.x==b.lastState.x?0:b.x-b.lastState.x;b.delta.y=b.y==b.lastState.y?0:b.y-b.lastState.y;100<b.delta.x&&(b.delta.x=0);b.delta.x=50<b.delta.x?0:b.delta.x;b.delta.y=50<b.delta.y?0:b.delta.y};return a}();
