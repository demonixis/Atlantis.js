var Atlantis=window.Atlantis||{};
Atlantis.ContentManager=function(){var b=function(a){this.rootDirectory=a||"";this.assets=[]};b.prototype.load=function(a){if("undefined"==typeof this.assets[a]){var d=a.split("."),c=d[d.length-1];switch(c){case "png":case "jpg":case "bmp":var d=this.assets,b=new Image;b.src=a;d[a]=b;break;case "mp3":case "ogg":case "wav":d=this.assets;b=document.createElement("audio");b.src=a;b.controls=!1;d[a]=b;break;case "mp4":case "ogv":d=this.assets,b=document.createElement("video"),b.src=a,d[a]=b;case "xml":case "json":case "js":var g=
this.assets;"undefined"!=typeof Atlantis.ajax?Atlantis.ajax({method:"GET",url:a,success:function(d){var b=d;"json"==c&&(b=JSON.parse(d));g[a]=b}}):console.error("[Content] Impossible to load the resource becanse the Atlantis.Helper class isn't loaded")}}return this.assets[a]};b.prototype.dispose=function(){this.assets.length=0};return b}();Atlantis=window.Atlantis||{};Atlantis.GameComponent=function(){var b=function(a){this.game=a};b.prototype.initialize=function(){};b.prototype.update=function(){};return b}();Atlantis.DrawableGameComponent=function(){var b=function(a){Atlantis.GameComponent.call(this,a)};b.prototype=new Atlantis.GameComponent;b.prototype.draw=function(){};return b}();
Atlantis.GameComponentCollection=function(){var b=function(){this.components=[]};b.add=function(a){-1==this.components.indexOf(a)&&this.components.push(a)};b.get=function(a){a=this.components.indexOf(a);return-1<a?this.components[a]:null};b.remove=function(a){a=this.components.indexOf(a);-1<a&&this.components.splice(a,1)};b.loadContent=function(a){for(var d=0,b=this.components.length;d<b;d++)this.components[d].loadContent(a)};b.update=function(a){for(var d=0,b=this.components.length;d<b;d++)this.components[d].update(a)};
b.draw=function(a,d){for(var b=0,e=this.components.length;b<e;b++)this.components[b]instanceof Atlantis.DrawableGameComponent&&this.components[b].draw(a,d)};return b}();Atlantis=window.Atlantis||{};Atlantis.Graphics=Atlantis.Graphics||{};(function(){Atlantis.Graphics.drawCircle=function(b,a,d,c,e){b.beginPath();b.arc(a,d,c,0,2*Math.PI,!0);b.fillStyle=e||"#ffffff";b.fill()};Atlantis.Graphics.drawRectPoint=function(b,a,d,c,e,g){b.fillStyle=g||"#ffffff";b.fillRect(a,d,c,e)};Atlantis.Graphics.drawText=function(b,a,d,c,e){e=e||{};var g=e.style||"normal",f=e.size||12,h=e.font||"sans-serif";b.fillStyle=e.color||"#ffffff";b.font=g+" "+f+"px "+h;b.fillText(a,d,c)}})();Atlantis=window.Atlantis||{};
(function(){var b=[];Atlantis.ajax=function(a){var b=a.params||{},c=a.url,e=a.method||"GET",g=a.success||null;a="undefined"!=typeof a.async?a.async:!0;var f;f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");"POST"==e?(f.open("POST",c,a),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.setRequestHeader("Content-length",b.length),f.setRequestHeader("Connection","close"),f.onreadystatechange=function(){4==f.readyState&&200==f.status&&null!=g&&g(f.responseText)},
f.send(b)):(f.open("GET",""!=b?c+"?"+b:c,a),f.onreadystatechange=function(){4==f.readyState&&null!=g&&g(f.responseText)},f.send(null))};Atlantis.notify=function(a,d){if("undefined"!=typeof b[a]){var c=b[a];if(d instanceof Object)for(var e in d)c[e]=d[e];document.dispatchEvent(c)}else return b[a]=document.createEvent("HTMLEvents"),b[a].initEvent(a,!0,!1),Atlantis.notify(a,d)};Atlantis.getImageSize=function(a){a.style.position="absolute";a.style.left="-9999px";document.body.appendChild(a);document.body.removeChild(a);
a.style.position="";a.style.left=""}})();Atlantis=Atlantis||{};Atlantis.Point=function(){return function(b,a){this.x=b||0;this.y=a||0}}();
Atlantis.Rectangle=function(){var b=function(a,b,c,e){this.x=a||0;this.y=b||0;this.width=c||0;this.height=e||0};b.prototype.getTop=function(){return this.y};b.prototype.getBottom=function(){return this.y+this.height};b.prototype.getLeft=function(){return this.x};b.prototype.getRight=function(){return this.x+this.width};b.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/2,this.y+this.height/2)};b.prototype.contains=function(a){return a instanceof Atlantis.Point?this.x<=a.x&&
a.x<this.getRight()&&this.y<=a.y&&a.y<this.getBottom():a instanceof Atlantis.Rectangle?this.x<=a.x&&a.getRight()<=this.getRight()&&this.y<=a.y&&a.getBottom()<=this.getBottom():!1};b.prototype.intersects=function(a){return a.getLeft()<this.getRight()&&this.getLeft()<a.getRight()&&a.getTop()<this.getBottom()&&this.getTop()<a.getBottom()};return b}();Atlantis=window.Atlantis||{};
Atlantis.Vector2=function(){var b=function(a,b){this.x=a||0;this.y=b||0};b.prototype.add=function(a){a instanceof Atlantis.Vector2?(this.x+=a.x,this.y+=a.y):(this.x+=a,this.y+=a)};b.prototype.subtract=function(a){a instanceof Atlantis.Vector2?(this.x-=a.x,this.y-=a.y):(this.x-=a,this.y-=a)};b.prototype.divide=function(a){a instanceof Atlantis.Vector2?(this.x/=a.x,this.y/=a.y):(this.x/=a,this.y/=a)};b.prototype.multiply=function(a){a instanceof Atlantis.Vector2?(this.x*=a.x,this.y*=a.y):(this.x*=a,
this.y*=a)};b.prototype.negate=function(a){a instanceof Atlantis.Vector2?(this.x=-a.x,this.y=-a.y):(this.x=-a,this.y=-a)};b.prototype.normalize=function(){var a=1/(Math.sqrt(this.x*this.x)+this.y*this.y);this.x*=a;this.y*=a};b.prototype.getDistance=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};return b}();Atlantis=window.Atlantis||{};
Atlantis.KeyboardState=function(){Atlantis.Keys={up:38,down:40,left:37,right:39,space:32,escape:27};var b=function(){this.keys=[];for(var a=0;110>a;a++)this.keys[a]=!1};b.prototype.initialize=function(){for(var a=this.keys,b=0;110>b;b++)a[b]=!1;var c=this;document.addEventListener("keydown",function(a){c.onKeyStateChange(a,c)},!1);document.addEventListener("keyup",function(a){c.onKeyStateChange(a,c)},!1)};b.prototype.onKeyStateChange=function(a,b){b.keys[a.keyCode]="keydown"==a.type?!0:!1};return b}();Atlantis=window.Atlantis||{};
Atlantis.MouseState=function(){function b(a,b){var e;e="undefined"!=typeof a.touches&&0<a.touches.length?a.touches[0]:a;b.last.x=this.x;b.last.y=this.y;b.x=e.pageX;b.y=e.pageY}var a=function(){this.y=this.x=0;this.last={x:0,y:0};this.delta={x:0,y:0};this.click=!1;this.release=!0;this.drag=!1;this.domElement=document;this.initialized=!1};a.prototype.initialize=function(){if(!this.initialized){var a=this;this.domElement.addEventListener("mousedown",function(b){a.update(b,a)},!1);this.domElement.addEventListener("mousemove",
function(b){a.update(b,a)},!1);this.domElement.addEventListener("mouseup",function(b){a.update(b,a)},!1);this.domElement.addEventListener("click",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchstart",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchmove",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchend",function(b){a.update(b,a)},!1);this.domElement.addEventListener("touchcancer",function(b){a.update(b,a)},!1);this.initialized=!0}};
a.prototype.update=function(a,c){a.preventDefault();b(a,c);"mousedown"==a.type||"touchstart"==a.type?(c.click=!0,c.release=!1):"mousemove"==a.type||"touchmove"==a.type?c.drag=c.click?!0:!1:"mouseup"==a.type||"touchend"==a.type?(c.click=!1,c.release=!0,c.drag=!1):"click"==a.type&&(c.click=!1,c.release=!0,c.drag=!1);c.delta.x=c.x-c.last.x;c.delta.y=c.y-c.last.y};return a}();
