<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>AtlantisEngine.js - Samples</title>
        <style>
            html, body { margin: 0; padding: 0; border: 0; text-align: center; }
        </style>
        <link rel="icon" href="../web/favicon.png" />
    </head>
    <body>
        <div class="container"></div>
        <!-- Framework -->
        <script src="../../Framework/Compatibility.js"></script>
        <script src="../../Framework/Common.js"></script>
        <script src="../../Framework/ContentManager.js"></script>
        <script src="../../Framework/GameComponent.js"></script>
        <script src="../../Framework/GameTime.js"></script>
        <script src="../../Framework/MathHelper.js"></script>
        <script src="../../Framework/Rectangle.js"></script>
        <script src="../../Framework/Matrix.js"></script>
        <script src="../../Framework/Quaternion.js"></script>
        <script src="../../Framework/Vector2.js"></script>
        <script src="../../Framework/Vector3.js"></script>
        <script src="../../Framework/Vector4.js"></script>
        <script src="../../Framework/Input/Keyboard.js"></script>
        <script src="../../Framework/Input/Mouse.js"></script>
        <script src="../../Framework/Input/TouchPanel.js"></script>
        <script src="../../Framework/Input/Gamepad.js"></script>
        <script src="../../Framework/Input/Keys.js"></script>
        <script src="../../Framework/Graphics/GraphicsDevice.js"></script>
        <script src="../../Framework/Graphics/SpriteBatch.js"></script>
        <script src="../../Framework/Graphics/RenderTarget.js"></script>
        <script src="../../Framework/Graphics/SpriteBatch.js"></script>
        <script src="../../Framework/Graphics/SpriteFont.js"></script>
        <script src="../../Framework/Preloader.js"></script>
        <script src="../../Framework/Game.js"></script>
        <!-- Engine -->
        <script src="../../Engine/Random.js"></script>
        <script src="../../Engine/AudioManager.js"></script>
        <script src="../../Engine/StorageManager.js"></script>
        <script src="../../Engine/LevelManager.js"></script>
        <script src="../../Engine/Graphics/Animation.js"></script>
        <script src="../../Engine/Graphics/Camera2D.js"></script>
        <script src="../../Engine/Graphics/Sprite.js"></script>
        <script src="../../Engine/Graphics/SpriteGroup.js"></script>
        <script src="../../Engine/Graphics/Tilemap.js"></script>
        <script src="../../Engine/Graphics/TmxLoader.js"></script>
        <script src="../../Engine/Input/KeyboardComponent.js"></script>
        <script src="../../Engine/Level.js"></script>
        <script src="../../Engine/GameApplication.js"></script>

    </body>
    <script>
        var Level1 = function() {
            Atlantis.Level.call(this, "level1");
        }
        Level1.prototype = Object.create(Atlantis.Level.prototype);

        Level1.prototype.initialize = function () {
            this.font = new Atlantis.SpriteFont("Arial", 18);
        };

        Level1.prototype.update = function (gt) {
           // Atlantis.Level.prototype.update(this, gt);

            if (Atlantis.input.keys.justPressed(Atlantis.Keys.Enter)) {
                Atlantis.app.levelManager.loadLevel("level2");
            }
        }

        Level1.prototype.draw = function (sb) {
            this.spriteBatch.drawString(this.font, "Level 1", { x: 50, y: 50 }, "#000");
        };

        var Level2 = function() {
            Atlantis.Level.call(this, "level2");
        }
        Level2.prototype = Object.create(Atlantis.Level.prototype);

        Level2.prototype.initialize = function () {
            this.font = new Atlantis.SpriteFont("Arial", 18);
        };

        Level2.prototype.update = function (gt) {
            Atlantis.Level.prototype.update(this, gt);

            if (Atlantis.input.keys.justPressed(Atlantis.Keys.Enter)) {
                Atlantis.app.levelManager.loadLevel("level1");
            }
        }

        Level2.prototype.draw = function (sb) {
            this.spriteBatch.drawString(this.font, "Level 2", { x: 50, y: 50 }, "#000");
        };

        // The Game class
        var TestGame = function () {
            Atlantis.GameApplication.call(this, 400, 400);
            this.content.rootDirectory = "Content/";
            
            var l1 = new Level1();
            var l2 = new Level2();

            this.levelManager.add(l1);
            this.levelManager.add(l2);
        };
        TestGame.prototype = Object.create(Atlantis.GameApplication.prototype);

        TestGame.prototype.initialize = function () {
            Atlantis.GameApplication.prototype.initialize.call(this);
            this.levelManager.loadLevel(0);
        };

        // Start the game !
        var game = new TestGame();
        game.run();
    </script>
</html>
