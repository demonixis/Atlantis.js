{"version":3,"sources":["atlantis.min.js"],"names":["Atlantis","window","events","ContentPreloading","ResolutionChanged","ajax","t","e","i","url","n","success","s","XMLHttpRequest","method","open","onreadystatechange","readyState","status","responseText","send","data","a","join","notify","document","createEvent","initEvent","Object","dispatchEvent","isMobileDevice","navigator","userAgent","match","_createProperty","defineProperty","get","set","enumerable","configurable","ContentManager","this","rootDirectory","_assets","preloader","PreloadTimerInterval","prototype","preload","length","load","o","r","progress","h","setInterval","clearInterval","split","loadImage","loadAudio","loadVideo","loadResource","Image","onload","style","position","left","body","appendChild","removeChild","src","createElement","controls","JSON","parse","dispose","GameComponent","game","enabled","initialized","initialize","update","isEnabled","isInitialized","setEnabled","DrawableGameComponent","call","visible","assetLoaded","loadContent","unloadContent","draw","isVisible","setVisible","GameComponentCollection","components","drawables","add","indexOf","push","remove","splice","gameComponent","GameTime","reset","elapsedTime","totalGameTime","currentTime","Date","fps","getElapsedTime","getTotalGameTime","getFPS","MathHelper","Pi","Math","PI","PiOver2","PiOver4","TwoPi","clamp","distance","abs","hermite","lerp","smoothStep","toDegrees","toRadians","isPowerOfTwo","Rectangle","x","y","width","height","divide","fromRectangle","multiply","subtract","contains","getRight","getBottom","intersects","getLeft","getTop","toString","toVector2","Vector2","toPoint","Point","getCenter","getWidth","getHeight","getTopCenter","getBottomCenter","getLeftCenter","getRightCenter","setPosition","setSize","Matrix","toArray","Array","M11","M12","M13","M14","M21","M22","M23","M24","M31","M32","M33","M34","M41","M42","M43","M44","getIdentityValues","getZeroValues","setIdentity","getMatrixIdentity","setLeft","z","Vector3","setRight","setUp","getUp","setDown","getDown","setBackward","getBackward","setForward","getForward","setTranslation","createRotationX","cos","sin","createRotationY","createRotationZ","createScale","createTranslation","Atantis","createLookAt","normalize","cross","dot","createOrthographic","createOrthographicOffCenter","createPerspectiveFieldOfView","tan","createPerspectiveOffCenter","createPerspetiveFieldOfViewRH","createPerspectiveOffCenterRH","invert","c","l","u","p","f","d","M","A","m","g","w","v","_","b","V","S","T","B","createWorld","Quaternion","Identity","conjugate","createFromYawPitchRoll","fromPoint","point","fromVector","Zero","One","UnitX","UnitY","addToRef","subtractToRef","divideToRef","multiplyToRef","sqrt","lerpToRef","min","minToRef","max","maxToRef","negate","normalizeToRef","reflect","ReflectToRef","reflectToRef","smoothStepToRef","transform","transformToRef","transformNormal","transformNormalToRef","UnitZ","Up","Down","Right","Left","Forward","Backward","distanceSquared","amount","transformCoordinate","Vector4","KeyboardState","keys","clone","Input","isKeyDown","isKeyUp","Keyboard","maxKeys","preventDefault","keyCode","type","addEventListener","getState","ButtonState","Released","Pressed","MouseState","scrollWheelValue","leftButton","rightButton","middleButton","Mouse","HTMLElement","_x","_y","_scroll","_buttons","pageX","offsetLeft","Game","scaleFactor","pageY","offsetTop","button","wheelDelta","detail","TouchLocationState","Invalid","Moved","TouchCollection","TouchPanelState","create","state","TouchPanel","_states","up","down","cancel","move","callback","touches","clientX","clientY","maxTouchPoints","msMaxTouchPoints","PointerEvent","MSPointerEvent","getCapabilities","hasTouch","GamepadButton","X","Y","LeftShoulder","RightShoulder","LeftTrigger","RightTrigger","Select","Start","L3","R3","DPadUp","DPadDown","DPadLeft","DPadRight","GamepadAxis","Horizontal","Vertical","HorizontalRight","VerticalRight","GamepadState","axis","buttons","isButtonDown","isButtonUp","getAxis","Gamepad","_gamepads","getGamepads","webkitGetGamepads","msGetGamepads","webkitGamepads","_gamepadsSupported","_addGamepad","gamepad","_removeGamepad","index","_updateGamepads","pressed","value","axes","Keys","BackSpace","Tab","Enter","Shift","Control","Alt","Pause","Escape","Space","Home","End","Suppr","PageUp","PageDown","Insert","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","C","D","E","F","G","H","I","J","K","L","N","O","P","Q","R","U","W","Z","Super","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ScaleMode","ScaleToFit","ConserveAspectRatio","NoScaleCenter","GraphicsDevice","webGL","preferredBackBufferWidth","backBufferWidth","preferredBackBufferHeight","backBufferHeight","disableSmoothing","forceDisableSmoothing","viewport","scaleMode","_backBufferCache","_frontBuffer","RenderTarget","canvas","_fbContext","getContext","_backBuffer","_bbCanvas","getCanvas","msTouchAction","backgroundColor","id","applyChanges","getBackBuffer","getFrontBuffer","clear","imageSmoothingEnabled","present","_resizePixelCanvas","drawImage","getImageData","floor","putImageData","toggleFullscreen","isFullscreen","requestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","SpriteSortMode","BackToFront","FrontToBack","Immediate","SpriteEffect","None","FlipHorizontaly","FlipVerticaly","BatchItemType","Texture","Font","SpriteBatch","_graphicsDevice","_viewport","_canvas","_context","_batchItems","_batchStarted","_spriteSortMode","_transformMatrix","_cacheColoredTextures","_batchRect","_onResize","bind","begin","save","_drawBatchItem","texture2D","sourceRectangle","destinationRectangle","color","rotation","origin","scale","effect","layerDepth","drawString","end","sort","_sortBatchItem","restore","drawTexture","fillStyle","font","getFont","strokeStyle","lineWidth","wrapText","strokeText","_wrapText","size","fillText","translate","rotate","_colorizeTexture","_searchColoredTexture","_hexaToBytes","texture","parseInt","slice","measureText","_data","_needUpdate","isWebGLCanvas","fromImage","setData","getData","getPixelData","_is3DCanvas","clearColor","enable","DEPTH_TEST","depthFunc","LEQUAL","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","clearRect","saveAsPng","toDataURL","saveAsJpg","SpriteFont","fontName","Preloader","screenWidth","graphicsDevice","screenHeight","screenWidthPerTwo","screenHeightPerTwo","spriteFont","onProgress","round","gameTime","afterDraw","_paused","requestAnimationFrame","target","innerWidth","innerHeight","settings","domElement","replace","getElementsByClassName","getElementById","HTMLCanvasElement","version","content","keyboard","mouse","touchPanel","frontBuffer","context","_internalIntialize","resizeEnabled","autoClear","run","focus","pause","cancelAnimationFrame","resume","Random","random","randomFloat","randomInt","vector2","vector3","vector4","randomArrayItem","array","undefined","MusicState","Playing","Stopped","Paused","AudioManager","repeatMusic","currentMusic","volume","currentState","STOPPED","playOneShot","audioClip","play","music","repeat","stopMusic","stop","StorageManager","container","name","stringify","localStorage","setItem","getLocalStorageKey","defaultValue","getItem","LevelManager","levels","activeLevel","_autoLoadLevel","loadLevel","nameOrIndex","reinitialize","reinit","onDisabled","getLevelByName","_checkIndex","active","onEnabled","level","autoLoad","getLoadedLevelIndex","getLoadedLevelName","SpriteAnimation","framerate","rectangles","next","SpriteAnimator","animations","spriteWidth","spriteHeight","textureWidth","textureHeight","nbSpriteX","nbSpriteY","spritesheetLength","currentAnimationName","animationWidth","animationHeight","framesIndex","frameRate","animationLength","animation","animationName","getCurrentAnimation","lastDistance","checkForIDLEAnimation","lastDirection","Camera2D","_follow","screen","_center","widthPerTwo","heightPerTwo","onResize","follow","sprite","getSpritePosition","getRelativePosition","rectangle","diffX","lastPosition","diffY","targX","targY","SpriteCollisionType","Stop","Sprite","_textureName","params","collisionType","_texture","_dead","_initialized","Counter","parent","direction","acceleration","velocity","maxVelocity","insideScreen","acrossScreen","spriteAnimator","hasAnimations","deleteIf","that","revive","kill","app","image","copy","collides","prepareAnimation","addAnimation","indices","twoIndices","ids","preUpdate","postUpdate","spriteBatch","getBoundingRect","SpriteText","text","oldFont","measureTextHeight","maxWidth","lineHeight","words","line","testLine","metrics","testWidth","SpriteGroup","_sprites","_length","_needBoundingCompute","diff","alive","collidesWithGroup","computeBoundingRect","countLiving","livings","countDead","deads","forEach","getFirstDead","getFirstAlive","getFirstNull","nullIndex","removeAt","result","oldSprite","newSprite","sprites","TilemapLayerType","Tiles","Background","Objects","TilemapProjection","Orthogonal","Isometric","Tileset","tileset","firstGID","firstgid","imagewidth","imageheight","margin","padding","spacing","tileWidth","tilewidth","tileHeight","tileheight","properties","TilemapLayer","layer","opacity","offset","backgroundId","tilesetId","Tilemap","tilemap","projection","orientation","layers","tilesets","backgrounds","mapWidth","mapHeight","loaded","_cacheTilesCanvas","camera","drawBackground","drawLayer","background","nbTileX","posX","posY","startX","startY","stopX","stopY","srcX","srcY","destX","destY","isoX","isoY","tileId","isoToScreen","screenToIso","getTileIdAt","layerIndex","getTileRectAt","rect","getTileAt","cacheId","TmxLoader","mapPath","map","KeyboardComponent","keyComponent","keysState","previousKeysState","key","released","justPressed","justReleased","right","enter","space","escape","control","shift","tab","TouchComponent","touchComponent","sensibility","deadZone","maxDelta","maxFingerPoints","delta","_touchCollection","_position","_lastPosition","_lastTouchCollection","count","_updateTouchState","_resetTrouchState","moved","Level","scene","input","GameApplication","audioManager","storageManager","levelManager","storage","touch","getCanvasWidth","getCanvasHeight","event","keyboardComponent","setScreenSize"],"mappings":"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","file":"atlantis.min.js","sourcesContent":["var Atlantis=window.Atlantis||{};Atlantis.events={ContentPreloading:\"atlantis.preloading\",ResolutionChanged:\"atlantis.graphics.resize\"},Atlantis.ajax=function(t){var e=t||{},i=t.url,n=t.success||function(){},s=new XMLHttpRequest;if(\"POST\"===e.method)s.open(\"POST\",i),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&n(s.responseText)},s.send(e.data);else{var a=e.data?[i,\"?\",e.data].join(\"\"):i;s.open(\"GET\",a),s.onreadystatechange=function(){4==s.readyState&&n(s.responseText)},s.send(null)}},Atlantis.notify=function(t,e){var i=document.createEvent(\"HTMLEvents\");if(i.initEvent(t,!0,!1),e instanceof Object)for(var n in e)i[n]=e[n];document.dispatchEvent(i)},Atlantis.isMobileDevice=function(){return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)},Atlantis._createProperty=function(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})};var Atlantis=window.Atlantis||{};Atlantis.ContentManager=function(t){this.rootDirectory=t||\"\",this._assets={},this.preloader=[]},Atlantis.ContentManager.PreloadTimerInterval=250,Atlantis.ContentManager.prototype.preload=function(t,e){for(var i=this.preloader.length,n=0,t=\"function\"==typeof t?t:function(){},e=\"function\"==typeof e?e:function(){},s=function(t){n++},a=0;i>a;a++)this.load(this.preloader[a],s);var o=this,r={status:\"Loading\",progress:0},h=setInterval(function(){r.progress=100*n/i,n===i&&(clearInterval(h),r.status=\"Complete\",o.preloader.length=0,e()),Atlantis.notify(Atlantis.events.ContentPreloading,r),t(r)},Atlantis.ContentManager.PreloadTimerInterval)},Atlantis.ContentManager.prototype.load=function(t,e){var e=\"function\"==typeof e?e:function(){},i=t.split(\".\"),n=i[i.length-1];if(t=this.rootDirectory+t,this._assets[t])return e(this._assets[t]),this._assets[t];switch(n){case\"png\":case\"jpg\":case\"bmp\":this.loadImage(t,e);break;case\"mp3\":case\"ogg\":case\"wav\":this.loadAudio(t,e);break;case\"mp4\":case\"ogv\":this.loadVideo(t,e);case\"xml\":case\"json\":case\"js\":this.loadResource(t,n,e)}return this._assets[t]},Atlantis.ContentManager.prototype.loadImage=function(t,e){var i=new Image;return i.onload=function(){this.style.position=\"absolute\",this.style.left=\"-9999px\",document.body.appendChild(i),document.body.removeChild(i),this.style.position=\"\",this.style.left=\"\",e(this)},i.src=t,this._assets[t]=i,i},Atlantis.ContentManager.prototype.loadAudio=function(t,e){var i=document.createElement(\"audio\");return i.src=t,i.load(),i.controls=!1,this._assets[t]=i,e(i),i},Atlantis.ContentManager.prototype.loadVideo=function(t,e){var i=document.createElement(\"video\");return i.onload=e,i.src=t,this._assets[t]=i,i},Atlantis.ContentManager.prototype.loadResource=function(t,e,i){var n=this;Atlantis.ajax({method:\"GET\",url:t,success:function(s){var a=s;\"json\"==e&&(a=JSON.parse(s)),n._assets[t]=a,i(a)}})},Atlantis.ContentManager.prototype.dispose=function(){this._assets.length=0};var Atlantis=window.Atlantis||{};Atlantis.GameComponent=function(t){this.game=t,this.enabled=!0,this.initialized=!1},Atlantis.GameComponent.prototype.initialize=function(){this.initialized=!0},Atlantis.GameComponent.prototype.update=function(t){},Atlantis.GameComponent.prototype.isEnabled=function(){return this.enabled},Atlantis.GameComponent.prototype.isInitialized=function(){return this.initialized},Atlantis.GameComponent.prototype.setEnabled=function(t){this.enabled=t},Atlantis.DrawableGameComponent=function(t){Atlantis.GameComponent.call(this,t),this.visible=!0,this.assetLoaded=!1},Atlantis.DrawableGameComponent.prototype=new Atlantis.GameComponent,Atlantis.DrawableGameComponent.prototype.loadContent=function(){this.assetLoaded=!0},Atlantis.DrawableGameComponent.prototype.unloadContent=function(){this.assetLoaded=!1},Atlantis.DrawableGameComponent.prototype.draw=function(t,e){},Atlantis.DrawableGameComponent.prototype.isVisible=function(){return this.isVisible},Atlantis.DrawableGameComponent.prototype.setVisible=function(t){this.isVisible=t},Atlantis.GameComponentCollection=function(){this.components=[],this.drawables=[],this.initialized=!1,this.assetLoaded=!1},Atlantis.GameComponentCollection.prototype.initialize=function(t){for(var e=0,i=this.components.length;i>e;e++)this.components[e].initialize();this.initialized=!0},Atlantis.GameComponentCollection.prototype.loadContent=function(){for(var t=0,e=this.drawables.length;e>t;t++)this.drawables[t].loadContent();this.assetLoaded=!0},Atlantis.GameComponentCollection.prototype.unloadContent=function(){for(var t=0,e=this.drawables.length;e>t;t++)this.drawables[t].unloadContent();this.assetLoaded=!1},Atlantis.GameComponentCollection.prototype.update=function(t){for(var e=0,i=this.components.length;i>e;e++)this.components[e].isEnabled()&&this.components[e].update(t)},Atlantis.GameComponentCollection.prototype.draw=function(t,e){for(var i=0,n=this.drawables.length;n>i;i++)this.drawables[i].isVisible()&&this.drawables[i].draw(t,e)},Atlantis.GameComponentCollection.prototype.add=function(t){-1==this.components.indexOf(t)&&(this.components.push(t),this.initialized&&t.initialize(),t instanceof Atlantis.DrawableGameComponent&&(this.drawables.push(t),this.assetLoaded&&t.loadContent()))},Atlantis.GameComponentCollection.prototype.remove=function(t){var e=this.components.indexOf(t);return e>-1?(this.components.splice(e,1),t instanceof Atlantis.DrawableGameComponent&&(e=this.drawables.indexOf(t),e>-1&&this.drawables.splice(e,1)),!0):!1},Atlantis.GameComponentCollection.prototype.get=function(t){var e=null,i=this.components.indexOf(gameComponent);return i>-1&&(e=this.components[t]),null};var Atlantis=window.Atlantis||{};Atlantis.GameTime=function(){this.reset()},Atlantis.GameTime.prototype.reset=function(){this.elapsedTime=0,this.totalGameTime=0,this.currentTime=+new Date,this.fps=0},Atlantis.GameTime.prototype.update=function(){var t=+new Date;this.elapsedTime=t-this.currentTime,this.totalGameTime+=this.elapsedTime,this.fps=1e3/(t-this.currentTime),this.currentTime=t},Atlantis.GameTime.prototype.getElapsedTime=function(){return this.elapsedTime},Atlantis.GameTime.prototype.getTotalGameTime=function(){return this.totalGameTime},Atlantis.GameTime.prototype.getFPS=function(){return this.fps};var Atlantis=window.Atlantis||{};Atlantis.MathHelper={Pi:Math.PI,PiOver2:Math.PI/2,PiOver4:Math.PI/4,TwoPi:2*Math.PI,clamp:function(t,e,i){return t=t>i?i:t,t=e>t?e:t},distance:function(t,e){return Math.abs(t-e)},hermite:function(t,e,i,n,s){var a=s*s*s,o=s*s;return 0===s?t:1===s?i:(2*t-2*i+n+e)*a+(3*i-3*t-2*e-n)*o+e*s+t},lerp:function(t,e,i){return i=0>i?0:i,i=i>1?1:i,t+(e-t)*i},smoothStep:function(t,e,i){var n=this.clamp(i,0,1);return n=this.hermite(t,0,e,0,n)},toDegrees:function(t){return t*(180/Math.PI)},toRadians:function(t){return t*(Math.PI/180)},isPowerOfTwo:function(t){return t>0&&0==(t&t-1)}};var Atlantis=Atlantis||{};Atlantis.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},Atlantis.Rectangle.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.width+=t.width,this.height+=t.height},Atlantis.Rectangle.prototype.divide=function(t){this.x/=t.x,this.y/=t.y,this.width/=t.width,this.height/=t.height},Atlantis.Rectangle.prototype.fromRectangle=function(t){this.x=t.x?+t.x:0,this.y=t.y?+t.y:0,this.width=t.width?+t.width:0,this.height=t.height?+t.height:0},Atlantis.Rectangle.prototype.multiply=function(t){this.x*=t.x,this.y*=t.y,this.width*=t.width,this.height*=t.height},Atlantis.Rectangle.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y,this.width-=t.width,this.height-=t.height},Atlantis.Rectangle.prototype.contains=function(t,e){return t instanceof Atlantis.Rectangle?this.x<=t.x&&t.getRight()<=this.getRight()&&this.y<=t.y&&t.getBottom()<=this.getBottom():this.x<=t&&t<this.getRight()&&this.y<=e&&e<this.getBottom()},Atlantis.Rectangle.prototype.intersects=function(t){return t.getLeft()<this.getRight()&&this.getLeft()<t.getRight()&&t.getTop()<this.getBottom()&&this.getTop()<t.getBottom()},Atlantis.Rectangle.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" width: \",this.width,\" height: \",this.height].toString()},Atlantis.Rectangle.prototype.toVector2=function(){return new Atlantis.Vector2(this.x,this.y)},Atlantis.Rectangle.prototype.toPoint=function(){return new Atlantis.Point(this.x,this.y)},Atlantis.Rectangle.prototype.getTop=function(){return this.y},Atlantis.Rectangle.prototype.getBottom=function(){return this.y+this.height},Atlantis.Rectangle.prototype.getLeft=function(){return this.x},Atlantis.Rectangle.prototype.getRight=function(){return this.x+this.width},Atlantis.Rectangle.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/2,this.y+this.height/2)},Atlantis.Rectangle.prototype.getWidth=function(){return this.width},Atlantis.Rectangle.prototype.getHeight=function(){return this.height},Atlantis.Rectangle.prototype.getTopCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y)},Atlantis.Rectangle.prototype.getBottomCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y+this.height)},Atlantis.Rectangle.prototype.getLeftCenter=function(){return new Atlantis.Vector2(this.x,this.y+this.height/2)},Atlantis.Rectangle.prototype.getRightCenter=function(){return new Atlantis.Vector2(this.x+this.width,this.y+this.height/2)},Atlantis.Rectangle.prototype.set=function(t,e,i,n){t instanceof Atlantis.Rectangle?(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.x=t,this.y=e,this.width=i,this.height=n)},Atlantis.Rectangle.prototype.setPosition=function(t,e){this.x=t,this.y=e},Atlantis.Rectangle.prototype.setSize=function(t,e){this.width=t,this.height=e},Atlantis.Rectangle.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" width: \",this.width,\" height: \",this.height].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Matrix=function(t){if(t instanceof Atlantis.Matrix){var t=t.toArray();this.set(t)}else t instanceof Array&&16==t.length?this.set(t):(this.M11=0,this.M12=0,this.M13=0,this.M14=0,this.M21=0,this.M22=0,this.M23=0,this.M24=0,this.M31=0,this.M32=0,this.M33=0,this.M34=0,this.M41=0,this.M42=0,this.M43=0,this.M44=0)},Atlantis.Matrix.prototype.set=function(t){16==t.length&&(this.M11=t[0],this.M12=t[1],this.M13=t[2],this.M14=t[3],this.M21=t[4],this.M22=t[5],this.M23=t[6],this.M24=t[7],this.M31=t[8],this.M32=t[9],this.M33=t[10],this.M34=t[11],this.M41=t[12],this.M42=t[13],this.M43=t[14],this.M44=t[15])},Atlantis.Matrix.prototype.getIdentityValues=function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t},Atlantis.Matrix.prototype.getZeroValues=function(){for(var t=[],e=0;16>e;e++)t.push(0);return t},Atlantis.Matrix.prototype.setIdentity=function(){this.set(this.getIdentityValues())},Atlantis.Matrix.getMatrixIdentity=function(){var t=new Atlantis.Matrix;return t.setIdentity(),t},Atlantis.Matrix.prototype.toArray=function(){var t=[];return t.push(this.M11),t.push(this.M12),t.push(this.M13),t.push(this.M14),t.push(this.M21),t.push(this.M22),t.push(this.M23),t.push(this.M24),t.push(this.M31),t.push(this.M32),t.push(this.M33),t.push(this.M34),t.push(this.M41),t.push(this.M42),t.push(this.M43),t.push(this.M44),t},Atlantis.Matrix.prototype.setLeft=function(t){this.M11=-t.x,this.M12=-t.y,this.M13=-t.z},Atlantis.Matrix.prototype.getLeft=function(){var t=new Atlantis.Vector3;return t.x=-this.M11,t.y=-this.M12,t.z=-this.M13,t},Atlantis.Matrix.prototype.setRight=function(t){this.M11=t.x,this.M12=t.y,this.M13=t.z},Atlantis.Matrix.prototype.getRight=function(){var t=new Atlantis.Vector3;return t.x=this.M11,t.y=this.M12,t.z=this.M13,t},Atlantis.Matrix.prototype.setUp=function(t){this.M21=t.x,this.M22=t.y,this.M23=t.z},Atlantis.Matrix.prototype.getUp=function(){var t=new Atlantis.Vector3;return t.x=this.M21,t.y=this.M22,t.z=this.M23,t},Atlantis.Matrix.prototype.setDown=function(t){this.M21=-t.x,this.M22=-t.y,this.M23=-t.z},Atlantis.Matrix.prototype.getDown=function(){var t=new Atlantis.Vector3;return t.x=-this.M21,t.y=-this.M22,t.z=-this.M23,t},Atlantis.Matrix.prototype.setBackward=function(t){this.M31=t.x,this.M32=t.y,this.M33=t.z},Atlantis.Matrix.prototype.getBackward=function(){var t=new Atlantis.Vector3;return t.x=this.M31,t.y=this.M32,t.z=this.M33,t},Atlantis.Matrix.prototype.setForward=function(t){this.M31=-t.x,this.M32=-t.y,this.M33=-t.z},Atlantis.Matrix.prototype.getForward=function(){var t=new Atlantis.Vector3;return t.x=-this.M31,t.y=-this.M32,t.z=-this.M33,t},Atlantis.Matrix.prototype.setTranslation=function(t){this.M41=t.x,this.M42=t.y,this.M43=t.z},Atlantis.Matrix.prototype.add=function(t){for(var e=this.toArray(),i=t.toArray(),n=0;16>n;n++)e[n]+=i[n];this.set(e)},Atlantis.Matrix.add=function(t,e){var i=new Atlantis.Matrix(t);return i.add(e),i},Atlantis.Matrix.createRotationX=function(t){var e=getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M22=i,e.M23=n,e.M32=-n,e.M33=i,e},Atlantis.Matrix.createRotationY=function(t){var e=getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M11=i,e.M13=-n,e.M31=n,e.M33=i,e},Atlantis.Matrix.createRotationZ=function(t){var e=this.getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M11=i,e.M13=n,e.M31=-n,e.M33=i,e},Atlantis.Matrix.createScale=function(t,e,i){var n=Atlantis.Matrix.getMatrixIdentity();return n.M11=t,n.M22=e||t,n.M33=i||t,n},Atlantis.Matrix.createTranslation=function(t,e,i){var n=Atantis.Matrix.getMatrixIdentity();return n.M41=t,n.M42=e||t,n.M43=i||t,n},Atlantis.Matrix.createLookAt=function(t,e,i){var n=Atlantis.Vector3.subtract(e,t);n.normalize();var s=Atlantis.Vector3.cross(i,n);s.normalize();var a=Atlantis.Vector3.cross(n,s);a.normalize();var o=Atlantis.Matrix.getMatrixIdentity();return o.M11=s.x,o.M21=s.y,o.M31=s.z,o.M12=a.x,o.M22=a.y,o.M32=a.z,o.M13=n.x,o.M23=n.y,o.M33=n.z,o.M41=-Atlantis.Vector3.dot(s,t),o.M42=-Atlantis.Vector3.dot(a,t),o.M43=-Atlantis.Vector3.dot(n,t),o},Atlantis.Matrix.createOrthographic=function(t,e,i,n){var s=new Matrix;return s.M11=2/t,s.M12=s.M13=s.M14=0,s.M22=2/e,s.M21=s.M23=s.M24=0,s.M33=1/(i-n),s.M31=s.M32=s.M34=0,s.M41=s.M42=0,s.M43=i/(i-n),s.M44=1,s},Atlantis.Matrix.createOrthographicOffCenter=function(t,e,i,n,s,a){var o=new Atlantis.Matrix;return o.M11=2/(e-t),o.M12=0,o.M13=0,o.M14=0,o.M21=0,o.M22=2/(n-i),o.M23=0,o.M24=0,o.M31=0,o.M32=0,o.M33=1/(s-a),o.M34=0,o.M41=(t+e)/(t-e),o.M42=(n+i)/(i-n),o.M43=s/(s-a),o.M44=1,o},Atlantis.Matrix.createPerspectiveFieldOfView=function(t,e,i,n){var s=1/Math.tan(.5*t),a=s/e,o=i/a,r=i/s;return Atlantis.Matrix.createPerspectiveOffCenter(-o,o,-r,r,i,n)},Atlantis.Matrix.createPerspetiveFieldOfViewRH=function(t,e,i,n){var s=1/Math.tan(.5*t),a=s/e,o=i/a,r=i/s;return Matrix.createPerspectiveOffCenterRH(-o,o,-r,r,i,n)},Atlantis.Matrix.createPerspectiveOffCenter=function(t,e,i,n,s,a){var o=a/(a-s),r=new Atlantis.Matrix;return r.M11=2*s/(e-t),r.M22=2*s/(n-i),r.M31=(t+e)/(t-e),r.M32=(n+i)/(i-n),r.M33=o,r.M34=1,r.M43=-s*o,r},Atlantis.Matrix.createPerspectiveOffCenterRH=function(t,e,i,n,s,a){var o=createPerspectiveOffCenter(t,e,i,n,s,a);return o.M31*=-1,o.M32*=-1,o.M33*=-1,o.M34*=-1,o},Atlantis.Matrix.prototype.invert=function(){var t=this.M31*this.M42-this.M32*this.M41,e=this.M31*this.M43-this.M33*this.M41,i=this.M34*this.M41-this.M31*this.M44,n=this.M32*this.M43-this.M33*this.M42,s=this.M34*this.M42-this.M32*this.M44,a=this.M33*this.M44-this.M34*this.M43,o=this.M22*a+this.M23*s+this.M24*n,r=this.M21*a+this.M23*i+this.M24*e,h=this.M21*-s+this.M22*i+this.M24*t,c=this.M21*n+this.M22*-e+this.M23*t,l=this.M11*o-this.M12*r+this.M13*h-this.M14*c;if(0==Math.abs(l))return void this.set(this.getZeroValues());l=1/l;var u=this.M11*this.M22-this.M12*this.M21,p=this.M11*this.M23-this.M13*this.M21,f=this.M14*this.M21-this.M11*this.M24,d=this.M12*this.M23-this.M13*this.M22,M=this.M14*this.M22-this.M12*this.M24,A=this.M13*this.M24-this.M14*this.M23,y=this.M12*a+this.M13*s+this.M14*n,m=this.M11*a+this.M13*i+this.M14*e,g=this.M11*-s+this.M12*i+this.M14*t,x=this.M11*n+this.M12*-e+this.M13*t,w=this.M42*A+this.M43*M+this.M44*d,v=this.M41*A+this.M43*f+this.M44*p,_=this.M41*-M+this.M42*f+this.M44*u,b=this.M41*d+this.M42*-p+this.M43*u,V=this.M32*A+this.M33*M+this.M34*d,S=this.M31*A+this.M33*f+this.M34*p,T=this.M31*-M+this.M32*f+this.M34*u,B=this.M31*d+this.M32*-p+this.M33*u;this.M11=+o*l,this.M12=-y*l,this.M13=+w*l,this.M14=-V*l,this.M21=-r*l,this.M22=+m*l,this.M23=-v*l,this.M24=+S*l,this.M31=+h*l,this.M32=-g*l,this.M33=+_*l,this.M34=-T*l,this.M41=-c*l,this.M42=+x*l,this.M43=-b*l,this.M44=+B*l},Atlantis.Matrix.invert=function(t){var e=new Matrix(t);return e.invert(),e},Atlantis.Matrix.createWorld=function(t,e,i){var n=new Atlantis.Matrix,s=Atlantis.Vector3.cross(e,i),a=Atlantis.Vector3.cross(s,e);Atlantis.Vector3.normalize(e);return s.normalize(),a.normalize(),n.setTranslation(t),n.M44=1,n},Atlantis.Matrix.prototype.multiply=function(t){var e=this.M11*t.M11+this.M12*t.M21+this.M13*t.M31+this.M14*t.M41,i=this.M11*t.M12+this.M12*t.M22+this.M13*t.M32+this.M14*t.M42,n=this.M11*t.M13+this.M12*t.M23+this.M13*t.M33+this.M14*t.M43,s=this.M11*t.M14+this.M12*t.M24+this.M13*t.M34+this.M14*t.M44,a=this.M21*t.M11+this.M22*t.M21+this.M23*t.M31+this.M24*t.M41,o=this.M21*t.M12+this.M22*t.M22+this.M23*t.M32+this.M24*t.M42,r=this.M21*t.M13+this.M22*t.M23+this.M23*t.M33+this.M24*t.M43,h=this.M21*t.M14+this.M22*t.M24+this.M23*t.M34+this.M24*t.M44,c=this.M31*t.M11+this.M32*t.M21+this.M33*t.M31+this.M34*t.M41,l=this.M31*t.M12+this.M32*t.M22+this.M33*t.M32+this.M34*t.M42,u=this.M31*t.M13+this.M32*t.M23+this.M33*t.M33+this.M34*t.M43,p=this.M31*t.M14+this.M32*t.M24+this.M33*t.M34+this.M34*t.M44,f=this.M41*t.M11+this.M42*t.M21+this.M43*t.M31+this.M44*t.M41,d=this.M41*t.M12+this.M42*t.M22+this.M43*t.M32+this.M44*t.M42,M=this.M41*t.M13+this.M42*t.M23+this.M43*t.M33+this.M44*t.M43,A=this.M41*t.M14+this.M42*t.M24+this.M43*t.M34+this.M44*t.M44;this.M11=e,this.M12=i,this.M13=n,this.M14=s,this.M21=a,this.M22=o,this.M23=r,this.M24=h,this.M31=c,this.M32=l,this.M33=u,this.M34=p,this.M41=f,this.M42=d,this.M43=M,this.M44=A},Atlantis.Matrix.multiply=function(t,e,i){var n=new Atlantis.Matrix(t);return n.multiply(e),i instanceof Atlantis.Matrix&&n.multiply(i),n},Atlantis.Matrix.prototype.subtract=function(t){for(var e=this.toArray(),i=t.toArray(),n=0;16>n;n++)e[n]-=i[n];this.set(e)},Atlantis.Matrix.subtract=function(t,e){var i=new Atlantis.Matrix(t);return i.subtract(e),i},Atlantis.Matrix.prototype.toString=function(){for(var t=this.toArray(),e=[],i=0;16>i;i+=4)e.push(\"[\"),e.push(t[i]+\" \"),e.push(t[i+1]+\" \"),e.push(t[i+2]+\" \"),e.push(t[i+3]),e.push(\"] \");return e.join(\"\")};var Atlantis=Atlantis||{};Atlantis.Quaternion=function(t,e,i,n){t instanceof Atlantis.Quaternion?(this.x=t.x,this.y=e.x,this.z=i.x,this.w=n.x):(this.x=t,this.y=e,this.z=i,this.w=n)},Atlantis.Quaternion.Identity=function(){return new Atlantis.Quaternion(0,0,0,1)},Atlantis.Quaternion.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w},Atlantis.Quaternion.add=function(t,e){var i=new Quaternion(t);return i.add(e),i},Atlantis.Quaternion.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},Atlantis.Quaternion.conjugate=function(t){var e=new Quaternion(t);return e.conjugate(),e},Atlantis.Quaternion.createFromYawPitchRoll=function(t,e,i){var n=new Quaternion,s=.5*t,a=.5*e,o=.5*i,r=Math.sin(s),h=Math.cos(s),c=Math.sin(a),l=Math.cos(a),u=Math.sin(o),p=Math.cos(o);return n.x=h*c*p+r*l*u,n.y=r*l*p-h*c*u,n.z=h*l*u-r*c*p,n.w=h*l*p-r*c*u,n},Atlantis.Quaternion.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z,\" w: \",this.w].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Point=function(t,e){this.x=t?+t:0,this.y=e?+e:0},Atlantis.Point.fromPoint=function(t,e){return new Atlantis.Point(point.x,point.y)},Atlantis.Point.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y].join(\"\")},Atlantis.Vector2=function(t,e){this.x=t?+t:0,this.y=e?+e:0},Atlantis.Vector2.fromVector=function(t){return new Atlantis.Vector2(t.x,t.y)},Atlantis.Vector2.Zero=function(){return new Vector2},Atlantis.Vector2.One=function(){return new Vector2(1,1)},Atlantis.Vector2.UnitX=function(){return new Vector2(1,0)},Atlantis.Vector2.UnitY=function(){return new Vector2(0,1)},Atlantis.Vector2.prototype.add=function(t){\"number\"==typeof t?(this.x+=t,this.y+=t):(this.x+=t.x,this.y+=t.y)},Atlantis.Vector2.add=function(t,e){var i=Atlantis.Vector2.fromVector(t);return i.add(e),i},Atlantis.Vector2.addToRef=function(t,e,i){i.x=t.x+e.x,i.y=t.y+e.y},Atlantis.Vector2.prototype.subtract=function(t){\"number\"==typeof t?(this.x-=t,this.y-=t):(this.x-=t.x,this.y-=t.y)},Atlantis.Vector2.subtract=function(t,e){var i=Atlantis.Vector2.fromVector(t);return i.subtract(e),i},Atlantis.Vector2.subtractToRef=function(t,e,i){i.x=t.x-e.x,i.y=t.y-e.y},Atlantis.Vector2.prototype.divide=function(t){\"number\"==typeof t?(this.x/=t,this.y/=t):(this.x/=t.x,this.y/=t.y)},Atlantis.Vector2.divide=function(t,e){var i=Atlantis.Vector2.fromVector(t);return i.divide(e),i},Atlantis.Vector2.divideToRef=function(t,e,i){i.x=t.x/e.x,i.y=t.y/e.y},Atlantis.Vector2.prototype.multiply=function(t){\"number\"==typeof t?(this.x*=t,this.y*=t):(this.x*=t.x,this.y*=t.y)},Atlantis.Vector2.multiply=function(t,e){var i=Atlantis.Vector2.fromVector(t);return i.multiply(e),i},Atlantis.Vector2.multiplyToRef=function(t,e,i){i.x=t.x*e.x,i.y=t.y*e.y},Atlantis.Vector2.prototype.distance=function(t){return Atlantis.Vector2.distance(this,t)},Atlantis.Vector2.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},Atlantis.Vector2.prototype.dot=function(t){return Atlantis.Vector2.dot(this,t)},Atlantis.Vector2.dot=function(t,e){return t.x*e.x+t.y*e.y},Atlantis.Vector2.prototype.length=function(){return Atlantis.Vector2.length(this)},Atlantis.Vector2.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Atlantis.Vector2.lerp=function(t,e,i){var n=Atlantis.Vector2.fromVector(t);return Atlantis.Vector2.lerpToRef(t,e,i,n),n},Atlantis.Vector2.lerpToRef=function(t,e,i,n){n.x=Atlantis.MathHelper.lerp(t.x,e.x,i),n.y=Atlantis.MathHelper.lerp(t.y,e.y,i)},Atlantis.Vector2.min=function(t,e){var i=new Atlantis.Vector2;return Atlantis.Vector2.minToRef(t,e,i),i},Atlantis.Vector2.minToRef=function(t,e,i){i.x=t.x<e.x?t.x:e.x,i.y=t.y<e.y?t.y:e.y},Atlantis.Vector2.max=function(t,e){var i=new Vector2;return Atlantis.Vector2.maxToRef(t,e,i),i},Atlantis.Vector2.maxToRef=function(t,e,i){i.x=t.x>e.x?t.x:e.x,i.y=t.y>e.y?t.y:e.y},Atlantis.Vector2.prototype.negate=function(t){\"number\"==typeof t?(this.x=-t,this.y=-t):(this.x=-t.x,this.y=-t.y)},Atlantis.Vector2.negate=function(t){var e=Atlantis.Vector2.fromVector(t);return e.x*=-1,e.y*=-1,e},Atlantis.Vector2.prototype.normalize=function(){Atlantis.Vector2.normalizeToRef(this)},Atlantis.Vector2.normalize=function(t){var e=Atlantis.Vector2.fromVector(t);return e.normalize(),e},Atlantis.Vector2.normalizeToRef=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);e||(t.x=0,t.y=0);var i=1/e;t.x*=i,t.y*=i},Atlantis.Vector2.reflect=function(t,e){var i=new Atlantis.Vector2;return Atlantis.ReflectToRef(t,e,i),i},Atlantis.Vector2.reflectToRef=function(t,e,i){var n=2*(t.x*e.x+t.y*e.y);i.x=t.x-e.x*n,i.y=t.y-e.y*n},Atlantis.Vector2.smoothStep=function(t,e,i){var n=new Atlantis.Vector2;return Atlantis.Vector2.smoothStepToRef(t,e,i,n),n},Atlantis.Vector2.smoothStepToRef=function(t,e,i,n){n.x=Atlantis.MathHelper.smoothStep(t.x,e.x,i),n.y=Atlantis.MathHelper.smoothStep(t.y,e.y,i)},Atlantis.Vector2.transform=function(t,e){var i=new Atlantis.Vector3;return Atlantis.Vector2.transformToRef(t,e,i),i},Atlantis.Vector2.transformToRef=function(t,e,i){var n=t.x*e.M11+t.y*e.M21+e.M41,s=t.x*e.M12+t.y*e.M22+e.M42;i.x=n,i.x=s},Atlantis.Vector2.transformNormal=function(t,e){var i=new Atlantis.Vector3;return Atlantis.Vector2.transformNormalToRef(t,e,i),i},Atlantis.Vector2.transformNormalToRef=function(t,e,i){var n=t.x*e.M11+t.y*e.M21,s=t.x*e.M12+t.y*e.M22;i.x=n,i.y=s},Atlantis.Vector2.prototype.set=function(t,e){this.x=t,this.y=e},Atlantis.Vector2.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Vector3=function(t,e,i){t instanceof Atlantis.Vector3?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=e||0,this.z=i||0)},Atlantis.Vector3.Zero=function(){return new Atlantis.Vector3(0,0,0)},Atlantis.Vector3.One=function(){return new Atlantis.Vector3(1,1,1)},Atlantis.Vector3.UnitX=function(){return new Atlantis.Vector3(1,0,0)},Atlantis.Vector3.UnitY=function(){return new Atlantis.Vector3(0,1,0)},Atlantis.Vector3.UnitZ=function(){return new Atlantis.Vector3(0,0,1)},Atlantis.Vector3.Up=function(){return new Atlantis.Vector3(0,1,0)},Atlantis.Vector3.Down=function(){return new Atlantis.Vector3(0,-1,0)},Atlantis.Vector3.Right=function(){return new Atlantis.Vector3(1,0,0)},Atlantis.Vector3.Left=function(){return new Atlantis.Vector3(-1,0,0)},Atlantis.Vector3.Forward=function(){return new Atlantis.Vector3(0,0,-1)},Atlantis.Vector3.Backward=function(){return new Atlantis.Vector3(0,0,1)},Atlantis.Vector3.prototype.add=function(t){t instanceof Atlantis.Vector3?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t)},Atlantis.Vector3.add=function(t,e){var i=new Vector3(t);return i.add(e),i},Atlantis.Vector3.prototype.subtract=function(t){t instanceof Atlantis.Vector3?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t)},Atlantis.Vector3.subtract=function(t,e){var i=new Atlantis.Vector3(t);return i.subtract(e),i},Atlantis.Vector3.prototype.divide=function(t){0!=t.x&&(this.x/=t.x),0!=t.y&&(this.y/=t.y),0!=t.z&&(this.z/=t.z)},Atlantis.Vector3.divide=function(t,e){var i=new Atlantis.Vector3(t);return i.divide(e),i},Atlantis.Vector3.prototype.multiply=function(t){t instanceof Atlantis.Vector3?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t)},Atlantis.Vector3.multiply=function(t,e){var i=new Atlantis.Vector3(t);return i.multiply(e),i},Atlantis.Vector3.cross=function(t,e){var i=new Atlantis.Vector3;return i.x=t.y*e.z-e.y*t.z,i.y=-(t.x*e.z-e.x*t.z),i.z=t.x*e.y-e.x*t.y,i},Atlantis.Vector3.distance=function(t,e){return Math.sqrt(Atlantis.Vector3.distanceSquared(t,e))},Atlantis.Vector3.distanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y,s=t.z-e.z;return i*i+n*n+s*s},Atlantis.Vector3.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},Atlantis.Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Atlantis.Vector3.prototype.lerp=function(t,e){this.x=Atlantis.MathHelper.lerp(this.x,t.x,e),this.y=Atlantis.MathHelper.lerp(this.y,t.y,e),this.z=Atlantis.MathHelper.lerp(this.z,t.z,e)},Atlantis.Vector3.lerp=function(t,e){var i=Atlantis.MathHelper.lerp(t.x,e.x,amount),n=Atlantis.MathHelper.lerp(t.y,e.y,amount),s=Atlantis.MathHelper.lerp(t.z,e.z,amount);return new Atlantis.Vector3(i,n,s)},Atlantis.Vector3.min=function(t,e){var i=new Atlantis.Vector3;return i.x=t.x<e.x?t.x:e.x,i.y=t.y<e.y?t.y:e.y,i.z=t.z<e.z?t.z:e.z,i},Atlantis.Vector3.max=function(t,e){var i=new Atlantis.Vector3;return i.x=t.x>e.x?t.x:e.x,i.y=t.y>e.y?t.y:e.y,i.z=t.z>e.z?t.z:e.z,i},Atlantis.Vector3.prototype.negate=function(){this.x*=-1,this.y*=-1,this.z*=-1},Atlantis.Vector3.negate=function(t){var e=new Atlantis.Vector3(t);return e.negate(),e},Atlantis.Vector3.prototype.normalize=function(){var t=distance(this,new Atlantis.Vector3);0!=t&&(t=1/t,this.set(this.x*t,this.y*t,this.z*t))},Atlantis.Vector3.normalize=function(t){var e=new Vector3(t);return e.normalize(),e},Atlantis.Vector3.transform=function(t,e){var i=new Vector3(t.x*e.M11+t.y*e.M21+t.z*e.M31+e.M41,t.x*e.M12+t.y*e.M22+t.z*e.M32+e.M42,t.x*e.M13+t.y*e.M23+t.z*e.M33+e.M43);return i},Atlantis.Vector3.transformCoordinate=function(t,e){var i=new Atlantis.Vector4;return i.x=t.x*e.M11+t.y*e.M21+t.z*e.M31+e.M41,i.y=t.x*e.M12+t.y*e.M22+t.z*e.M32+e.M42,i.z=t.x*e.M13+t.y*e.M23+t.z*e.M33+e.M43,i.w=1/(t.x*e.M14+t.y*e.M24+t.z*e.M34+e.M44),new Atlantis.Vector3(i.x*i.w,i.y*i.w,i.z*i.w)},Atlantis.Vector3.prototype.set=function(t,e,i){this.x=t,this.y=e,this.z=i},Atlantis.Vector3.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Vector4=function(t,e,i,n){t instanceof Atlantis.Vector4?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},Atlantis.Vector4.prototype.lerp=function(t,e){this.x=Atlantis.MathHelper.lerp(this.x,t.x,e),this.y=Atlantis.MathHelper.lerp(this.y,t.y,e),this.z=Atlantis.MathHelper.lerp(this.z,t.z,e),this.w=Atlantis.MathHelper.lerp(this.w,t.w,e)},Atlantis.Vector4.lerp=function(t,e,i){var n=new Vector4(t);return n.lerp(e,i),n},Atlantis.Vector4.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z,\" w: \",this.w].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.KeyboardState=function(t){this.keys=[];for(var e=0,i=t.length;i>e;e++)this.keys.push(t[e])},Atlantis.KeyboardState.prototype.clone=function(){return new Atlantis.Input.KeyboardState(this.keys)},Atlantis.KeyboardState.prototype.isKeyDown=function(t){return this.keys[t]===!0},Atlantis.KeyboardState.prototype.isKeyUp=function(t){return this.keys[t]===!1},Atlantis.Keyboard=function(t){this.keys=[],this.maxKeys=t||130;for(var e=0;t>e;e++)this.keys[e]=!1;var i=this,n=function(t){Atlantis.Keyboard.preventDefault&&t.preventDefault(),i.keys[t.keyCode]=\"keydown\"===t.type?!0:!1};document.addEventListener(\"keydown\",n,!1),document.addEventListener(\"keyup\",n,!1)},Atlantis.Keyboard.preventDefault=!1,Atlantis.Keyboard.prototype.getState=function(){return new Atlantis.KeyboardState(this.keys)};var Atlantis=window.Atlantis||{};Atlantis.ButtonState={Released:0,Pressed:1},Atlantis.MouseState=function(t,e,i,n){this.x=t,this.y=e,this.scrollWheelValue=i,this.leftButton=n[0],this.rightButton=n[2],this.middleButton=n[1]},Atlantis.MouseState.prototype.clone=function(){return new Atlantis.MouseState(this.x,this.y,this.scrollWheelValue,[this.leftButton,this.middleButton,this.rightButton])},Atlantis.Mouse=function(t){var t=t instanceof HTMLElement?t:document.body;this._x=0,this._y=0,this._scroll=0,this._buttons=[],this._buttons[0]=!1,this._buttons[1]=!1,this._buttons[2]=!1,this.preventDefault=!0;var e=this,i=function(){e._buttons[0]=!1,e._buttons[1]=!1,e._buttons[2]=!1},n=function(n){e._x=(n.pageX-t.offsetLeft)*Atlantis.Game.scaleFactor.x,e._y=(n.pageY-t.offsetTop)*Atlantis.Game.scaleFactor.y,\"mousemove\"!==n.type&&\"pointermove\"!==n.type&&(i(),\"mousedown\"===n.type||\"pointerdown\"===n.type?e._buttons[n.button]=!0:e._buttons[n.button]=!1)},s=function(t){e._scroll=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail))};t.addEventListener(\"mousedown\",n,!1),t.addEventListener(\"mousemove\",n,!1),t.addEventListener(\"mouseup\",n,!1),t.addEventListener(\"mousewheel\",s,!1),t.addEventListener(\"DOMMouseScroll\",s,!1)},Atlantis.Mouse.prototype.getState=function(){return new Atlantis.MouseState(this._x,this._y,this._scroll,this._buttons)};var Atlantis=window.Atlantis||{};Atlantis.TouchLocationState={Invalid:1,Moved:2,Pressed:3,Released:4},Atlantis.TouchCollection=function(t){Array.call(this);for(var t=t||[],e=0,i=t.length;i>e;e++)this.push(new Atlantis.TouchPanelState(t[e]))},Atlantis.TouchCollection.prototype=Object.create(Array.prototype),Atlantis.TouchCollection.prototype.clone=function(){for(var t=[],e=0,i=this.length;i>e;e++)t.push(this[e].clone());return new Atlantis.TouchCollection(t)},Atlantis.TouchPanelState=function(t){this.state=t.state||Atlantis.TouchLocationState.Invalid,this.position=t.position?t.position:new Atlantis.Vector2(0,0)},Atlantis.TouchPanelState.prototype.clone=function(){return new Atlantis.TouchPanelState({state:this.state,position:{x:this.position.x,y:this.position.y}})},Atlantis.TouchPanel=function(t){this._states=[new Atlantis.TouchPanelState({}),new Atlantis.TouchPanelState({}),new Atlantis.TouchPanelState({})];var e={up:\"touchend\",down:\"touchstart\",cancel:\"touchcancel\",move:\"touchmove\",callback:null},i=this,n=null,s=!1,a=function(a,o){if(i._states[a]||(i._states[a]=new Atlantis.TouchPanelState),o.touches?(i._states[a].position.x=o.touches[a].pageX-t.offsetLeft,i._states[a].position.y=o.touches[a].pageY-t.offsetTop):(i._states[a].position.x=o.clientX-t.offsetLeft,\ni._states[a].position.y=o.clientY-t.offsetTop),i._states[a].position.x*=Atlantis.Game.scaleFactor.x,i._states[a].position.y*=Atlantis.Game.scaleFactor.y,s){var r=n===e.down&&o.type===e.move;if(n=o.type,r)return void(n=null)}o.type==e.down?i._states[a].state=Atlantis.TouchLocationState.Pressed:o.type==e.move?(o.preventDefault(),i._states[a].state=Atlantis.TouchLocationState.Moved):o.type==e.up?i._states[a].state=Atlantis.TouchLocationState.Released:i._states[a].state=Atlantis.TouchLocationState.Invalid},o=function(t){if(\"touchend\"===t.type||\"touchcancel\"===t.type)for(var e=0,n=i._states.length;n>e;e++)i._states[e].state=\"touchend\"===t.type?Atlantis.TouchLocationState.Released:Atlantis.TouchLocationState.Invalid;else for(var e=0,n=t.touches.length;n>e;e++)a(e,t)},r=function(t){t.preventDefault(),\"MSPointerUp\"===t.type||\"MSPointerCancel\"===t.type||\"pointerup\"===t.type||\"pointercancel\"===t.type?i._states[0].state=\"MSPointerUp\"===t.type||\"pointerup\"===t.type?Atlantis.TouchLocationState.Released:Atlantis.TouchLocationState.Invalid:a(0,t)},h=+navigator.maxTouchPoints||+navigator.msMaxTouchPoints;0!==h&&(window.PointerEvent?(e.up=\"pointerup\",e.down=\"pointerdown\",e.move=\"pointermove\",e.cancel=\"pointercancel\",e.callback=r):window.MSPointerEvent?(e.up=\"MSPointerUp\",e.down=\"MSPointerDown\",e.move=\"MSPointerMove\",e.cancel=\"MSPointerCancel\",e.callback=r):e.callback=o,s=\"touchstart\"!==e.down,t.addEventListener(e.down,e.callback,!1),t.addEventListener(e.move,e.callback,!1),t.addEventListener(e.up,e.callback,!1),t.addEventListener(e.cancel,e.callback,!1))},Atlantis.TouchPanel.prototype.getCapabilities=function(){return{hasTouch:!!(\"ontouchstart\"in window)||!!(\"ongesturechange\"in window)}},Atlantis.TouchPanel.prototype.getState=function(t){return\"number\"==typeof t?new Atlantis.TouchPanelState(this._states[t]?this._states[t]:{}):new Atlantis.TouchCollection(this._states)};var Atlantis=window.Atlantis||{};Atlantis.GamepadButton={A:0,B:1,X:2,Y:3,LeftShoulder:4,RightShoulder:5,LeftTrigger:6,RightTrigger:7,Select:8,Start:9,L3:10,R3:11,DPadUp:12,DPadDown:13,DPadLeft:14,DPadRight:15},Atlantis.GamepadAxis={Horizontal:0,Vertical:1,HorizontalRight:2,VerticalRight:3},Atlantis.GamepadState=function(t,e){if(this.axis=[],this.buttons=[],t)for(var i=0,n=t.length;n>i;i++)this.axis.push(t[i]);else for(var i=0;6>i;i++)this.axis.push(0);if(e)for(var i=0,n=e.length;n>i;i++)this.buttons.push(e[i]);else for(var i=0;15>i;i++)this.buttons.push(!1)},Atlantis.GamepadState.prototype.isButtonDown=function(t){return this.buttons[t]},Atlantis.GamepadState.prototype.isButtonUp=function(t){return!this.buttons[t]},Atlantis.GamepadState.prototype.getAxis=function(t){return this.axis[t]},Atlantis.Gamepad=function(){Atlantis.GameComponent.call(this),this._gamepads=[],this._states={}},Atlantis.Gamepad.prototype=Object.create(Atlantis.GameComponent.prototype),Atlantis.Gamepad.prototype.initialize=function(){var t=this;navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.msGetGamepads||navigator.webkitGamepads,this._gamepadsSupported=navigator.getGamepads?!0:!1,window.addEventListener(\"gamepadconnected\",function(e){t._addGamepad(e.gamepad)},!1),window.addEventListener(\"gamepaddisconnected\",function(e){t._removeGamepad(e.gamepad)},!1)},Atlantis.Gamepad.prototype._addGamepad=function(t){this._gamepads.push(t),this._states[t.index]=new Atlantis.GamepadState},Atlantis.Gamepad.prototype._removeGamepad=function(t){delete this._gamepads[t.index],delete this._states[t.index]},Atlantis.Gamepad.prototype._updateGamepads=function(){for(var t=navigator.getGamepads(),e=0;e<t.length;e++)t[e]&&-1===this._gamepads.indexOf(t[e])&&this._addGamepad(t[e])},Atlantis.Gamepad.prototype.update=function(t){if(this._gamepadsSupported){this._updateGamepads();for(var e=0,i=this._gamepads.length;i>e;e++){for(var n=this._gamepads[e],s=0,a=n.buttons.length;a>s;s++){var o=n.buttons[s],r=1===o?!0:!1;\"object\"==typeof o&&(r=o.pressed,o=o.value),this._states[n.index].buttons[s]=r}for(var s=0,a=n.axes.length;a>s;s++)this._states[n.index].axis[s]=0|+n.axes[s]}}},Atlantis.Gamepad.prototype.getState=function(t){var t=\"undefined\"!=typeof t?t:0;return this._gamepads[t]?new Atlantis.GamepadState(this._states[t].axis,this._states[t].buttons):new Atlantis.GamepadState};var Atlantis=window.Atlantis||{};Atlantis.Keys={BackSpace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,Escape:27,Space:32,Home:36,End:35,Left:37,Up:38,Right:39,Down:40,Suppr:46,PageUp:33,PageDown:34,Insert:45,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Super:91,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var Atlantis=window.Atlantis||{};Atlantis.ScaleMode={ScaleToFit:0,ConserveAspectRatio:1,NoScaleCenter:2},Atlantis.GraphicsDevice=function(t,e,i){var i=i||{};if(i.webGL=i.webGL?!0:!1,i.width=t,i.height=e,this.preferredBackBufferWidth=i.backBufferWidth||t,this.preferredBackBufferHeight=i.backBufferHeight||e,this.disableSmoothing=!1,this.forceDisableSmoothing=!1,this.viewport=new Atlantis.Rectangle,this.scaleMode=Atlantis.ScaleMode.ScaleToFit,this._backBufferCache=document.createElement(\"canvas\"),t&&e){this._frontBuffer=new Atlantis.RenderTarget(t,e,i.webGL,i.canvas),this._fbContext=this._frontBuffer.getContext(),this._backBuffer=new Atlantis.RenderTarget(this.preferredBackBufferWidth,this.preferredBackBufferHeight,i.webGL),this._bbCanvas=this._backBuffer.getCanvas();var n=this._frontBuffer.getCanvas();n.style.msTouchAction=\"none\",n.style.backgroundColor=\"#000\",n.id=n.id?n.id:\"AtlantisCanvas\",this.viewport.setSize(this.preferredBackBufferWidth,this.preferredBackBufferHeight)}},Atlantis.GraphicsDevice.prototype.applyChanges=function(){this._backBuffer.setSize(this.preferredBackBufferWidth,this.preferredBackBufferHeight);var t=this._frontBuffer.getWidth(),e=this._frontBuffer.getHeight();if(this.scaleMode==Atlantis.ScaleMode.ScaleToFit||t===this.preferredBackBufferWidth&&e===this.preferredBackBufferHeight)this.viewport.set(0,0,t,e);else if(this.scaleMode==Atlantis.ScaleMode.ConserveAspectRatio){var i=0;this.preferredBackBufferWidth>this.preferredBackBufferHeight?(i=this.preferredBackBufferWidth/t,this.viewport.width=t,this.viewport.height=this.preferredBackBufferHeight*(1+i)):(i=this.preferredBackBufferHeight/e,this.viewport.width=this.preferredBackBufferWidth*(1+i),this.viewport.height=e),this.viewport.x=t/2-this.viewport.width/2,this.viewport.y=e/2-this.viewport.height/2}else this.scaleMode==Atlantis.ScaleMode.NoScaleCenter&&(this.viewport.x=t/2-this.preferredBackBufferWidth/2,this.viewport.y=e/2-this.preferredBackBufferHeight/2,this.viewport.width=this.preferredBackBufferWidth,this.viewport.height=this.preferredBackBufferHeight);Atlantis.Game.scaleFactor.x=this.preferredBackBufferWidth/this._frontBuffer.getWidth(),Atlantis.Game.scaleFactor.y=this.preferredBackBufferHeight/this._frontBuffer.getHeight(),Atlantis.notify(Atlantis.events.ResolutionChanged,{width:this.preferredBackBufferWidth,height:this.preferredBackBufferHeight})},Atlantis.GraphicsDevice.prototype.getBackBuffer=function(){return this._backBuffer},Atlantis.GraphicsDevice.prototype.getFrontBuffer=function(){return this._frontBuffer},Atlantis.GraphicsDevice.prototype.clear=function(t){this._backBuffer.clear(t),this._frontBuffer.clear(t),this.disableSmoothing&&(this._backBuffer.getContext().imageSmoothingEnabled=!1,this._fbContext.imageSmoothingEnabled=!1)},Atlantis.GraphicsDevice.prototype.present=function(){this.forceDisableSmoothing?this._backBufferCache=this._resizePixelCanvas(this._bbCanvas,{x:Atlantis.Game.scaleFactor.x,y:Atlantis.Game.scaleFactor.y}):this._backBufferCache=this._bbCanvas,this._fbContext.drawImage(this._backBufferCache,this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height)},Atlantis.GraphicsDevice.prototype._resizePixelCanvas=function(t){var e=t.width/Atlantis.Game.scaleFactor.x,i=t.height/Atlantis.Game.scaleFactor.y,n=t.getContext(\"2d\").getImageData(0,0,t.width,t.height),s=document.createElement(\"canvas\");s.width=e,s.height=i;for(var a=s.getContext(\"2d\"),o=a.getImageData(0,0,e,i),r=0;i>r;r++)for(var h=0;e>h;h++){var c=4*(Math.floor(r*Atlantis.Game.scaleFactor.y)*t.width+Math.floor(h*Atlantis.Game.scaleFactor.x)),l=4*(r*e+h);o.data[l]=n.data[c],o.data[l+1]=n.data[c+1],o.data[l+2]=n.data[c+2],o.data[l+3]=n.data[c+3]}return a.putImageData(o,0,0),s},Atlantis.GraphicsDevice.prototype.toggleFullscreen=function(t){var t=t instanceof HTMLElement?t:this._frontBuffer.getCanvas(),e=this.isFullscreen();t.requestFullScreen=t.requestFullScreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||function(){return!1},document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||function(){return!1},e?document.cancelFullScreen():t.requestFullScreen()},Atlantis.GraphicsDevice.prototype.isFullscreen=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||!1};var Atlantis=window.Atlantis||{};Atlantis.SpriteSortMode={BackToFront:0,FrontToBack:1,Immediate:2},Atlantis.SpriteEffect={None:0,FlipHorizontaly:1,FlipVerticaly:2},Atlantis.BatchItemType={Texture:0,Font:1},Atlantis.SpriteBatch=function(t){this._graphicsDevice=t,this._viewport=new Atlantis.Rectangle(0,0,t.preferredBackBufferWidth,t.preferredBackBufferHeight),this._canvas=this._graphicsDevice.getBackBuffer().getCanvas(),this._context=this._graphicsDevice.getBackBuffer().getContext(),this._batchItems=[],this._batchStarted=!1,this._spriteSortMode=Atlantis.SpriteSortMode.Immediate,this._transformMatrix=null,this._cacheColoredTextures=[],this._batchRect=new Atlantis.Rectangle,document.addEventListener(Atlantis.events.ResolutionChanged,this._onResize.bind(this),!1)},Atlantis.SpriteBatch.prototype._onResize=function(t){this._viewport.width=t.width,this._viewport.height=t.height},Atlantis.SpriteBatch.prototype.begin=function(t,e){this._batchStarted||(this._batchStarted=!0,this._spriteSortMode=\"number\"==typeof t?t:Atlantis.SpriteSortMode.Immediate,this._transformMatrix=e,this._transformMatrix&&(this._context.save(),this._context.transform(this._transformMatrix[0],this._transformMatrix[1],this._transformMatrix[2],this._transformMatrix[3],this._transformMatrix[4],this._transformMatrix[5])))},Atlantis.SpriteBatch.prototype.draw=function(t,e,i,n,s,a,o,r,h){this._batchStarted&&(e.width||(e.width=t.width,e.height=t.height),this._spriteSortMode==Atlantis.SpriteSortMode.Immediate?this._drawBatchItem(t,e,i,n,s,a,o,r,h,Atlantis.BatchItemType.Texture):this._batchItems.push({type:Atlantis.BatchItemType.Texture,texture2D:t,sourceRectangle:i,destinationRectangle:e,color:n,rotation:s,origin:a,scale:o,effect:r?r:Atlantis.SpriteEffect.None,layerDepth:0|+h}))},Atlantis.SpriteBatch.prototype.drawString=function(t,e,i,n,s,a,o,r,h){this._batchStarted&&(this._spriteSortMode===Atlantis.SpriteSortMode.Immediate?this._drawBatchItem(t,i,e,n,s,a,o,r,h,Atlantis.BatchItemType.Font):this._batchItems.push({type:Atlantis.BatchItemType.Font,texture2D:t,sourceRectangle:e,destinationRectangle:{x:i.x,y:i.y,width:1,height:1},color:n,rotation:s,origin:a,scale:o,effect:r?r:Atlantis.SpriteEffect.None,layerDepth:0|+h}))},Atlantis.SpriteBatch.prototype.end=function(){if(this._batchStarted){if(this._spriteSortMode!==Atlantis.SpriteSortMode.Immediate){this._batchItems=this._batchItems.sort(this._sortBatchItem.bind(this));for(var t=0,e=this._batchItems.length;e>t;t++)this._drawBatchItem(this._batchItems[t].texture2D,this._batchItems[t].destinationRectangle,this._batchItems[t].sourceRectangle,this._batchItems[t].color,this._batchItems[t].rotation,this._batchItems[t].origin,this._batchItems[t].scale,this._batchItems[t].effect,this._batchItems[t].layerDepth,this._batchItems[t].type);this._batchItems.length=0}this._transformMatrix&&this._context.restore(),this._batchStarted=!1}},Atlantis.SpriteBatch.drawTexture=function(t,e,i,n,s,a,o){o?t.drawImage(e,o.x,o.y,o.width,o.height,i,n,s,a):t.drawImage(e,i,n,s,a)},Atlantis.SpriteBatch.drawString=function(t,e,i,n,s){t.fillStyle=s,t.font=e.getFont(),e.strokeStyle&&e.lineWidth&&(t.lineWidth=e.lineWidth,t.strokeStyle=e.strokeStyle,e.wrapText||t.strokeText(i,n.x,n.y)),e.wrapText?Atlantis.SpriteBatch._wrapText(t,i,n.x,n.y,n.width,e.size,e.strokeStyle&&e.lineWidth):t.fillText(i,n.x,n.y)},Atlantis.SpriteBatch.prototype._drawBatchItem=function(t,e,i,n,s,a,o,r,h,c){if(this._batchRect.fromRectangle(e),this._viewport.intersects(this._batchRect)){var l=a?a.x:0,u=a?a.y:0;this._context.save(),this._context.translate(e.x,e.y),this._context.translate(l,u),this._batchRect.x=-l,this._batchRect.y=-u,s&&this._context.rotate(s),o&&this._context.scale(o.x,o.y),r&&r!==Atlantis.SpriteEffect.None&&(r==Atlantis.SpriteEffect.FlipHorizontaly?(this._context.scale(-1,1),this._batchRect.x-=this._batchRect.width):(this._context.scale(1,-1),this._batchRect.y-=this._batchRect.height)),c===Atlantis.BatchItemType.Texture?n&&t.width&&t.height?Atlantis.SpriteBatch.drawTexture(this._context,this._colorizeTexture(t,n),this._batchRect.x,this._batchRect.y,this._batchRect.width,this._batchRect.height,i):Atlantis.SpriteBatch.drawTexture(this._context,t,this._batchRect.x,this._batchRect.y,this._batchRect.width,this._batchRect.height,i):c===Atlantis.BatchItemType.Font&&Atlantis.SpriteBatch.drawString(this._context,t,i,this._batchRect,n),this._context.restore()}},Atlantis.SpriteBatch.prototype._colorizeTexture=function(t,e){var i=this._searchColoredTexture(t,e);if(!i){i=document.createElement(\"canvas\"),i.width=t.width,i.height=t.height;var n=i.getContext(\"2d\");n.drawImage(t,0,0);for(var s=n.getImageData(0,0,t.width,t.height),a=this._hexaToBytes(e),o=0,r=s.data.length;r>o;o+=4)s.data[o]=a.r|s.data[o],s.data[o+1]=a.g|s.data[o+1],s.data[o+2]=a.b|s.data[o+2],s.data[o+3]=a.a|s.data[o+3];n.putImageData(s,0,0),this._cacheColoredTextures.push({texture:t,color:e,canvas:i})}return i},Atlantis.SpriteBatch.prototype._hexaToBytes=function(t){var e=t.split(\"#\")[1],i={r:0,g:0,b:0,a:0},n=e.length;return 3===n?(i.r=parseInt(e[0]+e[0],16),i.g=parseInt(e[1]+e[1],16),i.b=parseInt(e[2]+e[2],16)):6===n?(i.r=parseInt(e.slice(0,2),16),i.g=parseInt(e.slice(2,4),16),i.b=parseInt(e.slice(4,6),16)):8===n&&(i.r=parseInt(e.slice(0,2),16),i.g=parseInt(e.slice(2,4),16),i.b=parseInt(e.slice(4,6),16),i.a=parseInt(e.slice(6,8),16)),i},Atlantis.SpriteBatch.prototype._searchColoredTexture=function(t,e){for(var i=0,n=this._cacheColoredTextures.length,s=null;n>i&&null===s;)s=this._cacheColoredTextures[i].texture===t&&this._cacheColoredTextures[i].color===e?this._cacheColoredTextures[i].canvas:null,i++;return s},Atlantis.SpriteBatch.prototype._sortBatchItem=function(t,e){return this._spriteSortMode===Atlantis.SpriteSortMode.BackToFront?+t.layerDepth>+e.layerDepth?1:+t.layerDepth<+e.layerDepth?-1:0:+t.layerDepth<+e.layerDepth?1:+t.layerDepth>+e.layerDepth?-1:0},Atlantis.SpriteBatch._wrapText=function(t,e,i,n,s,a,o){for(var r=e.split(\" \"),h=\"\",c=0;c<r.length;c++){var l=h+r[c]+\" \",u=t.measureText(l),p=u.width;p>s&&c>0?(o&&t.strokeText(h,i,n),t.fillText(h,i,n),h=r[c]+\" \",n+=a):h=l}o&&t.strokeText(h,i,n),t.fillText(h,i,n)};var Atlantis=window.Atlantis||{};Atlantis.RenderTarget=function(t,e,i,n){this._canvas=n,this._canvas||(this._canvas=document.createElement(\"canvas\"),this.setSize(t,e)),this._context=null,this._data=null,this._needUpdate=!1,i?this._context=this._canvas.getContext(\"webgl\")||this._canvas.getContext(\"experimental-webgl\"):this._context=this._canvas.getContext(\"2d\"),this.isWebGLCanvas=function(){return i},this.setSize(t,e)},Atlantis.RenderTarget.fromImage=function(t){var e=new Atlantis.RenderTarget(t.width,t.height,!1);return e._context.drawImage(t,0,0,t.width,t.height),e},Atlantis.RenderTarget.prototype.setData=function(t){this._context.putImageData(t,0,0)},Atlantis.RenderTarget.prototype.getData=function(){return(!this._data||this._needUpdate)&&(this._data=this._context.getImageData(0,0,this._canvas.width,this._canvas.height)),this._data},Atlantis.RenderTarget.prototype.getPixelData=function(t,e){var i=this._context.getImageData(t,e,1,1).data;return{r:i[0],g:i[1],b:i[2],a:i[3]}},Atlantis.RenderTarget.prototype.getContext=function(){return this._context},Atlantis.RenderTarget.prototype.getCanvas=function(){return this._canvas},Atlantis.RenderTarget.prototype.getWidth=function(){return this._canvas.width},Atlantis.RenderTarget.prototype.getHeight=function(){return this._canvas.height},Atlantis.RenderTarget.prototype.setSize=function(t,e){this._canvas.width=t,this._canvas.height=e},Atlantis.RenderTarget.prototype.clear=function(t){this._is3DCanvas?(this._context.clearColor(t.r,t.g,t.b,t.a),this._context.enable(this._context.DEPTH_TEST),this._context.depthFunc(this._context.LEQUAL),this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT)):this._context.clearRect(0,0,this._canvas.width,this._canvas.height)},Atlantis.RenderTarget.prototype.saveAsPng=function(){return this._canvas.toDataURL(\"image/png\")},Atlantis.RenderTarget.prototype.saveAsJpg=function(){return this._canvas.toDataURL(\"image/jpg\")};var Atlantis=window.Atlantis||{};Atlantis.SpriteFont=function(t,e,i){this.fontName=t||\"Arial\",this.size=e||14,this.style=i||\"normal\",this.strokeStyle=null,this.lineWidth=0},Atlantis.SpriteFont.prototype.getFont=function(){return[this.style,\" \",this.size,\"px \",this.fontName].join(\"\")},Atlantis.SpriteFont.prototype.clone=function(){var t=new Atlantis.SpriteFont(this.fontName,this.size,this.style);return t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t};var Atlantis=window.Atlantis||{};Atlantis.Preloader=function(t){this.screenWidth=t.graphicsDevice.preferredBackBufferWidth,this.screenHeight=t.graphicsDevice.preferredBackBufferHeight,this.screenWidthPerTwo=this.screenWidth/2,this.screenHeightPerTwo=this.screenHeight/2,this.spriteFont=new Atlantis.SpriteFont(\"Arial\",32)},Atlantis.Preloader.prototype.onProgress=function(t,e){var i=[\"Game loading \",Math.round(e.progress),\"%\"].join(\"\"),n=t.measureText(i),s=this.screenWidthPerTwo-n.width/2,a=this.screenHeightPerTwo-this.spriteFont.size/2;t.clearRect(0,0,this.screenWidth,this.screenHeight),t.fillStyle=\"#fafafa\",t.font=this.spriteFont.getFont(),t.fillText(i,s,a)};var Atlantis=window.Atlantis||{};Atlantis.Game=function(){function t(){i.gameTime.update(),i.update(i.gameTime),i.draw(i.gameTime),i.afterDraw(i.gamepad),i._paused||requestAnimationFrame(t)}function e(t){i.width=t.target.innerWidth,i.height=t.target.innerHeight,i.canvas.width=i.width,i.canvas.height=i.height}var i=null,n=function(t,e,n,s){this.settings=s||{},this.settings.webGL=!1;var t=t||window.innerWidth,e=e||window.innerHeight;this.domElement=document.body,typeof n instanceof HTMLElement?this.domElement=n:\"string\"==typeof n&&(\".\"===n[0]?(n=n.replace(\".\",\"\"),this.domElement=document.getElementsByClassName(n)[0]):(n=\"#\"===n[0]?n.replace(\"#\",\"\"):n,this.domElement=document.getElementById(n))),this.domElement instanceof HTMLCanvasElement&&(this.settings.canvas=this.domElement),this.version=\"0.0.0.1\",this.gameTime=new Atlantis.GameTime,this.components=new Atlantis.GameComponentCollection,this.content=new Atlantis.ContentManager,this.keyboard=null,this.mouse=null,this.touchPanel=null,this.gamepad=null,this.preloader=null,this.graphicsDevice=new Atlantis.GraphicsDevice(t,e,this.settings),this.canvas=this.settings.canvas,this.frontBuffer=null,this.context=null,this.initialized=!1,this._paused=!1,i=this};return n.scaleFactor=new Atlantis.Vector2(1,1),n.prototype._internalIntialize=function(){this.frontBuffer=this.graphicsDevice.getFrontBuffer(),this.context=this.frontBuffer.getContext(),this.canvas||(this.canvas=this.frontBuffer.getCanvas()),this.keyboard=new Atlantis.Keyboard,this.mouse=new Atlantis.Mouse(this.frontBuffer.getCanvas()),this.touchPanel=new Atlantis.TouchPanel(this.frontBuffer.getCanvas()),this.gamepad=new Atlantis.Gamepad,this.components.add(this.gamepad),this.settings.resizeEnabled&&window.addEventListener(\"resize\",e,!1),this.domElement&&!this.settings.canvas&&this.domElement.appendChild(this.frontBuffer.getCanvas())},n.prototype.initialize=function(){this.components.initialize()},n.prototype.loadContent=function(){this.components.loadContent(this.content)},n.prototype.unloadContent=function(){this.components.unloadContent()},n.prototype.update=function(t){this.components.update(t)},n.prototype.draw=function(t,e){this.settings.autoClear&&this.graphicsDevice.clear(),this.components.draw(t,e)},n.prototype.afterDraw=function(t){this.graphicsDevice.present()},n.prototype.run=function(){var e=this,i=function(){e.initialize(),e.initialized=!0,e.loadContent(),e.frontBuffer.getCanvas().focus(),t()};this.initialized||(this.initialized=!0,this._internalIntialize(),this.content.preloader.length?(null===this.preloader&&(this.preloader=new Atlantis.Preloader(this)),this.content.preload(function(t){this.preloader.onProgress(this.context,t)}.bind(this),function(){this.context.clearRect(0,0,this.frontBuffer.getWidth(),this.frontBuffer.getHeight()),i()}.bind(this))):i())},n.prototype.pause=function(){cancelAnimationFrame(t),this._paused=!0},n.prototype.resume=function(){this._paused&&(this._paused=!1,t())},n}();\n//# sourceMappingURL=atlantis.framework.min.js.map\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * An helper to generate random value for some types.\r\n * @class Random\r\n * @static\r\n */\r\nAtlantis.Random = {\r\n\t/**\r\n\t * Gets a random value.\r\n\t * @method value\r\n\t * @return {Number} Return a random value.\r\n\t */\r\n\tvalue: function () {\r\n\t\treturn Math.random();\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random float between min and max.\r\n\t * @method randomFloat\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Number} Return a random value between min and max.\r\n\t */\r\n\trandomFloat: function (min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random integer between min and max.\r\n\t * @method randomFloat\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Number} Return a random value between min and max.\r\n\t */\r\n\trandomInt: function (min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random Vector2 between min and max.\r\n\t * @method vector2\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector2} Return a random Vector2 between min and max.\r\n\t */\r\n\tvector2: function (min, max) {\r\n\t\treturn new Atlantis.Vector2(this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random Vector3 between min and max.\r\n\t * @method vector3\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector3} Return a random vector3 between min and max.\r\n\t */\r\n\tvector3: function (min, max) {\r\n\t\treturn new Atlantis.Vector3(this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random vector4 between min and max.\r\n\t * @method vector4\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector4} Return a random vector4 between min and max.\r\n\t */\r\n\tvector4: function (min, max) {\r\n\t\treturn new Atlantis.Vector4(this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random float between min and max.\r\n\t * @method color\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {String} Return a random color in hexadecimal format.\r\n\t */\r\n\tcolor: function () {\r\n\t\treturn (\"#\" + (Math.floor(Math.random() * 16777215).toString(16)));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random element from an Array.\r\n\t * @method randomArrayItem\r\n\t * @param {Array} array The array to use.\r\n\t * @return {Object} Return a random value from the array.\r\n\t */\r\n\trandomArrayItem: function(array) {\r\n\t\tif (array.length === 0) return undefined;\r\n\t\treturn array[Atlantis.Random.randomInt(0, array.length - 1)];\r\n\t}\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * Define a music status\r\n * @class MusicState\r\n * @static\r\n */\r\nAtlantis.MusicState = {\r\n    Playing: 1, Stopped: 2, Paused: 3\r\n};\r\n\r\n/**\r\n* An audio manager to play sound and musics.\r\n* @constructor \r\n* @class AudioManager\r\n*/\r\nAtlantis.AudioManager = function () {\r\n    this.repeatMusic = false;\r\n    this.currentMusic = null;\r\n    this.volume = 1;\r\n    this.currentState = Atlantis.MusicState.STOPPED;\r\n};\r\n\r\n/**\r\n * Play a sound or a music one time\r\n * @method playOneShot\r\n */\r\nAtlantis.AudioManager.prototype.playOneShot = function (audioClip) {\r\n    audioClip.play();\r\n};\r\n\r\n/**\r\n * Play a music.\r\n * @method playMusic\r\n * @param {AudioElement} music An HTML Audio Element that contains the music.\r\n * @param {Boolean} repeat Sets to true for enable repeat.\r\n */\r\nAtlantis.AudioManager.prototype.play = function (music, repeat) {\r\n    this.stopMusic();\r\n    this.currentMusic = music;\r\n    this.repeat = repeat;\r\n    this.currentMusic.play();\r\n    this.currentState = Atlantis.MusicState.Playing;\r\n};\r\n\r\n/**\r\n * Stop the current played music.\r\n * @method stopMusic\r\n */\r\nAtlantis.AudioManager.prototype.stop = function () {\r\n    this.currentMusic.stop();\r\n    this.currentState = Atlantis.MusicState.Stopped;\r\n};\r\n\r\n/**\r\n * Pause the current played music.\r\n * @method pauseMusic\r\n */\r\nAtlantis.AudioManager.prototype.pause = function () {\r\n    if (this.currentState == Atlantis.MusicState.Playing) {\r\n        this.currentMusic.pause();\r\n        this.currentState = Atlantis.MusicState.Paused;\r\n    }\r\n};\r\n\r\n/**\r\n * Resume a paused music.\r\n * @method resume\r\n */\r\nAtlantis.AudioManager.prototype.resume = function () {\r\n    if (this.currentState == Atlantis.MusicState.Paused) {\r\n        this.currentMusic.play();\r\n        this.currentState = Atlantis.MusicState.Playing;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A storage manager that work with localStorage\r\n * @constructor\r\n * @class StorageManager\r\n */\r\nAtlantis.StorageManager = function () {\r\n\tthis.container = \"atlantis.game\";\r\n};\r\n\r\n/**\r\n * Save data in the localStorage.\r\n * @method save\r\n * @param {String} container The localStorage key.\r\n * @param {String} name Desired name for the data who'll save.\r\n * @param {Object} or {String} data An object to serialize or a serialized object.\r\n */\r\nAtlantis.StorageManager.prototype.save = function (name, data) {\r\n    if (typeof(data) === \"object\") {\r\n        data = JSON.stringify(data);\r\n    }\r\n\r\n    localStorage.setItem(this.getLocalStorageKey(name), data)\r\n};\r\n\r\n/**\r\n * Load data from the localStorage.\r\n * @method load\r\n * @param {String} name The data key.\r\n * @param {Object} defaultValue The default value if the data not exists.\r\n * @return {Object} The object if exists otherwise return defaultValue\r\n */\r\nAtlantis.StorageManager.prototype.load = function (name, defaultValue) {\r\n    var data = localStorage.getItem(this.getLocalStorageKey(name));\r\n    return data !== null ? data : defaultValue;\r\n};\r\n\r\n/**\r\n * Gets the localStorage key with a container name and a data name.\r\n * @method getLoadStorageKey\r\n * @param {String} name Desired name for the data who'll save.\r\n * @return {string} The localStorage final key.\r\n */\r\nAtlantis.StorageManager.prototype.getLocalStorageKey = function (name) {\r\n    return [this.container, \".\", name].join(\"\");\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n* A level manager.\r\n* @constructor\r\n* @class LevelManager\r\n*/\r\nAtlantis.LevelManager = function (game) {\r\n    Atlantis.DrawableGameComponent.call(this, game);\r\n    this.graphicsDevice = game.graphicsDevice;\r\n    this.levels = [];\r\n    this.autoClear = true;\r\n    this.activeLevel = null;\r\n    this.initialized = false;\r\n    this._autoLoadLevel;\r\n};\r\n\r\nAtlantis.LevelManager.prototype = Object.create(Atlantis.DrawableGameComponent.prototype);\r\n\r\nAtlantis.LevelManager.prototype.initialize = function () {\r\n    this.initialized = true;\r\n\r\n    if (typeof(this._autoLoadLevel) !== \"undefined\") {\r\n        this.loadLevel(this._autoLoadLevel);\r\n        this._autoLoadLevel = \"\";\r\n    }\r\n};\r\n\r\n/**\r\n* Update active level.\r\n* @method update\r\n* @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n*/\r\nAtlantis.LevelManager.prototype.update = function (gameTime) {\r\n    if (this.activeLevel) {\r\n        this.activeLevel.update(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n* Draw active levels.\r\n* @method draw\r\n* @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n*/\r\nAtlantis.LevelManager.prototype.draw = function (gameTime) {\r\n    if (this.activeLevel) {\r\n        if (this.autoClear) {\r\n            this.graphicsDevice.clear();\r\n        }\r\n\r\n        this.activeLevel.draw(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n* Add a level to the level manager.\r\n* @method loadLevel\r\n* @param {Altantis.level} levelParam Instance of the level to add.\r\n*/\r\nAtlantis.LevelManager.prototype.loadLevel = function (nameOrIndex, reinitialize) {\r\n    var reinit = typeof(reinitialize) === \"boolean\" ? reinitialize : true;\r\n    \r\n    if (!this.initialized) {\r\n        this._autoLoadLevel = nameOrIndex;\r\n        return;\r\n    }\r\n\r\n    if (this.activeLevel) {\r\n        this.activeLevel.onDisabled();\r\n    }\r\n\r\n    this.activeLevel = null;\r\n\r\n    if (typeof (nameOrIndex) === \"string\") {\r\n        this.activeLevel = this.getLevelByName(nameOrIndex);\r\n    }\r\n    else if (this._checkIndex(nameOrIndex)) {\r\n        this.activeLevel = this.levels[nameOrIndex];\r\n    }\r\n\r\n    if (this.activeLevel) {\r\n        if (reinit) {\r\n            this.activeLevel.initialize();\r\n        }\r\n\r\n        this.activeLevel.active = true;\r\n\r\n        this.activeLevel.onEnabled();\r\n    }\r\n};\r\n\r\n// -------------------------- //\r\n// --- Collection methods --- //\r\n// -------------------------- //\r\n\r\n/**\r\n* Add a level to the level manager.\r\n* @method add\r\n* @param {Altantis.level} name Instance of the level to add.\r\n* @param {Boolean} autoload Sets to `true` to load the level.\r\n*/\r\nAtlantis.LevelManager.prototype.add = function (level, autoLoad) {\r\n    this.levels.push(level);\r\n\r\n    if (autoLoad) {\r\n        this.loadLevel(this.levels.length - 1);\r\n    }\r\n};\r\n\r\n/**\r\n* Remove a level by its index, name or instance.\r\n* @method remove\r\n* @param {Number|String} nameOrIndex level's index or name.\r\n*/\r\nAtlantis.LevelManager.prototype.remove = function (nameOrIndex) {\r\n    var level = null,\r\n        index = -1;\r\n\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        level = this.getLevelByName(nameOrIndex);\r\n        index = this.levels.indexOf(level);\r\n    }\r\n    else if (this._checkIndex(nameOrIndex)) {\r\n        level = this.levels[nameOrIndex];\r\n        index = nameOrIndex;\r\n    }\r\n\r\n    if (level === this.activeLevel) {\r\n        this.activeLevel = null;\r\n    } \r\n\r\n    if (this._checkIndex(index)) {\r\n        this.levels.splice(index, 1);\r\n    }\r\n};\r\n\r\n/**\r\n* Gets a level by its index or its name.\r\n* @method get\r\n* @param {Number|String} nameOrIndex level's index or name.\r\n* @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n*/\r\nAtlantis.LevelManager.prototype.get = function (nameOrIndex) {\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        return this.getLevelByName(nameOrIndex);\r\n    }\r\n    else if (this._checkIndex(nameOrIndex)) {\r\n        return this.levels[nameOrIndex];\r\n    }\r\n\t\r\n\treturn null;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLevelByName = function (name) {\r\n    var i = 0,\r\n        size = this.levels.length,\r\n        level = null;\r\n\r\n    while (i < size && level === null) {\r\n        level = (this.levels[i].name === name) ? this.levels[i] : level;\r\n        i++;\r\n    }\r\n\r\n    return level;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLoadedLevelIndex = function () {\r\n    if (this.activeLevel) {\r\n        return this.levels.indexOf(this.activeLevel);\r\n    }\r\n    return -1;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLoadedLevelName = function () {\r\n    if (this.activeLevel) {\r\n        return this.activeLevel.name;\r\n    }\r\n    return -1;\r\n};\r\n\r\nAtlantis.LevelManager.prototype._checkIndex = function (index) {\r\n    return index > -1 && index < this.levels.length;\r\n};\n /**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n \r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A sprite animation define an animation which is a group of frames\r\n * An animation is a serie of rectangle on a spritesheet\r\n * @constructor\r\n * @class SpriteAnimation\r\n * @param length The number of frames\r\n * @param framerate The desired frame rate.\r\n */\r\nAtlantis.SpriteAnimation = function (length, framerate) {\r\n    this.rectangles = new Array(length);\r\n    this.framerate = framerate;\r\n    this.index = 0;\r\n    this.max = length;\r\n    this.elapsedTime = 0;\r\n    this.length = length;\r\n};\r\n\r\n/**\r\n * Gets the next available frame of the animation.\r\n * @method next\r\n * @return {Atlantis.Rectangle} Return the next frame of the animation.\r\n */\r\nAtlantis.SpriteAnimation.prototype.next = function () {\r\n    if (this.index >= this.rectangles.length) {\r\n        this.index = 0;\r\n    }\r\n    return this.rectangles[this.index];\r\n};\r\n\r\n/**\r\n * Update animation index relative to time.\r\n * @method update\r\n */\r\nAtlantis.SpriteAnimation.prototype.update = function (gameTime) {\r\n    this.elapsedTime += gameTime.getElapsedTime(); \r\n  \r\n    if (this.elapsedTime > this.framerate) {\r\n        this.index++;\r\n        this.elapsedTime = 0;\r\n    }\r\n};\r\n\r\n/**\r\n * A SpriteAnimator is a class that is used to play sprite animations.\r\n * A sprite has many animation that are stored in a dictionary[name] => spriteAnimation\r\n * @constructor\r\n * @class SpriteAnimator\r\n */\r\nAtlantis.SpriteAnimator = function () {\r\n    // Dictionary <string, SpriteAnimation>\r\n    this.animations = {};\r\n    this.spriteWidth = 0;\r\n    this.spriteHeight = 0;\r\n    this.textureWidth = 0;\r\n    this.textureHeight = 0;\r\n    this.nbSpriteX = 0;\r\n    this.nbSpriteY = 0;\r\n    this.spritesheetLength = 0;\r\n    this.currentAnimationName = \"\";\r\n};\r\n\r\n/**\r\n * Initialize the animator\r\n * @method initialize\r\n * @param {Number} animationWidth The width of a frame.\r\n * @param {Number} animationHeight The height of a frame.\r\n * @param {Number} textureWidth The width of the texture (spritesheet).\r\n * @param {Number} textureHeight The height of the texture (spritesheet).\r\n */\r\nAtlantis.SpriteAnimator.prototype.initialize = function(animationWidth, animationHeight, textureWidth, textureHeight) {\r\n    this.animations = {};\r\n    this.spriteWidth = animationWidth;\r\n    this.spriteHeight = animationHeight;\r\n    this.textureWidth = textureWidth;\r\n    this.textureHeight = textureHeight;\r\n    this.nbSpriteX = this.textureWidth / this.spriteWidth;\r\n    this.nbSpriteY = this.textureHeight / this.spriteHeight;\r\n    this.spritesheetLength = this.nbSpriteX * this.nbSpriteY; \r\n    this.currentAnimationName = \"\";\r\n};\r\n\r\n/**\r\n * Add an animation to the animator.\r\n * @method add\r\n * @param {String} name The name of the animation.\r\n * @param {Array} framesIndex An array of indices that compose the animation on the spritesheet.\r\n * @param {Number} framerate The desired framerate for this animation.\r\n */\r\nAtlantis.SpriteAnimator.prototype.add = function (name, framesIndex, frameRate) {\r\n    var animationLength = framesIndex.length;\r\n\r\n    var animation = new Atlantis.SpriteAnimation(animationLength, frameRate);\r\n\r\n    if (framesIndex instanceof Atlantis.Rectangle) {\r\n        animation.rectangles = framesIndex;\r\n    }\r\n    else {\r\n        for (var i = 0; i < animationLength; i++) {\r\n            var x = framesIndex[i] % this.nbSpriteX;\r\n            var y = Math.floor(framesIndex[i] / this.nbSpriteX);\r\n\r\n            if (y > 0) {\r\n                x = x % (this.nbSpriteX * y);\r\n            }\r\n            else {\r\n                x = x % this.nbSpriteX; \r\n            }\r\n\r\n            animation.rectangles[i] = new Atlantis.Rectangle(x * this.spriteWidth, y * this.spriteHeight, this.spriteWidth, this.spriteHeight);\r\n        }\r\n    }\r\n    \r\n    this.animations[name] = animation;\r\n};\r\n\r\n/**\r\n * Play an animation.\r\n * @method play\r\n * @param {String} animationName The name of the animation to play.\r\n */\r\nAtlantis.SpriteAnimator.prototype.play = function (animationName) {\r\n    this.currentAnimationName = animationName;\r\n\r\n    return this.animations[animationName].next();  \r\n};\r\n\r\n/**\r\n *\r\n * @method getCurrentAnimation\r\n */\r\nAtlantis.SpriteAnimator.prototype.getCurrentAnimation = function () {\r\n    if (this.currentAnimationName !== \"\") {\r\n        return this.animations[this.currentAnimationName];\r\n    }\r\n    return null;\r\n};\r\n\r\n/**\r\n *\r\n * @method update\r\n * @param gameTime\r\n * @param lastDistance\r\n */\r\nAtlantis.SpriteAnimator.prototype.update = function (gameTime, lastDistance) {\r\n    if (this.currentAnimationName !== \"\") {\r\n        this.animations[this.currentAnimationName].update(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method checkForIDLEAnimation\r\n */\r\nAtlantis.SpriteAnimator.prototype.checkForIDLEAnimation = function (lastDirection) {\r\n    if (this.currentAnimationName !== \"\" && lastDirection.x == 0 && lastDirection.y == 0) {\r\n        return this.animations[this.currentAnimationName].rectangles[0];\r\n    }  \r\n    return null;\r\n};\r\n\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A camera used in a 2D scene to manage scrolling\r\n * @class Camera2D\r\n * @constructor\r\n * @param {Number} x The position on X of the camera.\r\n * @param {Number} y The position on Y of the camera.\r\n * @param {Number} width The size of the camera.\r\n * @param {Number} height The size of the camera.\r\n */\r\nAtlantis.Camera2D = function (x, y, width, height) {\r\n    this._follow = null;\r\n    this.set(x, y, width, height);\r\n};\r\n\r\nAtlantis.Camera2D.prototype.set = function (x, y, width, height) {\r\n    this.x = +x|0;\r\n    this.y = +y|0;\r\n    this.viewport = new Atlantis.Rectangle(0, 0, +width|0 > 0 ? +width : Atlantis.screen.width, +height|0 > 0 ? +height : Atlantis.screen.height);\r\n    this._center = new Atlantis.Vector2(Atlantis.screen.widthPerTwo, Atlantis.screen.heightPerTwo);\r\n};\r\n\r\nAtlantis.Camera2D.prototype.reset = function () {\r\n    this.x = 0;\r\n    this.y = 0;\r\n};\r\n\r\nAtlantis.Camera2D.onResize = function (width, height) {\r\n    this._center = new Atlantis.Vector2(width >> 1, height >> 1);\r\n};\r\n \r\n/**\r\n * Follow a sprite\r\n * @method follow\r\n * @param {Atlantis.Sprite} sprite A sprite to follow.\r\n */\r\nAtlantis.Camera2D.prototype.follow = function (sprite) {\r\n    this._follow = sprite;\r\n};\r\n\r\n/**\r\n * Gets the position of the sprite on screen relative to the camera position.\r\n * @method getSpritePosition\r\n * @return {Object} Return a structure with x and y coordinates.\r\n */\r\nAtlantis.Camera2D.prototype.getSpritePosition = function () { // FIXME rename to getPosition\r\n    if (this._follow) {\r\n        return this.getRelativePosition(this._follow);\r\n    }\r\n    return { x: this.x, y: this.y };\r\n};\r\n\r\n/**\r\n * Gets the relative position of a sprite relative to the camera position.\r\n * @method getRelativePosition\r\n * @param {Atlantis.Sprite} sprite The sprite to use.\r\n * @return {Object} Return a structure with x and y coordinates.\r\n */\r\nAtlantis.Camera2D.prototype.getRelativePosition = function (sprite) {\r\n    return { x: sprite.rectangle.x + this.x, y: sprite.rectangle.y + this.y };\r\n};\r\n\r\n/**\r\n * Update the camera position. If a sprite is attached to it, its position is managed by the camera.\r\n * @method update\r\n */\r\nAtlantis.Camera2D.prototype.update = function () {   \r\n    if (this._follow) {\r\n        var diffX = (this._follow.rectangle.x - this._follow.lastPosition.x),\r\n            diffY = (this._follow.rectangle.y - this._follow.lastPosition.y),\r\n            targX = this._follow.rectangle.x,\r\n            targY = this._follow.rectangle.y;\r\n        \r\n        if ((this._follow.rectangle.x >= this._center.x) && (this.x < this.viewport.getRight() - Atlantis.screen.width) ||\r\n            (this._follow.rectangle.x <= this._center.x) && (this.x > this.viewport.x)) {\r\n            this.x += diffX;\r\n            targX = this._center.x;\r\n        }\r\n            \r\n        if ((this._follow.rectangle.y >= this._center.y) && (this.y < this.viewport.getBottom() - Atlantis.screen.height) ||\r\n            (this._follow.rectangle.y <= this._center.y) && (this.y > this.viewport.y)) {\r\n            this.y += diffY;\r\n            targY = this._center.y;\r\n        }\r\n        \r\n        this._follow.move(targX, targY); \r\n    }\r\n    \r\n    if (this.x < this.viewport.x) {\r\n        this.x = this.viewport.x;\r\n    }\r\n    \r\n    else if (this.x + Atlantis.screen.width > this.viewport.getRight()) {\r\n        this.x = this.viewport.getRight() - Atlantis.screen.width;\r\n    }\r\n    \r\n    else if (this.y < this.viewport.y) {\r\n        this.y = this.viewport.y;\r\n    }\r\n    \r\n    if (this.y + Atlantis.screen.height > this.viewport.getBottom()) {\r\n        this.y = this.viewport.getBottom() - Atlantis.screen.height;\r\n    }\r\n};\n /**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.SpriteCollisionType = {\r\n    None: 0, Stop: 1\r\n};\r\n\r\nAtlantis.Sprite = function (_textureName, params) {\r\n    this.name = \"GameObject\";\r\n    this.enabled = true;\r\n    this.visible = true;\r\n    this.rectangle = new Atlantis.Rectangle();\r\n    this.collisionType = Atlantis.SpriteCollisionType.None;\r\n\r\n    this._texture = null;\r\n    this._dead = false;\r\n    this._initialized = false;\r\n    this.sourceRectangle = null;\r\n    this._textureName = (typeof(_textureName) === \"string\") ? _textureName : \"\";\r\n\r\n    this.color = null;\r\n    this.rotation = 0;\r\n    this.scale = new Atlantis.Vector2(1, 1);\r\n    this.origin = new Atlantis.Vector2();\r\n    this.layerDepth = Atlantis.Sprite.Counter++;\r\n    this.parent = null;\r\n\r\n    this.direction = new Atlantis.Vector2();\r\n    this.lastPosition = new Atlantis.Vector2();\r\n    this.lastDistance = new Atlantis.Vector2();\r\n\r\n    // Some physics\r\n    this.acceleration = new Atlantis.Vector2();\r\n    this.velocity = new Atlantis.Vector2();\r\n    this.maxVelocity = 1;\r\n\r\n    // Rectangle and viewport\r\n    this.viewport = new Atlantis.Rectangle(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\r\n    // Force the sprite to stay in screen or to enable across screen\r\n    this.insideScreen = false;\r\n    this.acrossScreen = false;\r\n\r\n    // Animation\r\n    this.spriteAnimator = new Atlantis.SpriteAnimator();\r\n\tthis.hasAnimations = false;\r\n    this.deleteIf = null;\r\n\r\n    var that = this;\r\n\r\n    /**\r\n    * Active or not the sprite.\r\n    * @property active\r\n    * @type {Boolean}\r\n    * @default true\r\n    */\r\n    Atlantis._createProperty(this, \"active\", \r\n        function () { return that.visible && that.enabled; },\r\n        function (value) { \r\n            that.enabled = value;\r\n            that.visible = value;\r\n        });\r\n\r\n    /**\r\n    * Indicate if the sprite is alive or dead.\r\n    * @property alive\r\n    * @type {Boolean}\r\n    * @default true\r\n    */\r\n    Atlantis._createProperty(this, \"alive\", \r\n        function () { return !that._dead; },\r\n        function (value) {\r\n            if (value && that._dead) {\r\n                that.revive();\r\n            }\r\n            else if (!value && !that._dead) {\r\n                that.kill();\r\n            }\r\n        })\r\n\r\n    /**\r\n    * Position on X axis.\r\n    * @property x\r\n    * @type {Number}\r\n    * @default 0\r\n    */\r\n    Atlantis._createProperty(this, \"x\", \r\n        function () { return that.rectangle.x; },\r\n        function (value) {\r\n            that.lastPosition.x = that.rectangle.x;\r\n            that.rectangle.x = value; \r\n            that.direction.x = that.rectangle.x - that.lastPosition.x;\r\n        });\r\n\r\n    /**\r\n    * Position on Y axis.\r\n    * @property y\r\n    * @type {Boolean}\r\n    * @default 0\r\n    */\r\n    Atlantis._createProperty(this, \"y\", \r\n        function () { return that.rectangle.y; },\r\n        function (value) {\r\n            that.lastPosition.y = that.rectangle.y;\r\n            that.rectangle.y = value; \r\n            that.direction.y = that.rectangle.x - that.lastPosition.y;\r\n        });\r\n\r\n    /**\r\n    * Sprite's width.\r\n    * @property width\r\n    * @type {Number}\r\n    * @default 0\r\n    */\r\n    Atlantis._createProperty(this, \"width\", \r\n        function () { return that.rectangle.width; },\r\n        function (value) { that.rectangle.width = value; });\r\n\r\n    /**\r\n    * Sprite's height.\r\n    * @property height\r\n    * @type {Number}\r\n    * @default 0\r\n    */\r\n    Atlantis._createProperty(this, \"height\", \r\n        function () { return that.rectangle.height; },\r\n        function (value) { that.rectangle.height = value; });\r\n\r\n    /**\r\n    * The name of the texture used by the sprite.\r\n    * @property _textureName\r\n    * @type {String}\r\n    * @default \"\"\r\n    */\r\n    Atlantis._createProperty(this, \"textureName\",\r\n        function () { return that._textureName; },\r\n        function (value) {\r\n            that._textureName = value;\r\n            that._initialized = false;\r\n        });\r\n\r\n    /**\r\n    * Sprite's texture.\r\n    * @property texture\r\n    * @type {Object}\r\n    * @default null\r\n    */\r\n    Atlantis._createProperty(this, \"texture\",\r\n        function () { return that._texture; },\r\n        function (value) {\r\n            that._texture = value;\r\n            if (that._texture) {\r\n                that.rectangle.setSize(that._texture.width, that._texture.height);\r\n                that._initialized = true;\r\n            }\r\n            else {\r\n                that.rectangle.setSize(0, 0);\r\n                that._initialized = false;\r\n            }\r\n        });\r\n\r\n    var params = params || {};\r\n    for (var i in params) {\r\n        this[i] = params[i];\r\n    }\r\n};\r\n\r\nAtlantis.Sprite.Counter = 0;\r\n\r\n/**\r\n *\r\n * @method initialize\r\n * @param {Function} callback A callback called when the sprite is fully loaded.\r\n */\r\nAtlantis.Sprite.prototype.initialize = function (callback) {\r\n    this.viewport = new Atlantis.Rectangle(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n    \r\n    if (this._textureName != \"\" && this._initialized === false) {\r\n        var callback = (typeof(callback) === \"function\") ? callback : function () { };\r\n        var that = this;\r\n\r\n        this._texture = Atlantis.app.content.load(this._textureName, function (image) {\r\n            that.rectangle.width = image.width;\r\n            that.rectangle.height = image.height;\r\n\r\n            that._initialized = true;\r\n\r\n            callback(that);\r\n        });\r\n    }\r\n    else if (callback) {\r\n        callback(this);\r\n    }\r\n};\r\n\r\nAtlantis.Sprite.prototype.copy = function (sprite) {\r\n    this._dead = sprite._dead;\r\n    this._textureName = sprite._textureName;\r\n    this.visible = sprite.visible;\r\n    this.enabled = sprite.enabled;\r\n    this._initialized = sprite._initialized;\r\n    this._texture = sprite._texture;\r\n    this.rectangle = sprite.rectangle;\r\n    this.sourceRectangle = sprite.sourceRectangle;\r\n    this.hasAnimations = sprite.hasAnimations;\r\n    this.spriteAnimator = sprite.spriteAnimator;\r\n};\r\n\r\n/**\r\n *\r\n * @method collides\r\n * @return {Boolean} Return true if collides otherwise return false.\r\n */\r\nAtlantis.Sprite.prototype.collides = function (sprite) {\r\n    var collides = this.rectangle.intersects(sprite.rectangle);\r\n    \r\n    if (sprite.collisionType === Atlantis.SpriteCollisionType.Stop) {\r\n        sprite.move(sprite.lastPosition.x, sprite.lastPosition.y);\r\n    }\r\n\r\n    return collides;\r\n};\r\n\r\n/**\r\n * Kill the sprite and put it in a cache so that it can be recycled if needed.\r\n * @method kill\r\n */\r\nAtlantis.Sprite.prototype.kill = function () {\r\n    this.enabled = false;\r\n    this.visible = false;\r\n    this._dead = true;\r\n};\r\n\r\n/** \r\n * Revive the Sprite and remove it from the recycle cache.\r\n * @method revive\r\n */\r\nAtlantis.Sprite.prototype.revive = function () {\r\n    this.enabled = true;\r\n    this.visible = true;\r\n    this._dead = false;\r\n};\r\n\r\n/**\r\n*\r\n* @method prepareAnimation\r\n* @param\r\n* @param\r\n*/\r\nAtlantis.Sprite.prototype.prepareAnimation = function (width, height) {\r\n    if (this._initialized) { \r\n        this.hasAnimations = true;\r\n        var animationWidth = width;\r\n        var animationHeight = height || animationWidth;\r\n        this.spriteAnimator.initialize(animationWidth, animationHeight, this._texture.width || this.rectangle.width, this._texture.height || this.rectangle.height);\r\n        this.rectangle.width = animationWidth;\r\n        this.rectangle.height = animationHeight;\r\n    }\r\n};\r\n\r\n/**\r\n*\r\n* @method addAnimation\r\n* @param\r\n* @param\r\n* @param\r\n*/\r\nAtlantis.Sprite.prototype.addAnimation = function (name, indices, frameRate, twoIndices) {\r\n    if (this._initialized) {\r\n        if (twoIndices) {\r\n            var ids = [];\r\n            for (var i = indices[0]; i <= indices[1]; i++) {\r\n                ids.push(i);\r\n            }\r\n\r\n            indices = ids;\r\n        }\r\n        \r\n        this.spriteAnimator.add(name, indices, frameRate);\r\n        this.sourceRectangle = this.spriteAnimator.animations[name].rectangles[0];\r\n    }\r\n};\r\n\r\n/**\r\n*\r\n* @method play\r\n* @param\r\n*/\r\nAtlantis.Sprite.prototype.play = function (animationName) {\r\n    if (this._initialized) {\r\n        this.sourceRectangle = this.spriteAnimator.play(animationName);\r\n    }\r\n};\r\n\r\n/**\r\n * Function called before update process.\r\n * @method preUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.preUpdate = function (gameTime) { }\r\n\r\n/**\r\n * Update process.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.update = function (gameTime) {\r\n    // Determine the last distance and direction\r\n    this.lastDistance.x = this.rectangle.x - this.lastPosition.x;\r\n    this.lastDistance.y = this.rectangle.y - this.lastPosition.y;\r\n\r\n    // Determine the last position\r\n    this.lastPosition.x = this.rectangle.x;\r\n    this.lastPosition.y = this.rectangle.y;\r\n\r\n    // Update physics\r\n    this.rectangle.x += this.velocity.x;\r\n    this.rectangle.y += this.velocity.y;\r\n    this.velocity.multiply(this.maxVelocity);\r\n    this.velocity.add(this.acceleration);\r\n\r\n    // Update animation\r\n    if (this.hasAnimations && this._initialized) {\r\n        this.spriteAnimator.update(gameTime);\r\n        if (this.lastDistance.x == 0 && this.lastDistance.y == 0 && this.spriteAnimator.currentAnimationName !== \"\") {\r\n            this.sourceRectangle = this.spriteAnimator.getCurrentAnimation().rectangles[0];   \r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n* Method called after the update process.\r\n* @method postUpdate\r\n* @param {Atlantis.GameTime} gameTime\r\n*/\r\nAtlantis.Sprite.prototype.postUpdate = function () {\r\n    this.direction.x = this.rectangle.x - this.lastPosition.x;\r\n    this.direction.y = this.rectangle.y - this.lastPosition.y;\r\n\r\n    // Force the sprite to stay inside screen\r\n    if (this.insideScreen) {\r\n        if (this.rectangle.x < this.viewport.x) {\r\n            this.rectangle.x = this.viewport.x;\r\n            this.velocity.multiply(0);\r\n        }\r\n        else if (this.rectangle.getRight() > this.viewport.width) {\r\n            this.rectangle.x = this.viewport.width - this.rectangle.width;\r\n            this.velocity.multiply(0);\r\n        }\r\n\r\n        if (this.rectangle.y < this.viewport.y) {\r\n            this.rectangle.y = this.viewport.y;\r\n            this.velocity.multiply(0);\r\n        }\r\n        else if (this.rectangle.getBottom() > this.viewport.height) {\r\n            this.rectangle.y = this.viewport.height - this.rectangle.height;\r\n            this.velocity.multiply(0);\r\n        }\r\n    }\r\n\r\n    // The sprite move accross the screen\r\n    else if (this.acrossScreen) {\r\n        if (this.rectangle.getRight() < this.viewport.x) {\r\n            this.rectangle.x = this.viewport.width\r\n        }\r\n        else if (this.rectangle.x > this.viewport.width) {\r\n            this.rectangle.x = this.viewport.x;\r\n        }\r\n\r\n        if (this.rectangle.getBottom() < this.viewport.y) {\r\n            this.rectangle.y = this.viewport.height;\r\n        }\r\n        else if (this.rectangle.y > this.viewport.height) {\r\n            this.rectangle.y = this.viewport.y;\r\n        }\r\n    }\r\n\r\n    if (this.deleteIf) {\r\n        if (this.deleteIf(this)) {\r\n            this.kill();\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n* Draw the sprite on screen.\r\n* @method draw\r\n* @param {Atlantis.SpriteBatch} spriteBatch\r\n*/\r\nAtlantis.Sprite.prototype.draw = function (spriteBatch) { \r\n    if (this._initialized) {\r\n        spriteBatch.draw(this._texture, this.rectangle, this.sourceRectangle, this.color, this.rotation, this.origin, this.scale, this.effect, this.layerDepth);\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method setSize\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.setSize = function (width, height) {\r\n    this.rectangle.width = width || this.rectangle.width;\r\n    this.rectangle.height = height || this.rectangle.height;\r\n};\r\n\r\nAtlantis.Sprite.prototype.move = function (x, y) {\r\n    this.rectangle.x = x;\r\n    this.rectangle.y = y;\r\n    this.lastPosition.x = x;\r\n    this.lastPosition.y = y;\r\n};\r\n\r\nAtlantis.Sprite.prototype.translate = function (x, y) {\r\n    this.rectangle.x += x;\r\n    this.rectangle.y += y;\r\n};\r\n\r\nAtlantis.Sprite.prototype.getBoundingRect = function () {\r\n    return this.rectangle;\r\n};\n /**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.SpriteText = function (spriteFont, text, params) {\r\n\tAtlantis.Sprite.call(this, undefined, params);\r\n\tthis.spriteFont = spriteFont;\r\n\tthis.text = text;\r\n};\r\n\r\nAtlantis.SpriteText.prototype = Object.create(Atlantis.Sprite.prototype);\r\n\r\nAtlantis.SpriteText.prototype.initialize = function () {\r\n\tvar size = this.measureText();\r\n\tthis.rectangle.width = size.width;\r\n\tthis.rectangle.height = this.spriteFont.size;\r\n};\r\n\r\nAtlantis.SpriteText.prototype.preUpdate = function () {};\r\n\r\nAtlantis.SpriteText.prototype.update = function () {};\r\n\r\nAtlantis.SpriteText.prototype.postUpdate = function () {};\r\n\r\nAtlantis.SpriteText.prototype.draw = function (spriteBatch) { \r\n    spriteBatch.drawString(this.spriteFont, this.text, this.rectangle, this.color, this.rotation, this.origin, this.scale, this.effect, this.layerDepth);\r\n};\r\n\r\nAtlantis.SpriteText.prototype.measureText = function (text) {\r\n    var context = Atlantis.app.game.graphicsDevice.getBackBuffer().getContext();\r\n    var oldFont = context.font;\r\n    context.font = this.spriteFont.getFont();\r\n\tvar size = context.measureText(text || this.text);\r\n    context.font = oldFont;\r\n    return size;\r\n};\r\n\r\nAtlantis.SpriteText.prototype.measureTextHeight = function (text, maxWidth, lineHeight) {\r\n\tvar text = text || this.text;\r\n    var maxWidth = maxWidth || this.width;\r\n    var words = text.split(\" \");\r\n    var line = \"\";\r\n    var testLine = \"\";\r\n    var y = lineHeight || this.spriteFont.size;\r\n    var metrics = null;\r\n    var testWidth = 0;\r\n    var context = Atlantis.app.game.graphicsDevice.getBackBuffer().getContext();\r\n\r\n    for (var n = 0; n < words.length; n++) {\r\n        testLine = line + words[n] + ' ';\r\n        metrics = context.measureText(testLine);\r\n        testWidth = metrics.width;\r\n\r\n        if (testWidth > maxWidth && n > 0) {\r\n            line = words[n] + ' ';\r\n            y += lineHeight;\r\n        }\r\n        else {\r\n            line = testLine;\r\n        }\r\n    }\r\n\r\n    return y;\r\n};\n /**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/** \r\n * A collection that initialize, load, update and draw _sprites.\r\n * @class SpriteGroup\r\n * @extends Sprite\r\n * @constructor\r\n */\r\nAtlantis.SpriteGroup = function () {\r\n\tAtlantis.Sprite.call(this);\r\n    this._initialized = false;\r\n\tthis._sprites = [];\t\r\n\tthis._length = 0;\r\n\tthis._needBoundingCompute = true;\r\n\r\n\tvar that = this;\r\n\tAtlantis._createProperty(this, \"x\", \r\n        function () { return that.rectangle.x; },\r\n        function (value) { \r\n        \tvar diff = value - that.rectangle.x;\r\n        \tthat.rectangle.x = value; \r\n        \tfor (var i = 0, l = that._sprites.length; i < l; i++) {\r\n        \t\tthat._sprites[i].translate(diff, 0);\r\n        \t}\r\n        \tthat._needBoundingCompute = true;\r\n        });\r\n\r\n    Atlantis._createProperty(this, \"y\", \r\n        function () { return that.rectangle.y; },\r\n        function (value) {\r\n        \tvar diff = value - that.rectangle.y;\r\n        \tthat.rectangle.x = value; \r\n        \tfor (var i = 0, l = that._sprites.length; i < l; i++) {\r\n        \t\tthat._sprites[i].translate(0, diff);\r\n        \t}\r\n        \tthat._needBoundingCompute = true;\r\n        });\r\n};\r\nAtlantis.SpriteGroup.prototype = Object.create(Atlantis.Sprite.prototype);\r\n\r\n/**\r\n * Load assets of all members.\r\n * @method initialize\r\n * @param {Function} callback\r\n */\r\nAtlantis.SpriteGroup.prototype.initialize = function (callback) {\r\n\tvar callback = (typeof(callback) === \"function\") ? callback : function () {};\r\n\t\r\n\tif (!this._initialized) {\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tthis._sprites[i].initialize();\r\n\t\t}\r\n\t\tthis._initialized = true;\r\n\t\tcallback(this);\r\n\t}\r\n\telse {\r\n\t\tcallback(this);\r\n\t}\r\n};\r\n\r\n/**\r\n * Update logic of all members.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.SpriteGroup.prototype.update = function (gameTime) {\r\n\tAtlantis.Sprite.prototype.update.call(this, gameTime);\r\n\r\n\tif (!this._dead && this.enabled) {\r\n\t\t// Update\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n            if (this._sprites[i] !== null && this._sprites[i].alive && this._sprites[i].enabled) {\r\n            \tthis._sprites[i].preUpdate(gameTime);\r\n\t\t    \tthis._sprites[i].update(gameTime);\r\n    \t\t    this._sprites[i].postUpdate(gameTime);\r\n            }\r\n    \t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Function called before update process.\r\n * @method preUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.SpriteGroup.prototype.postUpdate = function (gameTime) { }\r\n\r\n/**\r\n * Draw all members on screen.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch}\r\n */\r\nAtlantis.SpriteGroup.prototype.draw = function (spriteBatch) {\r\n\tif (this.visible) {\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n            if (this._sprites[i] !== null && this._sprites[i].alive && this._sprites[i].visible) {\r\n    \t\t     this._sprites[i].draw(spriteBatch);\r\n            }\r\n    \t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Clear the collection.\r\n * @method clear\r\n */\r\nAtlantis.SpriteGroup.prototype.clear = function () {\r\n    this._sprites.length = 0;\r\n    this._length = 0;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.collides = function (sprite) {\r\n\tif (this.collidesWithGroup(sprite)) {\r\n\t\tvar i = 0,\r\n\t\t\tcollides = false;\r\n\r\n\t\twhile (i < this._length && collides === false) {\r\n\t\t\tcollides = (sprite.collides(this._sprites[i])) ? true : collides;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tif (collides && sprite.collisionType === Atlantis.SpriteCollisionType.Stop) {\r\n\t\t\tsprite.move(sprite.lastPosition.x, sprite.lastPosition.y);\r\n\t\t}\r\n\r\n\t\treturn collides;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\n/**\r\n *\r\n * @method collidesWithGroup\r\n * @param {Atlantis.Sprite} sprite\r\n * @param {Boolean} computeBoundingRect\r\n * @return {Boolean}\r\n */\r\nAtlantis.SpriteGroup.prototype.collidesWithGroup = function (sprite, computeBoundingRect) {\r\n\tif (computeBoundingRect || this._needBoundingCompute) {\r\n\t\tthis.computeBoundingRect();\r\n\t}\r\n\treturn this.rectangle.intersects(sprite.rectangle);\r\n};\r\n\r\n/**\r\n * Compute the bounding size of the group.\r\n * @method computeBoundingSize\r\n */\r\nAtlantis.SpriteGroup.prototype.computeBoundingRect = function () {\r\n\tthis.rectangle.setSize(0, 0);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tthis.rectangle.width = Math.max(this.rectangle.getRight(), this._sprites[i].rectangle.getRight()) - this.rectangle.x;\r\n\t\tthis.rectangle.height = Math.max(this.rectangle.getBottom(), this._sprites[i].rectangle.getBottom()) - this.rectangle.y;\r\n\t}\r\n\r\n\tthis._needBoundingCompute = false;\r\n};\r\n\r\n/**\r\n * Count the number of living sprite in the group.\r\n * @method countLiving\r\n * @return {Number} Return the number of living sprites.\r\n */\r\nAtlantis.SpriteGroup.prototype.countLiving = function () {\r\n\tvar livings = 0;\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tlivings += (this._sprites[i] !== null && this._sprites[i].alive) ? 1 : 0;\r\n\t}\r\n\r\n\treturn livings;\r\n};\r\n\r\n/**\r\n * Count the number of dead sprite in the group.\r\n * @method countDead\r\n * @return {Number} Return the number of dead sprites.\r\n */\r\nAtlantis.SpriteGroup.prototype.countDead = function () {\r\n\tvar deads = 0;\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tdeads += (this._sprites[i] !== null && !this._sprites[i].alive) ? 1 : 0;\r\n\t}\r\n\r\n\treturn deads;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.size = function () {\r\n\treturn this._length;\r\n};\r\n\r\n/** \r\n * @method forEach\r\n * @param {Function} callback\r\n */\r\nAtlantis.SpriteGroup.prototype.forEach = function (callback) {\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null && this._sprites[i].alive) {\r\n\t\t\tcallback(this._sprites[i], i);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Gets an sprite from the group.\r\n * @method get\r\n * @param {Number} index The index of the sprite on the group.\r\n */\r\nAtlantis.SpriteGroup.prototype.get = function (index) {\r\n\tvar sprite = null;\r\n\r\n\tif (index > -1 && index < this._sprites.length) {\r\n\t\tsprite = this._sprites[index];\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first dead sprite if available.\r\n * @method getFirstDead\r\n * @return {Atlantis.Sprite} Return the first killed sprite otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstDead = function () {\r\n\tvar i = 0,\r\n\t\tsprite = null;\r\n\r\n\twhile (i < this._length && sprite === null) {\r\n\t\tsprite = (!this._sprites[i].alive) ? this._sprites[i] : sprite;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first alive sprite if available.\r\n * @method getFirstAlive\r\n * @return {Atlantis.Sprite} Return the first alive sprite, otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstAlive = function () {\r\n\tvar i = 0,\r\n\t\tsprite = null;\r\n\r\n\twhile (i < this._length && sprite === null) {\r\n\t\tsprite = (this._sprites[i].alive) ? this._sprites[i] : sprite;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first null index.\r\n * @method getFirstNull\r\n * @return {Number} Return the index of the first null element in the group otherwise return -1.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstNull = function () {\r\n\tvar index = -1,\r\n\t\ti = 0;\r\n\r\n\twhile (i < this._length && index === -1) {\r\n\t\tindex = (this._sprites[i] === null) ? i : index;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn index;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.kill = function () {\r\n\tAtlantis.Sprite.prototype.kill.call(this);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null) {\r\n\t\t\tthis._sprites[i].kill();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.revive = function () {\r\n\tAtlantis.Sprite.prototype.revive.call(this);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null) {\r\n\t\t\tthis._sprites[i].revive();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Add an sprite to the group.\r\n * @method add\r\n * @param {Atlantis.Sprite} sprite The sprite to add.\r\n */\r\nAtlantis.SpriteGroup.prototype.add = function (sprite) {\r\n\tif (sprite instanceof Atlantis.Sprite && this._sprites.indexOf(sprite) === -1) {\r\n\t\tvar nullIndex = this.getFirstNull();\r\n\r\n\t\tif (nullIndex === -1) { \r\n\t\t\tthis._sprites.push(sprite);\r\n\t\t\tthis._length++;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._sprites[nullIndex] = sprite;\r\n\t\t}\r\n\r\n\t\tsprite.parent = this;\r\n\r\n\t\tif (this._initialized) {\r\n\t\t\tsprite.initialize();\r\n\t\t}\r\n\r\n\t\tthis._needBoundingCompute = true;\r\n\t}\r\n};\r\n\r\n/**\r\n * Remove a sprite from the group at the position.\r\n * @method removeAt\r\n * @param {Number} index The index of the sprite to remove.\r\n * @param {Boolean} splice Whether the object should be cut from the array entirely or not.\r\n */\r\nAtlantis.SpriteGroup.prototype.removeAt = function (index, splice) {\r\n\tvar result = null;\r\n\r\n\tif (this._sprites[index]) {\r\n\t\tresult = this._sprites[index];\r\n\t\tresult.parent = null;\r\n\r\n\t\tif (splice) {\r\n\t\t\tthis._sprites.splice(index, 1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._sprites[index] = null;\r\n\t\t}\r\n\r\n\t\tthis._length--;\r\n\t\tthis._needBoundingCompute = true;\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * remove a sprite from the group.\r\n * @method remove\r\n * @param {Atlantis.Sprite} sprite The sprite to remove.\r\n * @param {Boolean} splice Whether the object should be cut from the array entirely or not.\r\n */\r\nAtlantis.SpriteGroup.prototype.remove = function (sprite, splice) {\r\n\tvar index = this._sprites.indexOf(sprite);\r\n\treturn this.removeAt(index, splice);\r\n};\r\n\r\n/** \r\n * Replace a sprite by another.\r\n * @methode replace\r\n * @param {Atlantis.Sprite} oldSprite The current sprite of this group that must be replaced.\r\n * @param {Atlantis.Sprite} newSprite The new sprite to replace the old sprite.\r\n * @return {Atlantis.Sprite} Return the new sprite if the replace operation success, otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.replace = function (oldSprite, newSprite) {\r\n\tvar index = this._sprites.indexOf(oldSprite);\r\n\r\n\tif (index > -1) {\r\n\t\toldSprite.parent = null;\r\n\t\tnewSprite.parent = this;\r\n\t\tthis._sprites[index] = newSprite;\r\n\t\tthis._needBoundingCompute = true;\r\n\r\n\t\treturn newSprite;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nAtlantis.SpriteGroup.toArray = function () {\r\n\tvar sprites = [];\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tsprites.push(this._sprites[i]);\r\n\t}\r\n\r\n\treturn sprites;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * Define the type of a layer\r\n * - Tiles\r\n * - Background\r\n * - Objects\r\n * @class TilemapLayerType\r\n * @static\r\n */\r\nAtlantis.TilemapLayerType = {\r\n    Tiles: \"tilelayer\",\r\n    Background: \"imagelayer\",\r\n    Objects: \"objectlayer\"\r\n};\r\n\r\n/**\r\n * Define the type of projection of the map\r\n * - Orthogonal (2D)\r\n * - Isometric (2D Iso)\r\n * @class TilemapProjection\r\n * @static\r\n */\r\nAtlantis.TilemapProjection = {\r\n    Orthogonal: \"orthogonal\",\r\n    Isometric: \"isometric\"\r\n};\r\n\r\n/**\r\n * Represent a tileset which is an image that contains many other images named tiles.\r\n * @class Tileset\r\n * @constructor\r\n * @param {Atlantis.Tileset|Object} tileset (optional) An object that contains all necessary data to construct a tileset.\r\n */\r\nAtlantis.Tileset = function (tileset) {\r\n    this.firstGID = +tileset.firstgid || 1;\r\n    this.id = Atlantis.Tileset.Counter++;\r\n    this.name = tileset.name || [\"Tileset_\", this.id].join(\"\");\r\n    this.texture = tileset.texture;\r\n    this.width = +tileset.imagewidth|0;\r\n    this.height = +tileset.imageheight|0;\r\n    this.margin = +tileset.margin|0;\r\n    this.padding = +tileset.spacing|0;\r\n    this.tileWidth = +tileset.tilewidth|0;\r\n    this.tileHeight = +tileset.tileheight|0;\r\n    this.properties = tileset.properties || {};\r\n};\r\n\r\nAtlantis.Tileset.Counter = 0;\r\n\r\n/**\r\n * Represent a tilemap layer which contains a tileset or background.\r\n * @class TilemapLayer\r\n * @constructor\r\n * @param {Atlantis.TilemapLayer|Object} layer (optional) An object that contains all necessary data to construct a layer.\r\n */\r\nAtlantis.TilemapLayer = function (layer) {\r\n    var layer = layer || {};\r\n    this.id = Atlantis.TilemapLayer.Counter++\r\n\tthis.data = layer.data || [];\r\n\tthis.type = layer.type || Atlantis.TilemapLayer.Tiles;\r\n    this.visible = layer.visible;\r\n    this.opacity = +layer.opacity;\r\n    this.name = layer.name || [\"Layer_\", this.id].join(\"\");\r\n    this.width = +layer.width|0;\r\n\tthis.height = +layer.height|0;\r\n    this.offset = { \r\n        x: +layer.x|0, \r\n        y: +layer.y|0 \r\n    };\r\n    this.properties = layer.properties || {};\r\n    this.backgroundId = +layer.backgroundId || +this.properties.backgroundId || 0;\r\n    this.tilesetId = +layer.tilesetId || +this.properties.tilesetId || 0;\r\n};\r\n\r\nAtlantis.TilemapLayer.Counter = 0;\r\n\r\n/**\r\n * This class is responsible to store all data for drawing a tilemap.\r\n * A tilemap is composed of layers, tilesets and backgrounds.\r\n * @class Tilemap\r\n * @constructor\r\n * @param {Atlantis.Tilemap|Object} tilemap (optional) An object that contains tilemap data.\r\n */\r\nAtlantis.Tilemap = function (tilemap) {\r\n    var tilemap = tilemap || {};\r\n    this.id = Atlantis.Tilemap.Counter++;\r\n    this.name = tilemap.name || [\"Tilemap_\", this.id].join(\"\");\r\n    this.version = +tilemap.version|0;\r\n    this.projection = tilemap.orientation || tilemap.projection || Atlantis.TilemapProjection.Orthogonal;\r\n\r\n    this.layers = tilemap.layers || [];\r\n    this.tilesets = tilemap.tilesets || [];\r\n    this.backgrounds = tilemap.backgrounds || [];\r\n    \r\n    this.width = +tilemap.width|0;\r\n    this.height = +tilemap.height|0;\r\n    this.tileWidth = +tilemap.tilewidth|0, \r\n    this.tileHeight = +tilemap.tileheight|0 \r\n    this.mapWidth = this.width * this.tileWidth;\r\n    this.mapHeight = this.height * this.tileHeight;\r\n    \r\n    this.properties = tilemap.properties || {};\r\n    this.loaded = (typeof(tilemap.loaded) !== \"undefined\") ? tilemap.loaded : false;\r\n    this.visible = (typeof(tilemap.visible) !== \"undefined\") ? tilemap.visible : true;\r\n\r\n    this._cacheTilesCanvas = [];\r\n};\r\n\r\nAtlantis.Tilemap.Counter = 0;\r\n\r\nAtlantis.Tilemap.prototype.update = function (camera) {\r\n    // TODO : Add collision detection \r\n};\r\n\r\n/**\r\n * Draw the tilemap if it's visible and loaded.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the tileset.\r\n * @param {Atlantis.Camera2D} camera The camera to use to defined what must be drawn.\r\n */\r\nAtlantis.Tilemap.prototype.draw = function (spriteBatch, camera) {\r\n    if (this.visible && this.loaded) {\r\n        for (var i = 0, l = this.layers.length; i < l; i++) {\r\n            if (this.layers[i].visible) {\r\n                if (this.layers[i].type === Atlantis.TilemapLayerType.Background) {\r\n                    this.drawBackground(spriteBatch, this.layers[i], this.backgrounds[this.layers[i].backgroundId])\r\n                }\r\n                else if (this.layers[i].type === Atlantis.TilemapLayerType.Tiles) {\r\n                    this.drawLayer(spriteBatch, camera, this.layers[i], this.tilesets[this.layers[i].tilesetId]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Draw the background with this defined offset\r\n * @method drawBackground\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the background.\r\n * @param {Atlantis.TilemapLayer} layer The layer to draw.\r\n * @param {Image|Canvas} background An image or canvas to draw as background.\r\n */\r\nAtlantis.Tilemap.prototype.drawBackground = function (spriteBatch, layer, background) {\r\n    spriteBatch.draw(background, { x: layer.offset.x, y: layer.offset.y });\r\n};\r\n\r\n/**\r\n * Draw tiles with the defined offset, spacing and margin\r\n * @method drawLayer\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the tileset.\r\n * @param {Atlantis.Camera2D} camera The camera to use to defined what must be drawn.\r\n * @param {Atlantis.TilemapLayer} layer The layer to draw.\r\n * @param {Atlantis.Tileset} The tileset to use for drawing the layer.\r\n */\r\nAtlantis.Tilemap.prototype.drawLayer = function (spriteBatch, camera, layer, tileset) { \r\n     var nbTileX = Math.floor((tileset.width - tileset.margin * 4) / tileset.tileWidth),\r\n         nbTileY = Math.floor((tileset.height - tileset.margin * 4) / tileset.tileHeight);\r\n   \r\n    // posX/Y   : Relative position to the camera\r\n    // start/End/X/Y : Start/End position for the render loop  \r\n    var posX = camera.x / this.tileWidth,\r\n        posY = camera.y / this.tileHeight\r\n        startX = Math.floor(posX),\r\n        startY = Math.floor(posY),\r\n        stopX = Math.min(Math.round((camera.x + Atlantis.screen.width) / tileset.tileWidth) + 1, layer.width),\r\n        stopY = Math.min(Math.round((camera.y + Atlantis.screen.height) / tileset.tileHeight) + 1, layer.height);\r\n\r\n    // Source rectangle values for drawing a tile.\r\n    var srcX = 0,\r\n        srcY = 0,\r\n        destX = 0,\r\n        destY = 0,\r\n        isoX = 0,\r\n        isoY = 0,\r\n        tileId = 0;\r\n    \r\n    for (var x = startX; x < stopX; x++) {\r\n        for (var y = startY; y < stopY; y++) {\r\n            tileId = layer.data[x + y * layer.width] - tileset.firstGID;\r\n\r\n            // To prevent negative source rectangle\r\n            if (tileId >= 0) {\r\n                srcX = tileId % nbTileX;\r\n                srcY = Math.floor(tileId / nbTileX);\r\n                srcX = (srcY > 0) ? (srcX % (nbTileX * srcY)) : (srcX % nbTileX);   \r\n                \r\n                destX = ((x + layer.offset.x) - posX) * this.tileWidth;\r\n                destY = ((y + layer.offset.y) - posY) * this.tileHeight;\r\n\r\n                if (this.projection === Atlantis.TilemapProjection.Isometric) {\r\n                    isoX = (destX / 2 - destY);\r\n                    isoY = (destX / 2 + destY) / 2;\r\n                    destX = isoX + Atlantis.screen.width / 2;\r\n                    destY = isoY;\r\n                }\r\n\r\n                spriteBatch.draw(tileset.texture, { \r\n                    x: destX, \r\n                    y: destY, \r\n                    width: this.tileWidth, \r\n                    height: this.tileHeight\r\n                }, \r\n                { \r\n                    x: tileset.margin + srcX * (tileset.tileWidth + tileset.padding), \r\n                    y: tileset.margin + srcY * (tileset.tileHeight + tileset.padding), \r\n                    width: tileset.tileWidth - tileset.padding, \r\n                    height: tileset.tileHeight - tileset.padding \r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Get a transformed position from isometric world coordinates to screen coordinates.\r\n * @method isoToScreen\r\n * @static\r\n * @param {Number} x The x coordinate on isometric world.\r\n * @param {Number} y The y coordinate on isometric world.\r\n * @return {Object} Return an object with transformed coordinates.\r\n */\r\nAtlantis.Tilemap.isoToScreen = function (x, y) {\r\n    return { x: (2 * y + x) / 2, y: (2 * y - x) / 2 };\r\n};\r\n\r\n/**\r\n * Get a transformed position from screen coordinates to iso coordinates.\r\n * @method screenToIso\r\n * @static\r\n * @param {Number} x The x coordinate on screen.\r\n * @param {Number} y The y coordinate on screen.\r\n * @return {Object} Return an object with transformed coordinates.\r\n */\r\nAtlantis.Tilemap.screenToIso = function (x, y) {\r\n    return { x: (x - y), y: (x + y) / 2 };\r\n};\r\n\r\n/**\r\n * Gets the tile index at the specified position.\r\n * @method getTileIdAt\r\n * @param {Number} layerIndex The index of the layer\r\n * @param {Number} x The position of the tile on X axis.\r\n * @param {Number} y The postion of the tile on Y axis.\r\n * @return {Number} Return the id of the tile at this position if exists, otherwise return 0.\r\n */\r\nAtlantis.Tilemap.prototype.getTileIdAt = function (layerIndex, x, y) {\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex];\r\n        var x = Math.floor(x / this.tileWidth);\r\n        var y = Math.floor(y / this.tileHeight);\r\n        return layer.data[x + y * layer.width];\r\n    }\r\n    \r\n    return 0;\r\n};\r\n\r\nAtlantis.Tilemap.prototype.getTileRectAt = function (layerIndex, x, y) {\r\n    var rect = { x: 0, y: 0, width: this.tileWidth, height: this.tileHeight };\r\n\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex];\r\n        rect.x = Math.floor(x / this.tileWidth);\r\n        rect.y = Math.floor(y / this.tileHeight);\r\n    }\r\n\r\n    return rect;\r\n};\r\n\r\n/**\r\n * Extract a tile from tileset and return a canvas element with the tile drawn in it.\r\n * It's usefull to do some tests, such as pixel perfect. \r\n * Note 1: that it's work with a scale different to 1.\r\n * Note 2: The extraction is done once, the result is stored in a cache, so you can safely call this method.\r\n * @method getTileAt\r\n * @param {Atlantis.Tileset} tileset The tileset to use to extract the tile.\r\n * @param {Number} layerIndex The index of the layer\r\n * @param {Number} x The position of the tile on X axis.\r\n * @param {Number} y The postion of the tile on Y axis.\r\n * @return {HTMLCanvas} Return a canvas element of the specified tile if exists, otherwise return null.\r\n */\r\nAtlantis.Tilemap.prototype.getTileAt = function (tileset, layerIndex, x, y) {\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex],\r\n            tileId = this.getTileIdAt(layerIndex, x, y),\r\n            cacheId = [layer.id, \"_\", tileset.id, \"_\", tileId].join(\"\");\r\n\r\n        if (!this._cacheTilesCanvas[cacheId]) {\r\n            var canvas = document.createElement(\"canvas\"),\r\n                context = canvas.getContext(\"2d\");\r\n\r\n            canvas.width = tileset.tileWidth;\r\n            canvas.height = tileset.tileHeight;\r\n\r\n            if (tileId >= 0) {\r\n                var nbTileX = tileset.imagewidth / tileset.tilewidth,\r\n                    nbTileY = tileset.imageheight / tileset.tileheight,\r\n                    srcX = tileId % nbTileX,\r\n                    srcY = Math.floor(tileId / nbTileX);\r\n\r\n                srcX = (srcY > 0) ? (srcX % (nbTileX * srcY)) : (srcX % nbTileX);   \r\n                    \r\n                context.drawImage(tileset.texture, \r\n                    { \r\n                        x: srcX * tileset.tileWidth, \r\n                        y: srcY * tileset.tileHeight, \r\n                        width: tileset.tileWidth, \r\n                        height: tileset.tileHeight \r\n                    },\r\n                    { \r\n                        x: 0, \r\n                        y: 0, \r\n                        width: this.tileWidth, \r\n                        height: this.tileHeight\r\n                    }\r\n                );\r\n\r\n                this._cacheTilesCanvas[cacheId] = canvas;\r\n                return canvas;\r\n            }\r\n        }\r\n        else {\r\n            return this._cacheTilesCanvas[cacheId];\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A loader that load a map created with Tiled and exported to JSON.\r\n * @class TmxLoader\r\n * @static\r\n */\r\nAtlantis.TmxLoader = {\r\n    /**\r\n     * Load a tilemap at the specified path.\r\n     * @method load\r\n     * @param {String} mapPath\r\n     * @param {Function} callback\r\n     * @return {Atlantis.Tilemap} Return a tilemap.\r\n     */\r\n    load: function (mapPath, callback) {\r\n        var tilemap = new Atlantis.Tilemap();\r\n\r\n        Atlantis.app.content.load(mapPath, function (map) {\r\n            var i = 0,\r\n                l = 0;\r\n\r\n            for (i = 0, l = map.tilesets.length; i < l; i++) {\r\n                tilemap.tilesets.push(new Atlantis.Tileset(map.tilesets[i]));\r\n                tilemap.tilesets[i].texture = Atlantis.app.content.load(map.tilesets[i].image);\r\n                tilemap.tilesets[i].texture.width = map.tilesets[i].imagewidth;\r\n                tilemap.tilesets[i].texture.height = map.tilesets[i].imageheight;\r\n            }\r\n\r\n            for (i = 0, l = map.layers.length; i < l; i++) {\r\n                tilemap.layers.push(new Atlantis.TilemapLayer(map.layers[i]));\r\n\r\n                if (map.layers[i].image) {\r\n                    tilemap.backgrounds.push(Atlantis.app.content.load(map.layers[i].image));\r\n                    tilemap.layers[i].backgroundId = i;\r\n                }\r\n            }\r\n\r\n            tilemap.height = map.height;\r\n            tilemap.width = map.width;\r\n            tilemap.tileWidth = map.tilewidth;\r\n            tilemap.tileHeight = map.tileheight;\r\n            tilemap.mapWidth = tilemap.width * tilemap.tileWidth;\r\n            tilemap.mapHeight = tilemap.height * tilemap.tileHeight;\r\n            tilemap.projection = map.orientation;\r\n            tilemap.version = map.version\r\n            tilemap.properties = map.properties;\r\n            tilemap.visible = true;\r\n            tilemap.loaded = true;\r\n            \r\n            if (callback) { \r\n                callback(tilemap);\r\n            }\r\n        });\r\n\r\n        return tilemap;\r\n    }\r\n};\n/**\r\n* AtlantisEngine.js a lightweight JavaScript game engine.\r\n*\r\n* @module Atlantis\r\n* @submodule Engine\r\n* @namespace Atlantis\r\n*/\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.KeyboardComponent = (function () {\r\n    var Keys = Atlantis.Keys;\r\n\r\n    /**\r\n    * A keyboard component that be used with KeyboardHelper to provide some\r\n    * interesting keyboars states as pressed, justPressed, etc.\r\n    * @class KeyboardComponent\r\n    * @constructor\r\n    * @extends Atlantis.GameComponent\r\n    * @param {Atlantis.Game} game A game instance.\r\n    */\r\n    var keyComponent = function (game) {\r\n        Atlantis.GameComponent.call(this, game);\r\n        this.keysState = game.keyboard.getState();\r\n        this.previousKeysState = null;\r\n    };\r\n    keyComponent.prototype = Object.create(Atlantis.GameComponent.prototype);\r\n\r\n    /**\r\n    * Update key states.\r\n    * @method update\r\n    * @param {Atlantis.GameTime} gameTime\r\n    */\r\n    keyComponent.prototype.update = function (gameTime) {\r\n        this.previousKeysState = this.keysState;\r\n        this.keysState = this.game.keyboard.getState();\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method pressed\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.pressed = function (key) {\r\n        return this.keysState.isKeyDown(key);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method released\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.released = function (key) {\r\n        return this.keysState.isKeyUp(key);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method justPressed\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.justPressed = function (key) { \r\n        return this.keysState.isKeyUp(key) && this.previousKeysState.isKeyDown(key);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method justReleased\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.justReleased = function (key) {\r\n        return this.keysState.isKeyDown(key) && this.previousKeysState.isKeyUp(key);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method up\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.up = function () {\r\n        return this.pressed(Keys.Up);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method down\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.down = function () {\r\n        return this.pressed(Keys.Down);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method left\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.left = function () {\r\n        return this.pressed(Keys.Left);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method right\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.right = function () {\r\n        return this.pressed(Keys.Right);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method enter\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.enter = function () {\r\n        return this.pressed(Keys.Enter);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method space\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.space = function () {\r\n        return this.pressed(Keys.Space);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method escape\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.escape = function () {\r\n        return this.pressed(Keys.Escape);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method control\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.control = function () {\r\n        return this.pressed(Keys.Control);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method shift\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.shift = function () {\r\n        return this.pressed(Keys.Shift);\r\n    };\r\n\r\n    /**\r\n    *\r\n    * @method tab\r\n    * @param {Atlantis.Keys|Number} key\r\n    * @return {Boolean} Return true if pressed, otherwise return false.\r\n    */\r\n    keyComponent.prototype.tab = function () {\r\n        return this.pressed(Keys.Tab);\r\n    };\r\n\r\n    return keyComponent;\r\n})();\n/**\r\n* AtlantisEngine.js a lightweight JavaScript game engine.\r\n*\r\n* @module Atlantis\r\n* @submodule Engine\r\n* @namespace Atlantis\r\n*/\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.TouchComponent = (function () {\r\n    var touchComponent = function (game) {\r\n    \tAtlantis.GameComponent.call(this, game);\r\n    \tthis.sensibility = new Atlantis.Vector2(1, 1);\r\n    \tthis.deadZone = new Atlantis.Vector2(0, 0);\r\n    \tthis.maxDelta = 100;\r\n    \tthis.maxFingerPoints = 1; \r\n    \tthis.delta = new Atlantis.Vector2(0, 0);\r\n    \tthis._touchCollection = new Atlantis.TouchCollection();\r\n    \tthis._position = [];\r\n    \tthis._lastPosition = [];\r\n    \tthis._needUpdate = false;\r\n    };\r\n\r\n    touchComponent.prototype = Object.create(Atlantis.GameComponent.prototype);\r\n\r\n    touchComponent.prototype.initialize = function () {\r\n    \tAtlantis.GameComponent.prototype.initialize(this);\r\n    \tthis._touchCollection = this.game.touchPanel.getState();\r\n    \tthis._lastTouchCollection = this.game.touchPanel.getState();\r\n\r\n    \tthis._position.length = 0;\r\n    \tthis._lastPosition.length = 0;\r\n\r\n    \tfor (var i = 0; i < this.maxFingerPoints; i++) {\r\n    \t\tthis._position.push(new Atlantis.Vector2(0, 0));\r\n    \t\tthis._lastPosition.push(new Atlantis.Vector2(0, 0));\r\n    \t}\r\n    };\r\n\r\n    touchComponent.prototype.update = function (gameTime) {\r\n    \tif (this.maxFingerPoints) {\r\n\t    \tthis._touchCollection = this.game.touchPanel.getState();\r\n\r\n\t    \tvar count = this._touchCollection.length;\r\n\r\n\t    \tif (count) {\r\n\t    \t\tfor (var i = 0; i < this.maxFingerPoints; i++) {\r\n\t    \t\t\tif (i < count) {\r\n\t    \t\t\t\tthis._updateTouchState(i);\r\n\t    \t\t\t}\r\n\t    \t\t\telse {\r\n\t    \t\t\t\tthis._resetTrouchState(i);\r\n\t    \t\t\t}\r\n\t    \t\t}\r\n\r\n\t\t\t    this.delta.x = (this._position[0].x - this._lastPosition[0].x) * this.sensibility.x;\r\n\t    \t\tthis.delta.y = (this._position[0].y - this._lastPosition[0].y) * this.sensibility.y;\r\n\t    \t}\r\n\t    \telse {\r\n\t    \t\tthis.delta.x = 0;\r\n\t    \t\tthis.delta.y = 0;\r\n\t    \t}\r\n    \t}\r\n    };\r\n\r\n    touchComponent.prototype._updateTouchState = function (index) {\r\n    \tthis._lastPosition[index].x = this._position[index].x;\r\n    \tthis._lastPosition[index].y = this._position[index].y;\r\n    \tthis._position[index].x = this._touchCollection[index].position.x;\r\n    \tthis._position[index].y = this._touchCollection[index].position.y;\r\n    };\r\n\r\n     touchComponent.prototype._resetTrouchState = function (index) {\r\n    \tthis._lastPosition[index].x = 0;\r\n    \tthis._lastPosition[index].y = 0;\r\n    \tthis._position[index].x = 0;\r\n    \tthis._position[index].y = 0;\r\n    };\r\n\r\n    touchComponent.prototype.pressed = function (index) {\r\n    \tif (!this._touchCollection[index]) {\r\n\t        return false;\r\n    \t}\r\n\r\n\t    return this._touchCollection[index].state === Atlantis.TouchLocationState.Pressed;\r\n\t};\r\n\r\n\ttouchComponent.prototype.released = function (index) {\r\n\t    if (!this._touchCollection[index]) {\r\n\t        return false;\r\n\t    }\r\n\r\n\t    return this._touchCollection[index].state === (Atlantis.TouchLocationState.Released || Atlantis.TouchLocationState.Invalid);\r\n\t};\r\n\r\n\ttouchComponent.prototype.moved = function (index) {\r\n\t    if (!this._touchCollection[index]) {\r\n\t        return false;\r\n\t    }\r\n\r\n\t    return this._touchCollection[index].state === Atlantis.TouchLocationState.Moved;\r\n\t};\r\n\r\n\treturn touchComponent;\r\n})();\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * An interface for a 2D level.\r\n * @class Level\r\n\r\n */\r\nAtlantis.Level = function (name) { \r\n\tthis.active = false;\r\n\tthis.name = name || \"Level_0\";\r\n\tthis.scene = new Atlantis.SpriteGroup();\r\n\tthis.camera = new Atlantis.Camera2D(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\tthis.spriteBatch = new Atlantis.SpriteBatch(Atlantis.app.game.graphicsDevice);\r\n};\r\n\r\nAtlantis.Level.prototype.initialize = function () {\r\n\tthis.scene.initialize();\r\n\tthis.camera.reset();\r\n};\r\n\r\nAtlantis.Level.prototype.update = function (gameTime) {\r\n\tthis.scene.update(gameTime);\r\n\tthis.camera.update(gameTime);\r\n};\r\n\r\nAtlantis.Level.prototype.draw = function (gameTime) {\r\n\tthis.spriteBatch.begin();\r\n\tthis.scene.draw(this.spriteBatch);\r\n\tthis.spriteBatch.end();\r\n};\r\n\r\nAtlantis.Level.prototype.onEnabled = function () {\r\n\r\n};\r\n\r\nAtlantis.Level.prototype.onDisabled = function () {\r\n\r\n};\r\n\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * This is a static class that contains some managers such as\r\n * Storage, Audio, Level, etc.\r\n * @class app\r\n * @static\r\n */\r\nAtlantis.app = {};\r\n\r\n/**\r\n * This is a static class that contains input managers\r\n * @class input\r\n * @static\r\n */\r\nAtlantis.input = {};\r\n\r\n/**\r\n * This is a static class that contains screen management\r\n * @class screen\r\n * @static\r\n */\r\nAtlantis.screen = {};\r\n\r\n/**\r\n* The engine class that initialize an Atlantis.Game object and setup managers and scene.\r\n* @constructor \r\n* @class Engine\r\n* @extends Atlantis.Game\r\n* @param {Number} width Desired screen width.\r\n* @param {Number} height Desired screen height\r\n* @param {Number} domElement The DOM element to use for canvas (optional).\r\n*/\r\nAtlantis.GameApplication = function (width, height, domElement, params) {\r\n    Atlantis.Game.call(this, width, height, domElement, params);\r\n\r\n    this.audioManager = new Atlantis.AudioManager();\r\n    this.storageManager = new Atlantis.StorageManager();\r\n    this.levelManager = new Atlantis.LevelManager(this);\r\n    this.components.add(this.levelManager);\r\n\r\n    var that = this;\r\n\r\n    Atlantis.app = {\r\n        game: that,\r\n        content: that.content,\r\n        components: that.components,\r\n        storage: that.storageManager,\r\n        levelManager: that.levelManager,\r\n    };\r\n    \r\n    Atlantis.input = {\r\n        keys: null,\r\n        mouse: null,\r\n        touch: null,\r\n        gamepad: null  \r\n    };\r\n\r\n    Atlantis.screen = {\r\n        width: width,  \r\n        widthPerTwo: width / 2,\r\n        height: height,\r\n        heightPerTwo: height / 2,\r\n        getCanvasWidth: function () {\r\n            return that.graphicsDevice.getFrontBuffer().getWidth();   \r\n        },\r\n        getCanvasHeight: function () {\r\n            return that.graphicsDevice.getFrontBuffer().getHeight(); \r\n        }\r\n    };\r\n    \r\n     document.addEventListener(Atlantis.events.ResolutionChanged, function (event) {\r\n        Atlantis.screen.width = event.width;\r\n        Atlantis.screen.widthPerTwo = event.width / 2;\r\n        Atlantis.screen.height = event.height;\r\n        Atlantis.screen.heightPerTwo = event.height / 2;\r\n    }, false);\r\n};\r\n\r\nAtlantis.GameApplication.prototype = Object.create(Atlantis.Game.prototype);\r\n\r\nAtlantis.GameApplication.prototype.initialize = function () {\r\n    Atlantis.Game.prototype.initialize.call(this);\r\n\r\n    Atlantis.screen.width = this.graphicsDevice.preferredBackBufferWidth;\r\n    Atlantis.screen.height = this.graphicsDevice.preferredBackBufferHeight;\r\n    \r\n    var keyboardComponent = new Atlantis.KeyboardComponent(this);\r\n    this.components.add(keyboardComponent);\r\n\r\n    //var touchComponent = new Atlantis.TouchComponent(this);\r\n    //this.components.add(touchComponent);\r\n\r\n    Atlantis.input.keys = keyboardComponent;\r\n    //Atlantis.input.touch = touchComponent;\r\n};\r\n\r\nAtlantis.GameApplication.prototype.setScreenSize = function (width, height) {\r\n    this.graphicsDevice._frontBuffer.setSize(width, height);\r\n    this.graphicsDevice.applyChanges();\r\n};\r\n"],"sourceRoot":"/source/"}