{"version":3,"sources":["atlantis.min.js"],"names":["Atlantis","window","events","ContentPreloading","ResolutionChanged","ajax","t","e","i","url","n","success","s","XMLHttpRequest","method","open","onreadystatechange","readyState","status","responseText","send","data","a","join","notify","document","createEvent","initEvent","Object","dispatchEvent","isMobileDevice","navigator","userAgent","match","_createProperty","defineProperty","get","set","enumerable","configurable","ContentManager","this","rootDirectory","_assets","preloader","PreloadTimerInterval","prototype","preload","length","load","o","r","progress","h","setInterval","clearInterval","split","loadImage","loadAudio","loadVideo","loadResource","Image","onload","style","position","left","body","appendChild","removeChild","src","createElement","controls","JSON","parse","dispose","GameComponent","game","enabled","initialized","initialize","update","isEnabled","isInitialized","setEnabled","DrawableGameComponent","call","visible","assetLoaded","loadContent","unloadContent","draw","isVisible","setVisible","GameComponentCollection","components","drawables","add","indexOf","push","remove","splice","gameComponent","GameTime","reset","elapsedTime","totalGameTime","currentTime","Date","fps","getElapsedTime","getTotalGameTime","getFPS","MathHelper","Pi","Math","PI","PiOver2","PiOver4","TwoPi","clamp","distance","abs","hermite","lerp","smoothStep","toDegrees","toRadians","isPowerOfTwo","Rectangle","x","y","width","height","divide","fromRectangle","multiply","subtract","contains","getRight","getBottom","intersects","getLeft","getTop","toString","toVector2","Vector2","toPoint","Point","getCenter","getWidth","getHeight","getTopCenter","getBottomCenter","getLeftCenter","getRightCenter","setPosition","setSize","clone","Matrix","toArray","Array","M11","M12","M13","M14","M21","M22","M23","M24","M31","M32","M33","M34","M41","M42","M43","M44","getIdentityValues","getZeroValues","setIdentity","getMatrixIdentity","setLeft","z","Vector3","setRight","setUp","getUp","setDown","getDown","setBackward","getBackward","setForward","getForward","setTranslation","createRotationX","cos","sin","createRotationY","createRotationZ","createScale","createTranslation","Atantis","createLookAt","normalize","cross","dot","createOrthographic","createOrthographicOffCenter","createPerspectiveFieldOfView","tan","createPerspectiveOffCenter","createPerspetiveFieldOfViewRH","createPerspectiveOffCenterRH","invert","c","l","u","p","f","d","M","A","m","g","w","v","_","b","V","S","T","B","createWorld","Quaternion","fromQuaternion","Identity","conjugate","createFromYawPitchRoll","fromVector","Zero","One","UnitX","UnitY","addToRef","subtractToRef","divideToRef","multiplyToRef","sqrt","lerpToRef","vector","min","minToRef","max","maxToRef","negate","normalizeToRef","reflect","ReflectToRef","reflectToRef","smoothStepToRef","transform","transformToRef","transformNormal","transformNormalToRef","UnitZ","Up","Down","Right","Left","Forward","Backward","distanceSquared","amount","transformCoordinate","Vector4","KeyboardState","keys","Input","isKeyDown","isKeyUp","Keyboard","maxKeys","preventDefault","keyCode","type","addEventListener","getState","ButtonState","Released","Pressed","MouseState","scrollWheelValue","leftButton","rightButton","middleButton","Mouse","HTMLElement","_x","_y","_scroll","_buttons","pageX","offsetLeft","Game","scaleFactor","pageY","offsetTop","button","wheelDelta","detail","TouchLocationState","Invalid","Moved","TouchCollection","TouchPanelState","create","state","TouchPanel","_states","up","down","cancel","move","callback","touches","clientX","clientY","maxTouchPoints","msMaxTouchPoints","PointerEvent","MSPointerEvent","getCapabilities","hasTouch","GamepadButton","X","Y","LeftShoulder","RightShoulder","LeftTrigger","RightTrigger","Select","Start","L3","R3","DPadUp","DPadDown","DPadLeft","DPadRight","GamepadAxis","Horizontal","Vertical","HorizontalRight","VerticalRight","GamepadState","axis","buttons","isButtonDown","isButtonUp","getAxis","Gamepad","_gamepads","getGamepads","webkitGetGamepads","msGetGamepads","webkitGamepads","_gamepadsSupported","_addGamepad","gamepad","_removeGamepad","index","_updateGamepads","pressed","value","axes","Keys","BackSpace","Tab","Enter","Shift","Control","Alt","Pause","Escape","Space","Home","End","Suppr","PageUp","PageDown","Insert","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","C","D","E","F","G","H","I","J","K","L","N","O","P","Q","R","U","W","Z","Super","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ScaleMode","ScaleToFit","ConserveAspectRatio","NoScaleCenter","GraphicsDevice","preferredBackBufferWidth","backBufferWidth","preferredBackBufferHeight","backBufferHeight","disableSmoothing","forceDisableSmoothing","viewport","scaleMode","_frontBuffer","RenderTarget","canvas","_fbContext","getContext","_backBuffer","_bbCanvas","getCanvas","msTouchAction","backgroundColor","id","applyChanges","getBackBuffer","getFrontBuffer","clear","imageSmoothingEnabled","present","drawImage","toggleFullscreen","isFullscreen","requestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","SpriteSortMode","BackToFront","FrontToBack","Immediate","SpriteEffect","None","FlipHorizontaly","FlipVerticaly","BatchItemType","Texture","Font","SpriteBatch","_graphicsDevice","_viewport","_canvas","_context","_batchItems","_batchStarted","_spriteSortMode","_transformMatrix","_cacheColoredTextures","_batchRect","_onResize","bind","begin","save","_drawBatchItem","texture2D","sourceRectangle","destinationRectangle","color","rotation","origin","scale","effect","layerDepth","drawString","end","sort","_sortBatchItem","restore","drawTexture","fillStyle","font","getFont","strokeStyle","lineWidth","wrapText","strokeText","_wrapText","size","fillText","translate","rotate","_colorizeTexture","_searchColoredTexture","getImageData","_hexaToBytes","putImageData","texture","parseInt","slice","measureText","_data","_needUpdate","fromImage","setData","getData","getPixelData","clearRect","saveAsPng","toDataURL","saveAsJpg","SpriteFont","fontName","Preloader","screenWidth","graphicsDevice","screenHeight","screenWidthPerTwo","screenHeightPerTwo","spriteFont","onProgress","round","gameTime","afterDraw","_paused","requestAnimationFrame","target","innerWidth","innerHeight","settings","domElement","replace","getElementsByClassName","getElementById","HTMLCanvasElement","version","content","keyboard","mouse","touchPanel","frontBuffer","context","_internalIntialize","resizeEnabled","autoClear","run","focus","pause","cancelAnimationFrame","resume","Random","random","randomFloat","randomInt","floor","vector2","vector3","vector4","randomArrayItem","array","undefined","MusicState","Playing","Stopped","Paused","AudioManager","repeatMusic","currentMusic","volume","currentState","STOPPED","playOneShot","audioClip","play","music","repeat","stopMusic","stop","StorageManager","container","name","stringify","localStorage","setItem","getLocalStorageKey","defaultValue","getItem","LevelManager","levels","activeLevel","_autoLoadLevel","loadLevel","nameOrIndex","reinitialize","reinit","onDisabled","getLevelByName","_checkIndex","active","onEnabled","level","autoLoad","getLoadedLevelIndex","getLoadedLevelName","SpriteAnimation","framerate","rectangles","next","SpriteAnimator","animations","spriteWidth","spriteHeight","textureWidth","textureHeight","nbSpriteX","nbSpriteY","spritesheetLength","currentAnimationName","animationWidth","animationHeight","framesIndex","frameRate","animationLength","animation","animationName","getCurrentAnimation","lastDistance","checkForIDLEAnimation","lastDirection","Camera2D","_follow","screen","_center","widthPerTwo","heightPerTwo","onResize","follow","sprite","getSpritePosition","getRelativePosition","rectangle","diffX","lastPosition","diffY","targX","targY","SpriteCollisionType","Stop","Sprite","_textureName","params","collisionType","_texture","_dead","_initialized","Counter","parent","direction","acceleration","velocity","maxVelocity","insideScreen","acrossScreen","spriteAnimator","hasAnimations","deleteIf","that","revive","kill","app","image","copy","collides","prepareAnimation","addAnimation","indices","twoIndices","ids","preUpdate","postUpdate","spriteBatch","getBoundingRect","SpriteText","text","oldFont","measureTextHeight","maxWidth","lineHeight","words","line","testLine","metrics","testWidth","SpriteGroup","_sprites","_length","_needBoundingCompute","diff","alive","collidesWithGroup","computeBoundingRect","countLiving","livings","countDead","deads","forEach","getFirstDead","getFirstAlive","getFirstNull","nullIndex","removeAt","result","oldSprite","newSprite","sprites","TilemapLayerType","Tiles","Background","Objects","TilemapProjection","Orthogonal","Isometric","Tileset","tileset","firstGID","firstgid","imagewidth","imageheight","margin","padding","spacing","tileWidth","tilewidth","tileHeight","tileheight","properties","TilemapLayer","layer","opacity","offset","backgroundId","tilesetId","Tilemap","tilemap","projection","orientation","layers","tilesets","backgrounds","mapWidth","mapHeight","loaded","_cacheTilesCanvas","camera","drawBackground","drawLayer","background","nbTileX","posX","posY","startX","startY","stopX","stopY","srcX","srcY","destX","destY","isoX","isoY","tileId","isoToScreen","screenToIso","getTileIdAt","layerIndex","tx","ty","getTileRectAt","rect","getTileAt","cacheId","TmxLoader","mapPath","map","KeyboardComponent","keyComponent","keysState","previousKeysState","key","released","justPressed","justReleased","right","enter","space","escape","control","shift","tab","TouchComponent","touchComponent","sensibility","deadZone","maxDelta","maxFingerPoints","delta","_touchCollection","_position","_lastPosition","_lastTouchCollection","count","_updateTouchState","_resetTrouchState","moved","Level","scene","input","GameApplication","audioManager","storageManager","levelManager","storage","touch","getCanvasWidth","getCanvasHeight","event","keyboardComponent","setScreenSize"],"mappings":"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","file":"atlantis.min.js","sourcesContent":["var Atlantis=window.Atlantis||{};Atlantis.events={ContentPreloading:\"atlantis.preloading\",ResolutionChanged:\"atlantis.graphics.resize\"},Atlantis.ajax=function(t){var e=t||{},i=t.url,n=t.success||function(){},s=new XMLHttpRequest;if(\"POST\"===e.method)s.open(\"POST\",i),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&n(s.responseText)},s.send(e.data);else{var a=e.data?[i,\"?\",e.data].join(\"\"):i;s.open(\"GET\",a),s.onreadystatechange=function(){4==s.readyState&&n(s.responseText)},s.send(null)}},Atlantis.notify=function(t,e){var i=document.createEvent(\"HTMLEvents\");if(i.initEvent(t,!0,!1),e instanceof Object)for(var n in e)i[n]=e[n];document.dispatchEvent(i)},Atlantis.isMobileDevice=function(){return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)},Atlantis._createProperty=function(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})};var Atlantis=window.Atlantis||{};Atlantis.ContentManager=function(t){this.rootDirectory=t||\"\",this._assets={},this.preloader=[]},Atlantis.ContentManager.PreloadTimerInterval=250,Atlantis.ContentManager.prototype.preload=function(t,e){for(var i=this.preloader.length,n=0,t=\"function\"==typeof t?t:function(){},e=\"function\"==typeof e?e:function(){},s=function(t){n++},a=0;i>a;a++)this.load(this.preloader[a],s);var o=this,r={status:\"Loading\",progress:0},h=setInterval(function(){r.progress=100*n/i,n===i&&(clearInterval(h),r.status=\"Complete\",o.preloader.length=0,e()),Atlantis.notify(Atlantis.events.ContentPreloading,r),t(r)},Atlantis.ContentManager.PreloadTimerInterval)},Atlantis.ContentManager.prototype.load=function(t,e){var e=\"function\"==typeof e?e:function(){},i=t.split(\".\"),n=i[i.length-1];if(t=this.rootDirectory+t,this._assets[t])return e(this._assets[t]),this._assets[t];switch(n){case\"png\":case\"jpg\":case\"bmp\":this.loadImage(t,e);break;case\"mp3\":case\"ogg\":case\"wav\":this.loadAudio(t,e);break;case\"mp4\":case\"ogv\":this.loadVideo(t,e);case\"xml\":case\"json\":case\"js\":this.loadResource(t,n,e)}return this._assets[t]},Atlantis.ContentManager.prototype.loadImage=function(t,e){var i=new Image;return i.onload=function(){this.style.position=\"absolute\",this.style.left=\"-9999px\",document.body.appendChild(i),document.body.removeChild(i),this.style.position=\"\",this.style.left=\"\",e(this)},i.src=t,this._assets[t]=i,i},Atlantis.ContentManager.prototype.loadAudio=function(t,e){var i=document.createElement(\"audio\");return i.src=t,i.load(),i.controls=!1,this._assets[t]=i,e(i),i},Atlantis.ContentManager.prototype.loadVideo=function(t,e){var i=document.createElement(\"video\");return i.onload=e,i.src=t,this._assets[t]=i,i},Atlantis.ContentManager.prototype.loadResource=function(t,e,i){var n=this;Atlantis.ajax({method:\"GET\",url:t,success:function(s){var a=s;\"json\"==e&&(a=JSON.parse(s)),n._assets[t]=a,i(a)}})},Atlantis.ContentManager.prototype.dispose=function(){this._assets.length=0};var Atlantis=window.Atlantis||{};Atlantis.GameComponent=function(t){this.game=t,this.enabled=!0,this.initialized=!1},Atlantis.GameComponent.prototype.initialize=function(){this.initialized=!0},Atlantis.GameComponent.prototype.update=function(t){},Atlantis.GameComponent.prototype.isEnabled=function(){return this.enabled},Atlantis.GameComponent.prototype.isInitialized=function(){return this.initialized},Atlantis.GameComponent.prototype.setEnabled=function(t){this.enabled=t},Atlantis.DrawableGameComponent=function(t){Atlantis.GameComponent.call(this,t),this.visible=!0,this.assetLoaded=!1},Atlantis.DrawableGameComponent.prototype=new Atlantis.GameComponent,Atlantis.DrawableGameComponent.prototype.loadContent=function(){this.assetLoaded=!0},Atlantis.DrawableGameComponent.prototype.unloadContent=function(){this.assetLoaded=!1},Atlantis.DrawableGameComponent.prototype.draw=function(t,e){},Atlantis.DrawableGameComponent.prototype.isVisible=function(){return this.isVisible},Atlantis.DrawableGameComponent.prototype.setVisible=function(t){this.isVisible=t},Atlantis.GameComponentCollection=function(){this.components=[],this.drawables=[],this.initialized=!1,this.assetLoaded=!1},Atlantis.GameComponentCollection.prototype.initialize=function(t){for(var e=0,i=this.components.length;i>e;e++)this.components[e].initialize();this.initialized=!0},Atlantis.GameComponentCollection.prototype.loadContent=function(){for(var t=0,e=this.drawables.length;e>t;t++)this.drawables[t].loadContent();this.assetLoaded=!0},Atlantis.GameComponentCollection.prototype.unloadContent=function(){for(var t=0,e=this.drawables.length;e>t;t++)this.drawables[t].unloadContent();this.assetLoaded=!1},Atlantis.GameComponentCollection.prototype.update=function(t){for(var e=0,i=this.components.length;i>e;e++)this.components[e].isEnabled()&&this.components[e].update(t)},Atlantis.GameComponentCollection.prototype.draw=function(t,e){for(var i=0,n=this.drawables.length;n>i;i++)this.drawables[i].isVisible()&&this.drawables[i].draw(t,e)},Atlantis.GameComponentCollection.prototype.add=function(t){-1==this.components.indexOf(t)&&(this.components.push(t),this.initialized&&t.initialize(),t instanceof Atlantis.DrawableGameComponent&&(this.drawables.push(t),this.assetLoaded&&t.loadContent()))},Atlantis.GameComponentCollection.prototype.remove=function(t){var e=this.components.indexOf(t);return e>-1?(this.components.splice(e,1),t instanceof Atlantis.DrawableGameComponent&&(e=this.drawables.indexOf(t),e>-1&&this.drawables.splice(e,1)),!0):!1},Atlantis.GameComponentCollection.prototype.get=function(t){var e=null,i=this.components.indexOf(gameComponent);return i>-1&&(e=this.components[t]),null};var Atlantis=window.Atlantis||{};Atlantis.GameTime=function(){this.reset()},Atlantis.GameTime.prototype.reset=function(){this.elapsedTime=0,this.totalGameTime=0,this.currentTime=+new Date,this.fps=0},Atlantis.GameTime.prototype.update=function(){var t=+new Date;this.elapsedTime=t-this.currentTime,this.totalGameTime+=this.elapsedTime,this.fps=1e3/(t-this.currentTime),this.currentTime=t},Atlantis.GameTime.prototype.getElapsedTime=function(){return this.elapsedTime},Atlantis.GameTime.prototype.getTotalGameTime=function(){return this.totalGameTime},Atlantis.GameTime.prototype.getFPS=function(){return this.fps};var Atlantis=window.Atlantis||{};Atlantis.MathHelper={Pi:Math.PI,PiOver2:Math.PI/2,PiOver4:Math.PI/4,TwoPi:2*Math.PI,clamp:function(t,e,i){return t=t>i?i:t,t=e>t?e:t},distance:function(t,e){return Math.abs(t-e)},hermite:function(t,e,i,n,s){var a=s*s*s,o=s*s;return 0===s?t:1===s?i:(2*t-2*i+n+e)*a+(3*i-3*t-2*e-n)*o+e*s+t},lerp:function(t,e,i){return i=0>i?0:i,i=i>1?1:i,t+(e-t)*i},smoothStep:function(t,e,i){var n=this.clamp(i,0,1);return n=this.hermite(t,0,e,0,n)},toDegrees:function(t){return t*(180/Math.PI)},toRadians:function(t){return t*(Math.PI/180)},isPowerOfTwo:function(t){return t>0&&0==(t&t-1)}};var Atlantis=Atlantis||{};Atlantis.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},Atlantis.Rectangle.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.width+=t.width,this.height+=t.height},Atlantis.Rectangle.prototype.divide=function(t){this.x/=t.x,this.y/=t.y,this.width/=t.width,this.height/=t.height},Atlantis.Rectangle.prototype.fromRectangle=function(t){this.x=t.x?+t.x:0,this.y=t.y?+t.y:0,this.width=t.width?+t.width:0,this.height=t.height?+t.height:0},Atlantis.Rectangle.prototype.multiply=function(t){this.x*=t.x,this.y*=t.y,this.width*=t.width,this.height*=t.height},Atlantis.Rectangle.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y,this.width-=t.width,this.height-=t.height},Atlantis.Rectangle.prototype.contains=function(t,e){return t instanceof Atlantis.Rectangle?this.x<=t.x&&t.getRight()<=this.getRight()&&this.y<=t.y&&t.getBottom()<=this.getBottom():this.x<=t&&t<this.getRight()&&this.y<=e&&e<this.getBottom()},Atlantis.Rectangle.prototype.intersects=function(t){return t.getLeft()<this.getRight()&&this.getLeft()<t.getRight()&&t.getTop()<this.getBottom()&&this.getTop()<t.getBottom()},Atlantis.Rectangle.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" width: \",this.width,\" height: \",this.height].toString()},Atlantis.Rectangle.prototype.toVector2=function(){return new Atlantis.Vector2(this.x,this.y)},Atlantis.Rectangle.prototype.toPoint=function(){return new Atlantis.Point(this.x,this.y)},Atlantis.Rectangle.prototype.getTop=function(){return this.y},Atlantis.Rectangle.prototype.getBottom=function(){return this.y+this.height},Atlantis.Rectangle.prototype.getLeft=function(){return this.x},Atlantis.Rectangle.prototype.getRight=function(){return this.x+this.width},Atlantis.Rectangle.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/2,this.y+this.height/2)},Atlantis.Rectangle.prototype.getWidth=function(){return this.width},Atlantis.Rectangle.prototype.getHeight=function(){return this.height},Atlantis.Rectangle.prototype.getTopCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y)},Atlantis.Rectangle.prototype.getBottomCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y+this.height)},Atlantis.Rectangle.prototype.getLeftCenter=function(){return new Atlantis.Vector2(this.x,this.y+this.height/2)},Atlantis.Rectangle.prototype.getRightCenter=function(){return new Atlantis.Vector2(this.x+this.width,this.y+this.height/2)},Atlantis.Rectangle.prototype.set=function(t,e,i,n){t instanceof Atlantis.Rectangle?(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.x=t,this.y=e,this.width=i,this.height=n)},Atlantis.Rectangle.prototype.setPosition=function(t,e){this.x=t,this.y=e},Atlantis.Rectangle.prototype.setSize=function(t,e){this.width=t,this.height=e},Atlantis.Rectangle.prototype.clone=function(){return new Atlantis.Rectangle(this.x,this.y,this.width,this.height)},Atlantis.Rectangle.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" width: \",this.width,\" height: \",this.height].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Matrix=function(t){if(t instanceof Atlantis.Matrix){var t=t.toArray();this.set(t)}else t instanceof Array&&16==t.length?this.set(t):(this.M11=0,this.M12=0,this.M13=0,this.M14=0,this.M21=0,this.M22=0,this.M23=0,this.M24=0,this.M31=0,this.M32=0,this.M33=0,this.M34=0,this.M41=0,this.M42=0,this.M43=0,this.M44=0)},Atlantis.Matrix.prototype.clone=function(){return new Atlantis.Matrix(this.toArray())},Atlantis.Matrix.prototype.set=function(t){16==t.length&&(this.M11=t[0],this.M12=t[1],this.M13=t[2],this.M14=t[3],this.M21=t[4],this.M22=t[5],this.M23=t[6],this.M24=t[7],this.M31=t[8],this.M32=t[9],this.M33=t[10],this.M34=t[11],this.M41=t[12],this.M42=t[13],this.M43=t[14],this.M44=t[15])},Atlantis.Matrix.prototype.getIdentityValues=function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t},Atlantis.Matrix.prototype.getZeroValues=function(){for(var t=[],e=0;16>e;e++)t.push(0);return t},Atlantis.Matrix.prototype.setIdentity=function(){this.set(this.getIdentityValues())},Atlantis.Matrix.getMatrixIdentity=function(){var t=new Atlantis.Matrix;return t.setIdentity(),t},Atlantis.Matrix.prototype.toArray=function(){var t=[];return t.push(this.M11),t.push(this.M12),t.push(this.M13),t.push(this.M14),t.push(this.M21),t.push(this.M22),t.push(this.M23),t.push(this.M24),t.push(this.M31),t.push(this.M32),t.push(this.M33),t.push(this.M34),t.push(this.M41),t.push(this.M42),t.push(this.M43),t.push(this.M44),t},Atlantis.Matrix.prototype.setLeft=function(t){this.M11=-t.x,this.M12=-t.y,this.M13=-t.z},Atlantis.Matrix.prototype.getLeft=function(){var t=new Atlantis.Vector3;return t.x=-this.M11,t.y=-this.M12,t.z=-this.M13,t},Atlantis.Matrix.prototype.setRight=function(t){this.M11=t.x,this.M12=t.y,this.M13=t.z},Atlantis.Matrix.prototype.getRight=function(){var t=new Atlantis.Vector3;return t.x=this.M11,t.y=this.M12,t.z=this.M13,t},Atlantis.Matrix.prototype.setUp=function(t){this.M21=t.x,this.M22=t.y,this.M23=t.z},Atlantis.Matrix.prototype.getUp=function(){var t=new Atlantis.Vector3;return t.x=this.M21,t.y=this.M22,t.z=this.M23,t},Atlantis.Matrix.prototype.setDown=function(t){this.M21=-t.x,this.M22=-t.y,this.M23=-t.z},Atlantis.Matrix.prototype.getDown=function(){var t=new Atlantis.Vector3;return t.x=-this.M21,t.y=-this.M22,t.z=-this.M23,t},Atlantis.Matrix.prototype.setBackward=function(t){this.M31=t.x,this.M32=t.y,this.M33=t.z},Atlantis.Matrix.prototype.getBackward=function(){var t=new Atlantis.Vector3;return t.x=this.M31,t.y=this.M32,t.z=this.M33,t},Atlantis.Matrix.prototype.setForward=function(t){this.M31=-t.x,this.M32=-t.y,this.M33=-t.z},Atlantis.Matrix.prototype.getForward=function(){var t=new Atlantis.Vector3;return t.x=-this.M31,t.y=-this.M32,t.z=-this.M33,t},Atlantis.Matrix.prototype.setTranslation=function(t){this.M41=t.x,this.M42=t.y,this.M43=t.z},Atlantis.Matrix.prototype.add=function(t){for(var e=this.toArray(),i=t.toArray(),n=0;16>n;n++)e[n]+=i[n];this.set(e)},Atlantis.Matrix.add=function(t,e){var i=new Atlantis.Matrix(t);return i.add(e),i},Atlantis.Matrix.createRotationX=function(t){var e=getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M22=i,e.M23=n,e.M32=-n,e.M33=i,e},Atlantis.Matrix.createRotationY=function(t){var e=getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M11=i,e.M13=-n,e.M31=n,e.M33=i,e},Atlantis.Matrix.createRotationZ=function(t){var e=this.getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M11=i,e.M13=n,e.M31=-n,e.M33=i,e},Atlantis.Matrix.createScale=function(t,e,i){var n=Atlantis.Matrix.getMatrixIdentity();return n.M11=t,n.M22=e||t,n.M33=i||t,n},Atlantis.Matrix.createTranslation=function(t,e,i){var n=Atantis.Matrix.getMatrixIdentity();return n.M41=t,n.M42=e||t,n.M43=i||t,n},Atlantis.Matrix.createLookAt=function(t,e,i){var n=Atlantis.Vector3.subtract(e,t);n.normalize();var s=Atlantis.Vector3.cross(i,n);s.normalize();var a=Atlantis.Vector3.cross(n,s);a.normalize();var o=Atlantis.Matrix.getMatrixIdentity();return o.M11=s.x,o.M21=s.y,o.M31=s.z,o.M12=a.x,o.M22=a.y,o.M32=a.z,o.M13=n.x,o.M23=n.y,o.M33=n.z,o.M41=-Atlantis.Vector3.dot(s,t),o.M42=-Atlantis.Vector3.dot(a,t),o.M43=-Atlantis.Vector3.dot(n,t),o},Atlantis.Matrix.createOrthographic=function(t,e,i,n){var s=new Matrix;return s.M11=2/t,s.M12=s.M13=s.M14=0,s.M22=2/e,s.M21=s.M23=s.M24=0,s.M33=1/(i-n),s.M31=s.M32=s.M34=0,s.M41=s.M42=0,s.M43=i/(i-n),s.M44=1,s},Atlantis.Matrix.createOrthographicOffCenter=function(t,e,i,n,s,a){var o=new Atlantis.Matrix;return o.M11=2/(e-t),o.M12=0,o.M13=0,o.M14=0,o.M21=0,o.M22=2/(n-i),o.M23=0,o.M24=0,o.M31=0,o.M32=0,o.M33=1/(s-a),o.M34=0,o.M41=(t+e)/(t-e),o.M42=(n+i)/(i-n),o.M43=s/(s-a),o.M44=1,o},Atlantis.Matrix.createPerspectiveFieldOfView=function(t,e,i,n){var s=1/Math.tan(.5*t),a=s/e,o=i/a,r=i/s;return Atlantis.Matrix.createPerspectiveOffCenter(-o,o,-r,r,i,n)},Atlantis.Matrix.createPerspetiveFieldOfViewRH=function(t,e,i,n){var s=1/Math.tan(.5*t),a=s/e,o=i/a,r=i/s;return Matrix.createPerspectiveOffCenterRH(-o,o,-r,r,i,n)},Atlantis.Matrix.createPerspectiveOffCenter=function(t,e,i,n,s,a){var o=a/(a-s),r=new Atlantis.Matrix;return r.M11=2*s/(e-t),r.M22=2*s/(n-i),r.M31=(t+e)/(t-e),r.M32=(n+i)/(i-n),r.M33=o,r.M34=1,r.M43=-s*o,r},Atlantis.Matrix.createPerspectiveOffCenterRH=function(t,e,i,n,s,a){var o=createPerspectiveOffCenter(t,e,i,n,s,a);return o.M31*=-1,o.M32*=-1,o.M33*=-1,o.M34*=-1,o},Atlantis.Matrix.prototype.invert=function(){var t=this.M31*this.M42-this.M32*this.M41,e=this.M31*this.M43-this.M33*this.M41,i=this.M34*this.M41-this.M31*this.M44,n=this.M32*this.M43-this.M33*this.M42,s=this.M34*this.M42-this.M32*this.M44,a=this.M33*this.M44-this.M34*this.M43,o=this.M22*a+this.M23*s+this.M24*n,r=this.M21*a+this.M23*i+this.M24*e,h=this.M21*-s+this.M22*i+this.M24*t,c=this.M21*n+this.M22*-e+this.M23*t,l=this.M11*o-this.M12*r+this.M13*h-this.M14*c;if(0==Math.abs(l))return void this.set(this.getZeroValues());l=1/l;var u=this.M11*this.M22-this.M12*this.M21,p=this.M11*this.M23-this.M13*this.M21,f=this.M14*this.M21-this.M11*this.M24,d=this.M12*this.M23-this.M13*this.M22,M=this.M14*this.M22-this.M12*this.M24,y=this.M13*this.M24-this.M14*this.M23,A=this.M12*a+this.M13*s+this.M14*n,m=this.M11*a+this.M13*i+this.M14*e,g=this.M11*-s+this.M12*i+this.M14*t,x=this.M11*n+this.M12*-e+this.M13*t,w=this.M42*y+this.M43*M+this.M44*d,v=this.M41*y+this.M43*f+this.M44*p,_=this.M41*-M+this.M42*f+this.M44*u,b=this.M41*d+this.M42*-p+this.M43*u,V=this.M32*y+this.M33*M+this.M34*d,S=this.M31*y+this.M33*f+this.M34*p,T=this.M31*-M+this.M32*f+this.M34*u,B=this.M31*d+this.M32*-p+this.M33*u;this.M11=+o*l,this.M12=-A*l,this.M13=+w*l,this.M14=-V*l,this.M21=-r*l,this.M22=+m*l,this.M23=-v*l,this.M24=+S*l,this.M31=+h*l,this.M32=-g*l,this.M33=+_*l,this.M34=-T*l,this.M41=-c*l,this.M42=+x*l,this.M43=-b*l,this.M44=+B*l},Atlantis.Matrix.invert=function(t){var e=new Matrix(t);return e.invert(),e},Atlantis.Matrix.createWorld=function(t,e,i){var n=new Atlantis.Matrix,s=Atlantis.Vector3.cross(e,i),a=Atlantis.Vector3.cross(s,e);Atlantis.Vector3.normalize(e);return s.normalize(),a.normalize(),n.setTranslation(t),n.M44=1,n},Atlantis.Matrix.prototype.multiply=function(t){var e=this.M11*t.M11+this.M12*t.M21+this.M13*t.M31+this.M14*t.M41,i=this.M11*t.M12+this.M12*t.M22+this.M13*t.M32+this.M14*t.M42,n=this.M11*t.M13+this.M12*t.M23+this.M13*t.M33+this.M14*t.M43,s=this.M11*t.M14+this.M12*t.M24+this.M13*t.M34+this.M14*t.M44,a=this.M21*t.M11+this.M22*t.M21+this.M23*t.M31+this.M24*t.M41,o=this.M21*t.M12+this.M22*t.M22+this.M23*t.M32+this.M24*t.M42,r=this.M21*t.M13+this.M22*t.M23+this.M23*t.M33+this.M24*t.M43,h=this.M21*t.M14+this.M22*t.M24+this.M23*t.M34+this.M24*t.M44,c=this.M31*t.M11+this.M32*t.M21+this.M33*t.M31+this.M34*t.M41,l=this.M31*t.M12+this.M32*t.M22+this.M33*t.M32+this.M34*t.M42,u=this.M31*t.M13+this.M32*t.M23+this.M33*t.M33+this.M34*t.M43,p=this.M31*t.M14+this.M32*t.M24+this.M33*t.M34+this.M34*t.M44,f=this.M41*t.M11+this.M42*t.M21+this.M43*t.M31+this.M44*t.M41,d=this.M41*t.M12+this.M42*t.M22+this.M43*t.M32+this.M44*t.M42,M=this.M41*t.M13+this.M42*t.M23+this.M43*t.M33+this.M44*t.M43,y=this.M41*t.M14+this.M42*t.M24+this.M43*t.M34+this.M44*t.M44;this.M11=e,this.M12=i,this.M13=n,this.M14=s,this.M21=a,this.M22=o,this.M23=r,this.M24=h,this.M31=c,this.M32=l,this.M33=u,this.M34=p,this.M41=f,this.M42=d,this.M43=M,this.M44=y},Atlantis.Matrix.multiply=function(t,e,i){var n=new Atlantis.Matrix(t);return n.multiply(e),i instanceof Atlantis.Matrix&&n.multiply(i),n},Atlantis.Matrix.prototype.subtract=function(t){for(var e=this.toArray(),i=t.toArray(),n=0;16>n;n++)e[n]-=i[n];this.set(e)},Atlantis.Matrix.subtract=function(t,e){var i=new Atlantis.Matrix(t);return i.subtract(e),i},Atlantis.Matrix.prototype.toString=function(){for(var t=this.toArray(),e=[],i=0;16>i;i+=4)e.push(\"[\"),e.push(t[i]+\" \"),e.push(t[i+1]+\" \"),e.push(t[i+2]+\" \"),e.push(t[i+3]),e.push(\"] \");return e.join(\"\")};var Atlantis=Atlantis||{};Atlantis.Quaternion=function(t,e,i,n){this.x=t?+t:0,this.y=e?+e:0,this.z=i?+i:0,this.z=n?+n:0},Atlantis.Quaternion.prototype.fromQuaternion=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},Atlantis.Quaternion.Identity=function(){return new Atlantis.Quaternion(0,0,0,1)},Atlantis.Quaternion.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w},Atlantis.Quaternion.add=function(t,e){var i=new Quaternion(t);return i.add(e),i},Atlantis.Quaternion.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},Atlantis.Quaternion.conjugate=function(t){var e=new Quaternion(t);return e.conjugate(),e},Atlantis.Quaternion.createFromYawPitchRoll=function(t,e,i){var n=new Quaternion,s=.5*t,a=.5*e,o=.5*i,r=Math.sin(s),h=Math.cos(s),c=Math.sin(a),l=Math.cos(a),u=Math.sin(o),p=Math.cos(o);return n.x=h*c*p+r*l*u,n.y=r*l*p-h*c*u,n.z=h*l*u-r*c*p,n.w=h*l*p-r*c*u,n},Atlantis.Quaternion.prototype.clone=function(){return new Atlantis.Quaternion(this.x,this.y,this.z,this.w)},Atlantis.Quaternion.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z,\" w: \",this.w].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Point=function(t,e){this.x=t?+t:0,this.y=e?+e:0},Atlantis.Point.clone=function(t,e){return new Atlantis.Point(this.x,this.y)},Atlantis.Point.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y].join(\"\")},Atlantis.Vector2=function(t,e){this.x=t?+t:0,this.y=e?+e:0},Atlantis.Vector2.prototype.fromVector=function(t){this.x=t.x,this.y=t.y},Atlantis.Vector2.Zero=function(){return new Vector2},Atlantis.Vector2.One=function(){return new Vector2(1,1)},Atlantis.Vector2.UnitX=function(){return new Vector2(1,0)},Atlantis.Vector2.UnitY=function(){return new Vector2(0,1)},Atlantis.Vector2.prototype.add=function(t){\"number\"==typeof t?(this.x+=t,this.y+=t):(this.x+=t.x,this.y+=t.y)},Atlantis.Vector2.add=function(t,e){var i=t.clone();return i.add(e),i},Atlantis.Vector2.addToRef=function(t,e,i){i.x=t.x+e.x,i.y=t.y+e.y},Atlantis.Vector2.prototype.subtract=function(t){\"number\"==typeof t?(this.x-=t,this.y-=t):(this.x-=t.x,this.y-=t.y)},Atlantis.Vector2.subtract=function(t,e){var i=t.clone();return i.subtract(e),i},Atlantis.Vector2.subtractToRef=function(t,e,i){i.x=t.x-e.x,i.y=t.y-e.y},Atlantis.Vector2.prototype.divide=function(t){\"number\"==typeof t?(this.x/=t,this.y/=t):(this.x/=t.x,this.y/=t.y)},Atlantis.Vector2.divide=function(t,e){var i=t.clone();return i.divide(e),i},Atlantis.Vector2.divideToRef=function(t,e,i){i.x=t.x/e.x,i.y=t.y/e.y},Atlantis.Vector2.prototype.multiply=function(t){\"number\"==typeof t?(this.x*=t,this.y*=t):(this.x*=t.x,this.y*=t.y)},Atlantis.Vector2.multiply=function(t,e){var i=t.clone();return i.multiply(e),i},Atlantis.Vector2.multiplyToRef=function(t,e,i){i.x=t.x*e.x,i.y=t.y*e.y},Atlantis.Vector2.prototype.distance=function(t){return Atlantis.Vector2.distance(this,t)},Atlantis.Vector2.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},Atlantis.Vector2.prototype.dot=function(t){return Atlantis.Vector2.dot(this,t)},Atlantis.Vector2.dot=function(t,e){return t.x*e.x+t.y*e.y},Atlantis.Vector2.prototype.length=function(){return Atlantis.Vector2.length(this)},Atlantis.Vector2.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Atlantis.Vector2.lerp=function(t,e,i){return Atlantis.Vector2.lerpToRef(t,e,i,new Atlantis.Vector2),vector},Atlantis.Vector2.lerpToRef=function(t,e,i,n){n.x=Atlantis.MathHelper.lerp(t.x,e.x,i),n.y=Atlantis.MathHelper.lerp(t.y,e.y,i)},Atlantis.Vector2.min=function(t,e){var i=new Atlantis.Vector2;return Atlantis.Vector2.minToRef(t,e,i),i},Atlantis.Vector2.minToRef=function(t,e,i){i.x=t.x<e.x?t.x:e.x,i.y=t.y<e.y?t.y:e.y},Atlantis.Vector2.max=function(t,e){var i=new Vector2;return Atlantis.Vector2.maxToRef(t,e,i),i},Atlantis.Vector2.maxToRef=function(t,e,i){i.x=t.x>e.x?t.x:e.x,i.y=t.y>e.y?t.y:e.y},Atlantis.Vector2.prototype.negate=function(t){\"number\"==typeof t?(this.x=-t,this.y=-t):(this.x=-t.x,this.y=-t.y)},Atlantis.Vector2.negate=function(t){var e=t.clone();return e.x*=-1,e.y*=-1,e},Atlantis.Vector2.prototype.normalize=function(){Atlantis.Vector2.normalizeToRef(this)},Atlantis.Vector2.normalize=function(t){var e=t.clone();return e.normalize(),e},Atlantis.Vector2.normalizeToRef=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);e||(t.x=0,t.y=0);var i=1/e;t.x*=i,t.y*=i},Atlantis.Vector2.reflect=function(t,e){var i=new Atlantis.Vector2;return Atlantis.ReflectToRef(t,e,i),i},Atlantis.Vector2.reflectToRef=function(t,e,i){var n=2*(t.x*e.x+t.y*e.y);i.x=t.x-e.x*n,i.y=t.y-e.y*n},Atlantis.Vector2.smoothStep=function(t,e,i){var n=new Atlantis.Vector2;return Atlantis.Vector2.smoothStepToRef(t,e,i,n),n},Atlantis.Vector2.smoothStepToRef=function(t,e,i,n){n.x=Atlantis.MathHelper.smoothStep(t.x,e.x,i),n.y=Atlantis.MathHelper.smoothStep(t.y,e.y,i)},Atlantis.Vector2.transform=function(t,e){var i=new Atlantis.Vector3;return Atlantis.Vector2.transformToRef(t,e,i),i},Atlantis.Vector2.transformToRef=function(t,e,i){var n=t.x*e.M11+t.y*e.M21+e.M41,s=t.x*e.M12+t.y*e.M22+e.M42;i.x=n,i.x=s},Atlantis.Vector2.transformNormal=function(t,e){var i=new Atlantis.Vector3;return Atlantis.Vector2.transformNormalToRef(t,e,i),i},Atlantis.Vector2.transformNormalToRef=function(t,e,i){var n=t.x*e.M11+t.y*e.M21,s=t.x*e.M12+t.y*e.M22;i.x=n,i.y=s},Atlantis.Vector2.prototype.set=function(t,e){this.x=t,this.y=e},Atlantis.Vector2.prototype.clone=function(){return new Atlantis.Vector2(this.x,this.y)},Atlantis.Vector2.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Vector3=function(t,e,i){this.x=t?+t:0,this.y=e?+e:0,this.z=i?+i:0},Atlantis.Vector3.prototype.fromVector=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Atlantis.Vector3.Zero=function(){return new Atlantis.Vector3(0,0,0)},Atlantis.Vector3.One=function(){return new Atlantis.Vector3(1,1,1)},Atlantis.Vector3.UnitX=function(){return new Atlantis.Vector3(1,0,0)},Atlantis.Vector3.UnitY=function(){return new Atlantis.Vector3(0,1,0)},Atlantis.Vector3.UnitZ=function(){return new Atlantis.Vector3(0,0,1)},Atlantis.Vector3.Up=function(){return new Atlantis.Vector3(0,1,0)},Atlantis.Vector3.Down=function(){return new Atlantis.Vector3(0,-1,0)},Atlantis.Vector3.Right=function(){return new Atlantis.Vector3(1,0,0)},Atlantis.Vector3.Left=function(){return new Atlantis.Vector3(-1,0,0)},Atlantis.Vector3.Forward=function(){return new Atlantis.Vector3(0,0,-1)},Atlantis.Vector3.Backward=function(){return new Atlantis.Vector3(0,0,1)},Atlantis.Vector3.prototype.add=function(t){t instanceof Atlantis.Vector3?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t)},Atlantis.Vector3.add=function(t,e){var i=new Vector3(t);return i.add(e),i},Atlantis.Vector3.prototype.subtract=function(t){t instanceof Atlantis.Vector3?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t)},Atlantis.Vector3.subtract=function(t,e){var i=new Atlantis.Vector3(t);return i.subtract(e),i},Atlantis.Vector3.prototype.divide=function(t){0!=t.x&&(this.x/=t.x),0!=t.y&&(this.y/=t.y),0!=t.z&&(this.z/=t.z)},Atlantis.Vector3.divide=function(t,e){var i=new Atlantis.Vector3(t);return i.divide(e),i},Atlantis.Vector3.prototype.multiply=function(t){t instanceof Atlantis.Vector3?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t)},Atlantis.Vector3.multiply=function(t,e){var i=new Atlantis.Vector3(t);return i.multiply(e),i},Atlantis.Vector3.cross=function(t,e){var i=new Atlantis.Vector3;return i.x=t.y*e.z-e.y*t.z,i.y=-(t.x*e.z-e.x*t.z),i.z=t.x*e.y-e.x*t.y,i},Atlantis.Vector3.distance=function(t,e){return Math.sqrt(Atlantis.Vector3.distanceSquared(t,e))},Atlantis.Vector3.distanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y,s=t.z-e.z;return i*i+n*n+s*s},Atlantis.Vector3.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},Atlantis.Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Atlantis.Vector3.prototype.lerp=function(t,e){this.x=Atlantis.MathHelper.lerp(this.x,t.x,e),this.y=Atlantis.MathHelper.lerp(this.y,t.y,e),this.z=Atlantis.MathHelper.lerp(this.z,t.z,e)},Atlantis.Vector3.lerp=function(t,e){var i=Atlantis.MathHelper.lerp(t.x,e.x,amount),n=Atlantis.MathHelper.lerp(t.y,e.y,amount),s=Atlantis.MathHelper.lerp(t.z,e.z,amount);return new Atlantis.Vector3(i,n,s)},Atlantis.Vector3.min=function(t,e){var i=new Atlantis.Vector3;return i.x=t.x<e.x?t.x:e.x,i.y=t.y<e.y?t.y:e.y,i.z=t.z<e.z?t.z:e.z,i},Atlantis.Vector3.max=function(t,e){var i=new Atlantis.Vector3;return i.x=t.x>e.x?t.x:e.x,i.y=t.y>e.y?t.y:e.y,i.z=t.z>e.z?t.z:e.z,i},Atlantis.Vector3.prototype.negate=function(){this.x*=-1,this.y*=-1,this.z*=-1},Atlantis.Vector3.negate=function(t){var e=new Atlantis.Vector3(t);return e.negate(),e},Atlantis.Vector3.prototype.normalize=function(){var t=distance(this,new Atlantis.Vector3);0!=t&&(t=1/t,this.set(this.x*t,this.y*t,this.z*t))},Atlantis.Vector3.normalize=function(t){var e=new Vector3(t);return e.normalize(),e},Atlantis.Vector3.transform=function(t,e){var i=new Vector3(t.x*e.M11+t.y*e.M21+t.z*e.M31+e.M41,t.x*e.M12+t.y*e.M22+t.z*e.M32+e.M42,t.x*e.M13+t.y*e.M23+t.z*e.M33+e.M43);return i},Atlantis.Vector3.transformCoordinate=function(t,e){var i=new Atlantis.Vector4;return i.x=t.x*e.M11+t.y*e.M21+t.z*e.M31+e.M41,i.y=t.x*e.M12+t.y*e.M22+t.z*e.M32+e.M42,i.z=t.x*e.M13+t.y*e.M23+t.z*e.M33+e.M43,i.w=1/(t.x*e.M14+t.y*e.M24+t.z*e.M34+e.M44),new Atlantis.Vector3(i.x*i.w,i.y*i.w,i.z*i.w)},Atlantis.Vector3.prototype.set=function(t,e,i){this.x=t,this.y=e,this.z=i},Atlantis.Vector3.prototype.clone=function(){return new Atlantis.Vector3(this.x,this.y,this.z)},Atlantis.Vector3.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Vector4=function(t,e,i,n){this.x=t?+t:0,this.y=e?+e:0,this.z=i?+i:0,this.z=n?+n:0},Atlantis.Vector4.prototype.fromVector=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},Atlantis.Vector4.prototype.lerp=function(t,e){this.x=Atlantis.MathHelper.lerp(this.x,t.x,e),this.y=Atlantis.MathHelper.lerp(this.y,t.y,e),this.z=Atlantis.MathHelper.lerp(this.z,t.z,e),this.w=Atlantis.MathHelper.lerp(this.w,t.w,e)},Atlantis.Vector4.lerp=function(t,e,i){var n=new Vector4(t);return n.lerp(e,i),n},Atlantis.Vector4.prototype.clone=function(){return new Atlantis.Vector4(this.x,this.y,this.z,this.w)},Atlantis.Vector4.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z,\" w: \",this.w].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.KeyboardState=function(t){this.keys=[];for(var e=0,i=t.length;i>e;e++)this.keys.push(t[e])},Atlantis.KeyboardState.prototype.clone=function(){return new Atlantis.Input.KeyboardState(this.keys)},Atlantis.KeyboardState.prototype.isKeyDown=function(t){return this.keys[t]===!0},Atlantis.KeyboardState.prototype.isKeyUp=function(t){return this.keys[t]===!1},Atlantis.Keyboard=function(t){this.keys=[],this.maxKeys=t||130;for(var e=0;t>e;e++)this.keys[e]=!1;var i=this,n=function(t){Atlantis.Keyboard.preventDefault&&t.preventDefault(),i.keys[t.keyCode]=\"keydown\"===t.type?!0:!1};document.addEventListener(\"keydown\",n,!1),document.addEventListener(\"keyup\",n,!1)},Atlantis.Keyboard.preventDefault=!1,Atlantis.Keyboard.prototype.getState=function(){return new Atlantis.KeyboardState(this.keys)};var Atlantis=window.Atlantis||{};Atlantis.ButtonState={Released:0,Pressed:1},Atlantis.MouseState=function(t,e,i,n){this.x=t,this.y=e,this.scrollWheelValue=i,this.leftButton=n[0],this.rightButton=n[2],this.middleButton=n[1]},Atlantis.MouseState.prototype.clone=function(){return new Atlantis.MouseState(this.x,this.y,this.scrollWheelValue,[this.leftButton,this.middleButton,this.rightButton])},Atlantis.Mouse=function(t){var t=t instanceof HTMLElement?t:document.body;this._x=0,this._y=0,this._scroll=0,this._buttons=[],this._buttons[0]=!1,this._buttons[1]=!1,this._buttons[2]=!1,this.preventDefault=!0;var e=this,i=function(){e._buttons[0]=!1,e._buttons[1]=!1,e._buttons[2]=!1},n=function(n){e._x=(n.pageX-t.offsetLeft)*Atlantis.Game.scaleFactor.x,e._y=(n.pageY-t.offsetTop)*Atlantis.Game.scaleFactor.y,\"mousemove\"!==n.type&&\"pointermove\"!==n.type&&(i(),\"mousedown\"===n.type||\"pointerdown\"===n.type?e._buttons[n.button]=!0:e._buttons[n.button]=!1)},s=function(t){e._scroll=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail))};t.addEventListener(\"mousedown\",n,!1),t.addEventListener(\"mousemove\",n,!1),t.addEventListener(\"mouseup\",n,!1),t.addEventListener(\"mousewheel\",s,!1),t.addEventListener(\"DOMMouseScroll\",s,!1)},Atlantis.Mouse.prototype.getState=function(){return new Atlantis.MouseState(this._x,this._y,this._scroll,this._buttons)};var Atlantis=window.Atlantis||{};Atlantis.TouchLocationState={Invalid:1,Moved:2,Pressed:3,Released:4},Atlantis.TouchCollection=function(t){Array.call(this);for(var t=t||[],e=0,i=t.length;i>e;e++)this.push(new Atlantis.TouchPanelState(t[e]))},Atlantis.TouchCollection.prototype=Object.create(Array.prototype),Atlantis.TouchCollection.prototype.clone=function(){for(var t=[],e=0,i=this.length;i>e;e++)t.push(this[e].clone());return new Atlantis.TouchCollection(t)},Atlantis.TouchPanelState=function(t){this.state=t.state||Atlantis.TouchLocationState.Invalid,this.position=t.position?t.position:new Atlantis.Vector2(0,0)},Atlantis.TouchPanelState.prototype.clone=function(){\nreturn new Atlantis.TouchPanelState({state:this.state,position:{x:this.position.x,y:this.position.y}})},Atlantis.TouchPanel=function(t){this._states=[new Atlantis.TouchPanelState({}),new Atlantis.TouchPanelState({}),new Atlantis.TouchPanelState({})];var e={up:\"touchend\",down:\"touchstart\",cancel:\"touchcancel\",move:\"touchmove\",callback:null},i=this,n=null,s=!1,a=function(a,o){if(i._states[a]||(i._states[a]=new Atlantis.TouchPanelState),o.touches?(i._states[a].position.x=o.touches[a].pageX-t.offsetLeft,i._states[a].position.y=o.touches[a].pageY-t.offsetTop):(i._states[a].position.x=o.clientX-t.offsetLeft,i._states[a].position.y=o.clientY-t.offsetTop),i._states[a].position.x*=Atlantis.Game.scaleFactor.x,i._states[a].position.y*=Atlantis.Game.scaleFactor.y,s){var r=n===e.down&&o.type===e.move;if(n=o.type,r)return void(n=null)}o.type==e.down?i._states[a].state=Atlantis.TouchLocationState.Pressed:o.type==e.move?(o.preventDefault(),i._states[a].state=Atlantis.TouchLocationState.Moved):o.type==e.up?i._states[a].state=Atlantis.TouchLocationState.Released:i._states[a].state=Atlantis.TouchLocationState.Invalid},o=function(t){if(\"touchend\"===t.type||\"touchcancel\"===t.type)for(var e=0,n=i._states.length;n>e;e++)i._states[e].state=\"touchend\"===t.type?Atlantis.TouchLocationState.Released:Atlantis.TouchLocationState.Invalid;else for(var e=0,n=t.touches.length;n>e;e++)a(e,t)},r=function(t){t.preventDefault(),\"MSPointerUp\"===t.type||\"MSPointerCancel\"===t.type||\"pointerup\"===t.type||\"pointercancel\"===t.type?i._states[0].state=\"MSPointerUp\"===t.type||\"pointerup\"===t.type?Atlantis.TouchLocationState.Released:Atlantis.TouchLocationState.Invalid:a(0,t)},h=+navigator.maxTouchPoints||+navigator.msMaxTouchPoints;0!==h&&(window.PointerEvent?(e.up=\"pointerup\",e.down=\"pointerdown\",e.move=\"pointermove\",e.cancel=\"pointercancel\",e.callback=r):window.MSPointerEvent?(e.up=\"MSPointerUp\",e.down=\"MSPointerDown\",e.move=\"MSPointerMove\",e.cancel=\"MSPointerCancel\",e.callback=r):e.callback=o,s=\"touchstart\"!==e.down,t.addEventListener(e.down,e.callback,!1),t.addEventListener(e.move,e.callback,!1),t.addEventListener(e.up,e.callback,!1),t.addEventListener(e.cancel,e.callback,!1))},Atlantis.TouchPanel.prototype.getCapabilities=function(){return{hasTouch:!!(\"ontouchstart\"in window)||!!(\"ongesturechange\"in window)}},Atlantis.TouchPanel.prototype.getState=function(t){return\"number\"==typeof t?new Atlantis.TouchPanelState(this._states[t]?this._states[t]:{}):new Atlantis.TouchCollection(this._states)};var Atlantis=window.Atlantis||{};Atlantis.GamepadButton={A:0,B:1,X:2,Y:3,LeftShoulder:4,RightShoulder:5,LeftTrigger:6,RightTrigger:7,Select:8,Start:9,L3:10,R3:11,DPadUp:12,DPadDown:13,DPadLeft:14,DPadRight:15},Atlantis.GamepadAxis={Horizontal:0,Vertical:1,HorizontalRight:2,VerticalRight:3},Atlantis.GamepadState=function(t,e){if(this.axis=[],this.buttons=[],t)for(var i=0,n=t.length;n>i;i++)this.axis.push(t[i]);else for(var i=0;6>i;i++)this.axis.push(0);if(e)for(var i=0,n=e.length;n>i;i++)this.buttons.push(e[i]);else for(var i=0;15>i;i++)this.buttons.push(!1)},Atlantis.GamepadState.prototype.isButtonDown=function(t){return this.buttons[t]},Atlantis.GamepadState.prototype.isButtonUp=function(t){return!this.buttons[t]},Atlantis.GamepadState.prototype.getAxis=function(t){return this.axis[t]},Atlantis.Gamepad=function(){Atlantis.GameComponent.call(this),this._gamepads=[],this._states={}},Atlantis.Gamepad.prototype=Object.create(Atlantis.GameComponent.prototype),Atlantis.Gamepad.prototype.initialize=function(){var t=this;navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.msGetGamepads||navigator.webkitGamepads,this._gamepadsSupported=navigator.getGamepads?!0:!1,window.addEventListener(\"gamepadconnected\",function(e){t._addGamepad(e.gamepad)},!1),window.addEventListener(\"gamepaddisconnected\",function(e){t._removeGamepad(e.gamepad)},!1)},Atlantis.Gamepad.prototype._addGamepad=function(t){this._gamepads.push(t),this._states[t.index]=new Atlantis.GamepadState},Atlantis.Gamepad.prototype._removeGamepad=function(t){delete this._gamepads[t.index],delete this._states[t.index]},Atlantis.Gamepad.prototype._updateGamepads=function(){for(var t=navigator.getGamepads(),e=0;e<t.length;e++)t[e]&&-1===this._gamepads.indexOf(t[e])&&this._addGamepad(t[e])},Atlantis.Gamepad.prototype.update=function(t){if(this._gamepadsSupported){this._updateGamepads();for(var e=0,i=this._gamepads.length;i>e;e++){for(var n=this._gamepads[e],s=0,a=n.buttons.length;a>s;s++){var o=n.buttons[s],r=1===o?!0:!1;\"object\"==typeof o&&(r=o.pressed,o=o.value),this._states[n.index].buttons[s]=r}for(var s=0,a=n.axes.length;a>s;s++)this._states[n.index].axis[s]=0|+n.axes[s]}}},Atlantis.Gamepad.prototype.getState=function(t){var t=\"undefined\"!=typeof t?t:0;return this._gamepads[t]?new Atlantis.GamepadState(this._states[t].axis,this._states[t].buttons):new Atlantis.GamepadState};var Atlantis=window.Atlantis||{};Atlantis.Keys={BackSpace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,Escape:27,Space:32,Home:36,End:35,Left:37,Up:38,Right:39,Down:40,Suppr:46,PageUp:33,PageDown:34,Insert:45,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Super:91,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var Atlantis=window.Atlantis||{};Atlantis.ScaleMode={ScaleToFit:0,ConserveAspectRatio:1,NoScaleCenter:2},Atlantis.GraphicsDevice=function(t,e,i){var i=i||{};if(i.width=t,i.height=e,this.preferredBackBufferWidth=i.backBufferWidth||t,this.preferredBackBufferHeight=i.backBufferHeight||e,this.disableSmoothing=!1,this.forceDisableSmoothing=!1,this.viewport=new Atlantis.Rectangle,this.scaleMode=Atlantis.ScaleMode.ScaleToFit,t&&e){this._frontBuffer=new Atlantis.RenderTarget(t,e,i.canvas),this._fbContext=this._frontBuffer.getContext(),this._backBuffer=new Atlantis.RenderTarget(this.preferredBackBufferWidth,this.preferredBackBufferHeight),this._bbCanvas=this._backBuffer.getCanvas();var n=this._frontBuffer.getCanvas();n.style.msTouchAction=\"none\",n.style.backgroundColor=\"#000\",n.id=n.id?n.id:\"AtlantisCanvas\",this.viewport.setSize(this.preferredBackBufferWidth,this.preferredBackBufferHeight)}},Atlantis.GraphicsDevice.prototype.applyChanges=function(){this._backBuffer.setSize(this.preferredBackBufferWidth,this.preferredBackBufferHeight);var t=this._frontBuffer.getWidth(),e=this._frontBuffer.getHeight();if(this.scaleMode==Atlantis.ScaleMode.ScaleToFit||t===this.preferredBackBufferWidth&&e===this.preferredBackBufferHeight)this.viewport.set(0,0,t,e);else if(this.scaleMode==Atlantis.ScaleMode.ConserveAspectRatio){var i=0;this.preferredBackBufferWidth>this.preferredBackBufferHeight?(i=this.preferredBackBufferWidth/t,this.viewport.width=t,this.viewport.height=this.preferredBackBufferHeight*(1+i)):(i=this.preferredBackBufferHeight/e,this.viewport.width=this.preferredBackBufferWidth*(1+i),this.viewport.height=e),this.viewport.x=t/2-this.viewport.width/2,this.viewport.y=e/2-this.viewport.height/2}else this.scaleMode==Atlantis.ScaleMode.NoScaleCenter&&(this.viewport.x=t/2-this.preferredBackBufferWidth/2,this.viewport.y=e/2-this.preferredBackBufferHeight/2,this.viewport.width=this.preferredBackBufferWidth,this.viewport.height=this.preferredBackBufferHeight);Atlantis.Game.scaleFactor.x=this.preferredBackBufferWidth/this._frontBuffer.getWidth(),Atlantis.Game.scaleFactor.y=this.preferredBackBufferHeight/this._frontBuffer.getHeight(),Atlantis.notify(Atlantis.events.ResolutionChanged,{width:this.preferredBackBufferWidth,height:this.preferredBackBufferHeight})},Atlantis.GraphicsDevice.prototype.getBackBuffer=function(){return this._backBuffer},Atlantis.GraphicsDevice.prototype.getFrontBuffer=function(){return this._frontBuffer},Atlantis.GraphicsDevice.prototype.clear=function(t){this._backBuffer.clear(t),this._frontBuffer.clear(t),this.disableSmoothing&&(this._backBuffer.getContext().imageSmoothingEnabled=!1,this._fbContext.imageSmoothingEnabled=!1)},Atlantis.GraphicsDevice.prototype.present=function(){this._fbContext.drawImage(this._bbCanvas,this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height)},Atlantis.GraphicsDevice.prototype.toggleFullscreen=function(t){var t=t instanceof HTMLElement?t:this._frontBuffer.getCanvas(),e=this.isFullscreen();t.requestFullScreen=t.requestFullScreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||function(){return!1},document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||function(){return!1},e?document.cancelFullScreen():t.requestFullScreen()},Atlantis.GraphicsDevice.prototype.isFullscreen=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||!1};var Atlantis=window.Atlantis||{};Atlantis.SpriteSortMode={BackToFront:0,FrontToBack:1,Immediate:2},Atlantis.SpriteEffect={None:0,FlipHorizontaly:1,FlipVerticaly:2},Atlantis.BatchItemType={Texture:0,Font:1},Atlantis.SpriteBatch=function(t){this._graphicsDevice=t,this._viewport=new Atlantis.Rectangle(0,0,t.preferredBackBufferWidth,t.preferredBackBufferHeight),this._canvas=this._graphicsDevice.getBackBuffer().getCanvas(),this._context=this._graphicsDevice.getBackBuffer().getContext(),this._batchItems=[],this._batchStarted=!1,this._spriteSortMode=Atlantis.SpriteSortMode.Immediate,this._transformMatrix=null,this._cacheColoredTextures=[],this._batchRect=new Atlantis.Rectangle,document.addEventListener(Atlantis.events.ResolutionChanged,this._onResize.bind(this),!1)},Atlantis.SpriteBatch.prototype._onResize=function(t){this._viewport.width=t.width,this._viewport.height=t.height},Atlantis.SpriteBatch.prototype.begin=function(t,e){this._batchStarted||(this._batchStarted=!0,this._spriteSortMode=\"number\"==typeof t?t:Atlantis.SpriteSortMode.Immediate,this._transformMatrix=e,this._transformMatrix&&(this._context.save(),this._context.transform(this._transformMatrix[0],this._transformMatrix[1],this._transformMatrix[2],this._transformMatrix[3],this._transformMatrix[4],this._transformMatrix[5])))},Atlantis.SpriteBatch.prototype.draw=function(t,e,i,n,s,a,o,r,h){this._batchStarted&&(e.width||(e.width=t.width,e.height=t.height),this._spriteSortMode==Atlantis.SpriteSortMode.Immediate?this._drawBatchItem(t,e,i,n,s,a,o,r,h,Atlantis.BatchItemType.Texture):this._batchItems.push({type:Atlantis.BatchItemType.Texture,texture2D:t,sourceRectangle:i,destinationRectangle:e,color:n,rotation:s,origin:a,scale:o,effect:r?r:Atlantis.SpriteEffect.None,layerDepth:0|+h}))},Atlantis.SpriteBatch.prototype.drawString=function(t,e,i,n,s,a,o,r,h){this._batchStarted&&(this._spriteSortMode===Atlantis.SpriteSortMode.Immediate?this._drawBatchItem(t,i,e,n,s,a,o,r,h,Atlantis.BatchItemType.Font):this._batchItems.push({type:Atlantis.BatchItemType.Font,texture2D:t,sourceRectangle:e,destinationRectangle:{x:i.x,y:i.y,width:1,height:1},color:n,rotation:s,origin:a,scale:o,effect:r?r:Atlantis.SpriteEffect.None,layerDepth:0|+h}))},Atlantis.SpriteBatch.prototype.end=function(){if(this._batchStarted){if(this._spriteSortMode!==Atlantis.SpriteSortMode.Immediate){this._batchItems=this._batchItems.sort(this._sortBatchItem.bind(this));for(var t=0,e=this._batchItems.length;e>t;t++)this._drawBatchItem(this._batchItems[t].texture2D,this._batchItems[t].destinationRectangle,this._batchItems[t].sourceRectangle,this._batchItems[t].color,this._batchItems[t].rotation,this._batchItems[t].origin,this._batchItems[t].scale,this._batchItems[t].effect,this._batchItems[t].layerDepth,this._batchItems[t].type);this._batchItems.length=0}this._transformMatrix&&this._context.restore(),this._batchStarted=!1}},Atlantis.SpriteBatch.drawTexture=function(t,e,i,n,s,a,o){o?t.drawImage(e,o.x,o.y,o.width,o.height,i,n,s,a):t.drawImage(e,i,n,s,a)},Atlantis.SpriteBatch.drawString=function(t,e,i,n,s){t.fillStyle=s,t.font=e.getFont(),e.strokeStyle&&e.lineWidth&&(t.lineWidth=e.lineWidth,t.strokeStyle=e.strokeStyle,e.wrapText||t.strokeText(i,n.x,n.y)),e.wrapText?Atlantis.SpriteBatch._wrapText(t,i,n.x,n.y,n.width,e.size,e.strokeStyle&&e.lineWidth):t.fillText(i,n.x,n.y)},Atlantis.SpriteBatch.prototype._drawBatchItem=function(t,e,i,n,s,a,o,r,h,c){if(this._batchRect.fromRectangle(e),this._viewport.intersects(this._batchRect)){var l=a?a.x:0,u=a?a.y:0;this._context.save(),this._context.translate(e.x,e.y),this._context.translate(l,u),this._batchRect.x=-l,this._batchRect.y=-u,s&&this._context.rotate(s),o&&this._context.scale(o.x,o.y),r&&r!==Atlantis.SpriteEffect.None&&(r==Atlantis.SpriteEffect.FlipHorizontaly?(this._context.scale(-1,1),this._batchRect.x-=this._batchRect.width):(this._context.scale(1,-1),this._batchRect.y-=this._batchRect.height)),c===Atlantis.BatchItemType.Texture?n&&t.width&&t.height?Atlantis.SpriteBatch.drawTexture(this._context,this._colorizeTexture(t,n),this._batchRect.x,this._batchRect.y,this._batchRect.width,this._batchRect.height,i):Atlantis.SpriteBatch.drawTexture(this._context,t,this._batchRect.x,this._batchRect.y,this._batchRect.width,this._batchRect.height,i):c===Atlantis.BatchItemType.Font&&Atlantis.SpriteBatch.drawString(this._context,t,i,this._batchRect,n),this._context.restore()}},Atlantis.SpriteBatch.prototype._colorizeTexture=function(t,e){var i=this._searchColoredTexture(t,e);if(!i){i=document.createElement(\"canvas\"),i.width=t.width,i.height=t.height;var n=i.getContext(\"2d\");n.drawImage(t,0,0);for(var s=n.getImageData(0,0,t.width,t.height),a=this._hexaToBytes(e),o=0,r=s.data.length;r>o;o+=4)s.data[o]=a.r|s.data[o],s.data[o+1]=a.g|s.data[o+1],s.data[o+2]=a.b|s.data[o+2],s.data[o+3]=a.a|s.data[o+3];n.putImageData(s,0,0),this._cacheColoredTextures.push({texture:t,color:e,canvas:i})}return i},Atlantis.SpriteBatch.prototype._hexaToBytes=function(t){var e=t.split(\"#\")[1],i={r:0,g:0,b:0,a:0},n=e.length;return 3===n?(i.r=parseInt(e[0]+e[0],16),i.g=parseInt(e[1]+e[1],16),i.b=parseInt(e[2]+e[2],16)):6===n?(i.r=parseInt(e.slice(0,2),16),i.g=parseInt(e.slice(2,4),16),i.b=parseInt(e.slice(4,6),16)):8===n&&(i.r=parseInt(e.slice(0,2),16),i.g=parseInt(e.slice(2,4),16),i.b=parseInt(e.slice(4,6),16),i.a=parseInt(e.slice(6,8),16)),i},Atlantis.SpriteBatch.prototype._searchColoredTexture=function(t,e){for(var i=0,n=this._cacheColoredTextures.length,s=null;n>i&&null===s;)s=this._cacheColoredTextures[i].texture===t&&this._cacheColoredTextures[i].color===e?this._cacheColoredTextures[i].canvas:null,i++;return s},Atlantis.SpriteBatch.prototype._sortBatchItem=function(t,e){return this._spriteSortMode===Atlantis.SpriteSortMode.BackToFront?+t.layerDepth>+e.layerDepth?1:+t.layerDepth<+e.layerDepth?-1:0:+t.layerDepth<+e.layerDepth?1:+t.layerDepth>+e.layerDepth?-1:0},Atlantis.SpriteBatch._wrapText=function(t,e,i,n,s,a,o){for(var r=e.split(\" \"),h=\"\",c=0;c<r.length;c++){var l=h+r[c]+\" \",u=t.measureText(l),p=u.width;p>s&&c>0?(o&&t.strokeText(h,i,n),t.fillText(h,i,n),h=r[c]+\" \",n+=a):h=l}o&&t.strokeText(h,i,n),t.fillText(h,i,n)};var Atlantis=window.Atlantis||{};Atlantis.RenderTarget=function(t,e,i){this._canvas=i,this._canvas||(this._canvas=document.createElement(\"canvas\"),this.setSize(t,e)),this._context=null,this._data=null,this._needUpdate=!1,this._context=this._canvas.getContext(\"2d\"),this.setSize(t,e)},Atlantis.RenderTarget.fromImage=function(t){var e=new Atlantis.RenderTarget(t.width,t.height,!1);return e._context.drawImage(t,0,0,t.width,t.height),e},Atlantis.RenderTarget.prototype.setData=function(t){this._context.putImageData(t,0,0)},Atlantis.RenderTarget.prototype.getData=function(){return(!this._data||this._needUpdate)&&(this._data=this._context.getImageData(0,0,this._canvas.width,this._canvas.height)),this._data},Atlantis.RenderTarget.prototype.getPixelData=function(t,e){var i=this._context.getImageData(t,e,1,1).data;return{r:i[0],g:i[1],b:i[2],a:i[3]}},Atlantis.RenderTarget.prototype.getContext=function(){return this._context},Atlantis.RenderTarget.prototype.getCanvas=function(){return this._canvas},Atlantis.RenderTarget.prototype.getWidth=function(){return this._canvas.width},Atlantis.RenderTarget.prototype.getHeight=function(){return this._canvas.height},Atlantis.RenderTarget.prototype.setSize=function(t,e){this._canvas.width=t,this._canvas.height=e},Atlantis.RenderTarget.prototype.clear=function(t){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)},Atlantis.RenderTarget.prototype.saveAsPng=function(){return this._canvas.toDataURL(\"image/png\")},Atlantis.RenderTarget.prototype.saveAsJpg=function(){return this._canvas.toDataURL(\"image/jpg\")};var Atlantis=window.Atlantis||{};Atlantis.SpriteFont=function(t,e,i){this.fontName=t||\"Arial\",this.size=e||14,this.style=i||\"normal\",this.strokeStyle=null,this.lineWidth=0},Atlantis.SpriteFont.prototype.getFont=function(){return[this.style,\" \",this.size,\"px \",this.fontName].join(\"\")},Atlantis.SpriteFont.prototype.clone=function(){var t=new Atlantis.SpriteFont(this.fontName,this.size,this.style);return t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t};var Atlantis=window.Atlantis||{};Atlantis.Preloader=function(t){this.screenWidth=t.graphicsDevice.preferredBackBufferWidth,this.screenHeight=t.graphicsDevice.preferredBackBufferHeight,this.screenWidthPerTwo=this.screenWidth/2,this.screenHeightPerTwo=this.screenHeight/2,this.spriteFont=new Atlantis.SpriteFont(\"Arial\",32)},Atlantis.Preloader.prototype.onProgress=function(t,e){var i=[\"Game loading \",Math.round(e.progress),\"%\"].join(\"\"),n=t.measureText(i),s=this.screenWidthPerTwo-n.width/2,a=this.screenHeightPerTwo-this.spriteFont.size/2;t.clearRect(0,0,this.screenWidth,this.screenHeight),t.fillStyle=\"#fafafa\",t.font=this.spriteFont.getFont(),t.fillText(i,s,a)};var Atlantis=window.Atlantis||{};Atlantis.Game=function(){function t(){i.gameTime.update(),i.update(i.gameTime),i.draw(i.gameTime),i.afterDraw(i.gamepad),i._paused||requestAnimationFrame(t)}function e(t){i.width=t.target.innerWidth,i.height=t.target.innerHeight,i.canvas.width=i.width,i.canvas.height=i.height}var i=null,n=function(t,e,n,s){this.settings=s||{};var t=t||window.innerWidth,e=e||window.innerHeight;this.domElement=document.body,typeof n instanceof HTMLElement?this.domElement=n:\"string\"==typeof n&&(\".\"===n[0]?(n=n.replace(\".\",\"\"),this.domElement=document.getElementsByClassName(n)[0]):(n=\"#\"===n[0]?n.replace(\"#\",\"\"):n,this.domElement=document.getElementById(n))),this.domElement instanceof HTMLCanvasElement&&(this.settings.canvas=this.domElement),this.version=\"0.0.0.1\",this.gameTime=new Atlantis.GameTime,this.components=new Atlantis.GameComponentCollection,this.content=new Atlantis.ContentManager,this.keyboard=null,this.mouse=null,this.touchPanel=null,this.gamepad=null,this.preloader=null,this.graphicsDevice=new Atlantis.GraphicsDevice(t,e,this.settings),this.canvas=this.settings.canvas,this.frontBuffer=null,this.context=null,this.initialized=!1,this._paused=!1,i=this};return n.scaleFactor=new Atlantis.Vector2(1,1),n.prototype._internalIntialize=function(){this.frontBuffer=this.graphicsDevice.getFrontBuffer(),this.context=this.frontBuffer.getContext(),this.canvas||(this.canvas=this.frontBuffer.getCanvas()),this.keyboard=new Atlantis.Keyboard,this.mouse=new Atlantis.Mouse(this.frontBuffer.getCanvas()),this.touchPanel=new Atlantis.TouchPanel(this.frontBuffer.getCanvas()),this.gamepad=new Atlantis.Gamepad,this.components.add(this.gamepad),this.settings.resizeEnabled&&window.addEventListener(\"resize\",e,!1),this.domElement&&!this.settings.canvas&&this.domElement.appendChild(this.frontBuffer.getCanvas())},n.prototype.initialize=function(){this.components.initialize()},n.prototype.loadContent=function(){this.components.loadContent(this.content)},n.prototype.unloadContent=function(){this.components.unloadContent()},n.prototype.update=function(t){this.components.update(t)},n.prototype.draw=function(t,e){this.settings.autoClear&&this.graphicsDevice.clear(),this.components.draw(t,e)},n.prototype.afterDraw=function(t){this.graphicsDevice.present()},n.prototype.run=function(){var e=this,i=function(){e.initialize(),e.initialized=!0,e.loadContent(),e.frontBuffer.getCanvas().focus(),t()};this.initialized||(this.initialized=!0,this._internalIntialize(),this.content.preloader.length?(null===this.preloader&&(this.preloader=new Atlantis.Preloader(this)),this.content.preload(function(t){this.preloader.onProgress(this.context,t)}.bind(this),function(){this.context.clearRect(0,0,this.frontBuffer.getWidth(),this.frontBuffer.getHeight()),i()}.bind(this))):i())},n.prototype.pause=function(){cancelAnimationFrame(t),this._paused=!0},n.prototype.resume=function(){this._paused&&(this._paused=!1,t())},n}();\n//# sourceMappingURL=atlantis.framework.min.js.map\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * An helper to generate random value for some types.\r\n * @class Random\r\n * @static\r\n */\r\nAtlantis.Random = {\r\n\t/**\r\n\t * Gets a random value.\r\n\t * @method value\r\n\t * @return {Number} Return a random value.\r\n\t */\r\n\tvalue: function() {\r\n\t\treturn Math.random();\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random float between min and max.\r\n\t * @method randomFloat\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Number} Return a random value between min and max.\r\n\t */\r\n\trandomFloat: function(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random integer between min and max.\r\n\t * @method randomFloat\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Number} Return a random value between min and max.\r\n\t */\r\n\trandomInt: function(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random Vector2 between min and max.\r\n\t * @method vector2\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector2} Return a random Vector2 between min and max.\r\n\t */\r\n\tvector2: function(min, max) {\r\n\t\treturn new Atlantis.Vector2(this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random Vector3 between min and max.\r\n\t * @method vector3\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector3} Return a random vector3 between min and max.\r\n\t */\r\n\tvector3: function(min, max) {\r\n\t\treturn new Atlantis.Vector3(this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random vector4 between min and max.\r\n\t * @method vector4\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector4} Return a random vector4 between min and max.\r\n\t */\r\n\tvector4: function(min, max) {\r\n\t\treturn new Atlantis.Vector4(this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random float between min and max.\r\n\t * @method color\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {String} Return a random color in hexadecimal format.\r\n\t */\r\n\tcolor: function() {\r\n\t\treturn (\"#\" + (Math.floor(Math.random() * 16777215).toString(16)));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random element from an Array.\r\n\t * @method randomArrayItem\r\n\t * @param {Array} array The array to use.\r\n\t * @return {Object} Return a random value from the array.\r\n\t */\r\n\trandomArrayItem: function(array) {\r\n\t\tif (array.length === 0) return undefined;\r\n\t\treturn array[Atlantis.Random.randomInt(0, array.length - 1)];\r\n\t}\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * Define a music status\r\n * @class MusicState\r\n * @static\r\n */\r\nAtlantis.MusicState = {\r\n    Playing: 1,\r\n    Stopped: 2,\r\n    Paused: 3\r\n};\r\n\r\n/**\r\n * An audio manager to play sound and musics.\r\n * @constructor \r\n * @class AudioManager\r\n */\r\nAtlantis.AudioManager = function() {\r\n    this.repeatMusic = false;\r\n    this.currentMusic = null;\r\n    this.volume = 1;\r\n    this.currentState = Atlantis.MusicState.STOPPED;\r\n};\r\n\r\n/**\r\n * Play a sound or a music one time\r\n * @method playOneShot\r\n */\r\nAtlantis.AudioManager.prototype.playOneShot = function(audioClip) {\r\n    audioClip.play();\r\n};\r\n\r\n/**\r\n * Play a music.\r\n * @method playMusic\r\n * @param {AudioElement} music An HTML Audio Element that contains the music.\r\n * @param {Boolean} repeat Sets to true for enable repeat.\r\n */\r\nAtlantis.AudioManager.prototype.play = function(music, repeat) {\r\n    this.stopMusic();\r\n    this.currentMusic = music;\r\n    this.repeat = repeat;\r\n    this.currentMusic.play();\r\n    this.currentState = Atlantis.MusicState.Playing;\r\n};\r\n\r\n/**\r\n * Stop the current played music.\r\n * @method stopMusic\r\n */\r\nAtlantis.AudioManager.prototype.stop = function() {\r\n    this.currentMusic.stop();\r\n    this.currentState = Atlantis.MusicState.Stopped;\r\n};\r\n\r\n/**\r\n * Pause the current played music.\r\n * @method pauseMusic\r\n */\r\nAtlantis.AudioManager.prototype.pause = function() {\r\n    if (this.currentState == Atlantis.MusicState.Playing) {\r\n        this.currentMusic.pause();\r\n        this.currentState = Atlantis.MusicState.Paused;\r\n    }\r\n};\r\n\r\n/**\r\n * Resume a paused music.\r\n * @method resume\r\n */\r\nAtlantis.AudioManager.prototype.resume = function() {\r\n    if (this.currentState == Atlantis.MusicState.Paused) {\r\n        this.currentMusic.play();\r\n        this.currentState = Atlantis.MusicState.Playing;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A storage manager that work with localStorage\r\n * @constructor\r\n * @class StorageManager\r\n */\r\nAtlantis.StorageManager = function() {\r\n\tthis.container = \"atlantis.game\";\r\n};\r\n\r\n/**\r\n * Save data in the localStorage.\r\n * @method save\r\n * @param {String} container The localStorage key.\r\n * @param {String} name Desired name for the data who'll save.\r\n * @param {Object} or {String} data An object to serialize or a serialized object.\r\n */\r\nAtlantis.StorageManager.prototype.save = function(name, data) {\r\n\tif (typeof(data) === \"object\") {\r\n\t\tdata = JSON.stringify(data);\r\n\t}\r\n\r\n\tlocalStorage.setItem(this.getLocalStorageKey(name), data);\r\n};\r\n\r\n/**\r\n * Load data from the localStorage.\r\n * @method load\r\n * @param {String} name The data key.\r\n * @param {Object} defaultValue The default value if the data not exists.\r\n * @return {Object} The object if exists otherwise return defaultValue\r\n */\r\nAtlantis.StorageManager.prototype.load = function(name, defaultValue) {\r\n\tvar data = localStorage.getItem(this.getLocalStorageKey(name));\r\n\treturn data !== null ? data : defaultValue;\r\n};\r\n\r\n/**\r\n * Gets the localStorage key with a container name and a data name.\r\n * @method getLoadStorageKey\r\n * @param {String} name Desired name for the data who'll save.\r\n * @return {string} The localStorage final key.\r\n */\r\nAtlantis.StorageManager.prototype.getLocalStorageKey = function(name) {\r\n\treturn [this.container, \".\", name].join(\"\");\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A level manager.\r\n * @constructor\r\n * @class LevelManager\r\n */\r\nAtlantis.LevelManager = function(game) {\r\n    Atlantis.DrawableGameComponent.call(this, game);\r\n    this.graphicsDevice = game.graphicsDevice;\r\n    this.levels = [];\r\n    this.autoClear = true;\r\n    this.activeLevel = null;\r\n    this.initialized = false;\r\n    this._autoLoadLevel;\r\n};\r\n\r\nAtlantis.LevelManager.prototype = Object.create(Atlantis.DrawableGameComponent.prototype);\r\n\r\nAtlantis.LevelManager.prototype.initialize = function() {\r\n    this.initialized = true;\r\n\r\n    if (typeof(this._autoLoadLevel) !== \"undefined\") {\r\n        this.loadLevel(this._autoLoadLevel);\r\n        this._autoLoadLevel = \"\";\r\n    }\r\n};\r\n\r\n/**\r\n * Update active level.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.LevelManager.prototype.update = function(gameTime) {\r\n    if (this.activeLevel) {\r\n        this.activeLevel.update(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n * Draw active levels.\r\n * @method draw\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.LevelManager.prototype.draw = function(gameTime) {\r\n    if (this.activeLevel) {\r\n        if (this.autoClear) {\r\n            this.graphicsDevice.clear();\r\n        }\r\n\r\n        this.activeLevel.draw(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n * Add a level to the level manager.\r\n * @method loadLevel\r\n * @param {Altantis.level} levelParam Instance of the level to add.\r\n */\r\nAtlantis.LevelManager.prototype.loadLevel = function(nameOrIndex, reinitialize) {\r\n    var reinit = typeof(reinitialize) === \"boolean\" ? reinitialize : true;\r\n\r\n    if (!this.initialized) {\r\n        this._autoLoadLevel = nameOrIndex;\r\n        return;\r\n    }\r\n\r\n    if (this.activeLevel) {\r\n        this.activeLevel.onDisabled();\r\n    }\r\n\r\n    this.activeLevel = null;\r\n\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        this.activeLevel = this.getLevelByName(nameOrIndex);\r\n    } else if (this._checkIndex(nameOrIndex)) {\r\n        this.activeLevel = this.levels[nameOrIndex];\r\n    }\r\n\r\n    if (this.activeLevel) {\r\n        if (reinit) {\r\n            this.activeLevel.initialize();\r\n        }\r\n\r\n        this.activeLevel.active = true;\r\n\r\n        this.activeLevel.onEnabled();\r\n    }\r\n};\r\n\r\n// -------------------------- //\r\n// --- Collection methods --- //\r\n// -------------------------- //\r\n\r\n/**\r\n * Add a level to the level manager.\r\n * @method add\r\n * @param {Altantis.level} name Instance of the level to add.\r\n * @param {Boolean} autoload Sets to `true` to load the level.\r\n */\r\nAtlantis.LevelManager.prototype.add = function(level, autoLoad) {\r\n    this.levels.push(level);\r\n\r\n    if (autoLoad) {\r\n        this.loadLevel(this.levels.length - 1);\r\n    }\r\n};\r\n\r\n/**\r\n * Remove a level by its index, name or instance.\r\n * @method remove\r\n * @param {Number|String} nameOrIndex level's index or name.\r\n */\r\nAtlantis.LevelManager.prototype.remove = function(nameOrIndex) {\r\n    var level = null,\r\n        index = -1;\r\n\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        level = this.getLevelByName(nameOrIndex);\r\n        index = this.levels.indexOf(level);\r\n    } else if (this._checkIndex(nameOrIndex)) {\r\n        level = this.levels[nameOrIndex];\r\n        index = nameOrIndex;\r\n    }\r\n\r\n    if (level === this.activeLevel) {\r\n        this.activeLevel = null;\r\n    }\r\n\r\n    if (this._checkIndex(index)) {\r\n        this.levels.splice(index, 1);\r\n    }\r\n};\r\n\r\n/**\r\n * Gets a level by its index or its name.\r\n * @method get\r\n * @param {Number|String} nameOrIndex level's index or name.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.get = function(nameOrIndex) {\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        return this.getLevelByName(nameOrIndex);\r\n    } else if (this._checkIndex(nameOrIndex)) {\r\n        return this.levels[nameOrIndex];\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLevelByName = function(name) {\r\n    var i = 0,\r\n        size = this.levels.length,\r\n        level = null;\r\n\r\n    while (i < size && level === null) {\r\n        level = (this.levels[i].name === name) ? this.levels[i] : level;\r\n        i++;\r\n    }\r\n\r\n    return level;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLoadedLevelIndex = function() {\r\n    if (this.activeLevel) {\r\n        return this.levels.indexOf(this.activeLevel);\r\n    }\r\n    return -1;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLoadedLevelName = function() {\r\n    if (this.activeLevel) {\r\n        return this.activeLevel.name;\r\n    }\r\n    return -1;\r\n};\r\n\r\nAtlantis.LevelManager.prototype._checkIndex = function(index) {\r\n    return index > -1 && index < this.levels.length;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A sprite animation define an animation which is a group of frames\r\n * An animation is a serie of rectangle on a spritesheet\r\n * @constructor\r\n * @class SpriteAnimation\r\n * @param length The number of frames\r\n * @param framerate The desired frame rate.\r\n */\r\nAtlantis.SpriteAnimation = function(length, framerate) {\r\n    this.rectangles = new Array(length);\r\n    this.framerate = framerate;\r\n    this.index = 0;\r\n    this.max = length;\r\n    this.elapsedTime = 0;\r\n    this.length = length;\r\n};\r\n\r\n/**\r\n * Gets the next available frame of the animation.\r\n * @method next\r\n * @return {Atlantis.Rectangle} Return the next frame of the animation.\r\n */\r\nAtlantis.SpriteAnimation.prototype.next = function() {\r\n    if (this.index >= this.rectangles.length) {\r\n        this.index = 0;\r\n    }\r\n    return this.rectangles[this.index];\r\n};\r\n\r\n/**\r\n * Update animation index relative to time.\r\n * @method update\r\n */\r\nAtlantis.SpriteAnimation.prototype.update = function(gameTime) {\r\n    this.elapsedTime += gameTime.getElapsedTime();\r\n\r\n    if (this.elapsedTime > this.framerate) {\r\n        this.index++;\r\n        this.elapsedTime = 0;\r\n    }\r\n};\r\n\r\n/**\r\n * A SpriteAnimator is a class that is used to play sprite animations.\r\n * A sprite has many animation that are stored in a dictionary[name] => spriteAnimation\r\n * @constructor\r\n * @class SpriteAnimator\r\n */\r\nAtlantis.SpriteAnimator = function() {\r\n    // Dictionary <string, SpriteAnimation>\r\n    this.animations = {};\r\n    this.spriteWidth = 0;\r\n    this.spriteHeight = 0;\r\n    this.textureWidth = 0;\r\n    this.textureHeight = 0;\r\n    this.nbSpriteX = 0;\r\n    this.nbSpriteY = 0;\r\n    this.spritesheetLength = 0;\r\n    this.currentAnimationName = \"\";\r\n};\r\n\r\n/**\r\n * Initialize the animator\r\n * @method initialize\r\n * @param {Number} animationWidth The width of a frame.\r\n * @param {Number} animationHeight The height of a frame.\r\n * @param {Number} textureWidth The width of the texture (spritesheet).\r\n * @param {Number} textureHeight The height of the texture (spritesheet).\r\n */\r\nAtlantis.SpriteAnimator.prototype.initialize = function(animationWidth, animationHeight, textureWidth, textureHeight) {\r\n    this.animations = {};\r\n    this.spriteWidth = animationWidth;\r\n    this.spriteHeight = animationHeight;\r\n    this.textureWidth = textureWidth;\r\n    this.textureHeight = textureHeight;\r\n    this.nbSpriteX = this.textureWidth / this.spriteWidth;\r\n    this.nbSpriteY = this.textureHeight / this.spriteHeight;\r\n    this.spritesheetLength = this.nbSpriteX * this.nbSpriteY;\r\n    this.currentAnimationName = \"\";\r\n};\r\n\r\n/**\r\n * Add an animation to the animator.\r\n * @method add\r\n * @param {String} name The name of the animation.\r\n * @param {Array} framesIndex An array of indices that compose the animation on the spritesheet.\r\n * @param {Number} framerate The desired framerate for this animation.\r\n */\r\nAtlantis.SpriteAnimator.prototype.add = function(name, framesIndex, frameRate) {\r\n    var animationLength = framesIndex.length;\r\n\r\n    var animation = new Atlantis.SpriteAnimation(animationLength, frameRate);\r\n\r\n    if (framesIndex instanceof Atlantis.Rectangle) {\r\n        animation.rectangles = framesIndex;\r\n    } else {\r\n        for (var i = 0; i < animationLength; i++) {\r\n            var x = framesIndex[i] % this.nbSpriteX;\r\n            var y = Math.floor(framesIndex[i] / this.nbSpriteX);\r\n\r\n            if (y > 0) {\r\n                x = x % (this.nbSpriteX * y);\r\n            } else {\r\n                x = x % this.nbSpriteX;\r\n            }\r\n\r\n            animation.rectangles[i] = new Atlantis.Rectangle(x * this.spriteWidth, y * this.spriteHeight, this.spriteWidth, this.spriteHeight);\r\n        }\r\n    }\r\n\r\n    this.animations[name] = animation;\r\n};\r\n\r\n/**\r\n * Play an animation.\r\n * @method play\r\n * @param {String} animationName The name of the animation to play.\r\n */\r\nAtlantis.SpriteAnimator.prototype.play = function(animationName) {\r\n    this.currentAnimationName = animationName;\r\n\r\n    return this.animations[animationName].next();\r\n};\r\n\r\n/**\r\n *\r\n * @method getCurrentAnimation\r\n */\r\nAtlantis.SpriteAnimator.prototype.getCurrentAnimation = function() {\r\n    if (this.currentAnimationName !== \"\") {\r\n        return this.animations[this.currentAnimationName];\r\n    }\r\n    return null;\r\n};\r\n\r\n/**\r\n *\r\n * @method update\r\n * @param gameTime\r\n * @param lastDistance\r\n */\r\nAtlantis.SpriteAnimator.prototype.update = function(gameTime, lastDistance) {\r\n    if (this.currentAnimationName !== \"\") {\r\n        this.animations[this.currentAnimationName].update(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method checkForIDLEAnimation\r\n */\r\nAtlantis.SpriteAnimator.prototype.checkForIDLEAnimation = function(lastDirection) {\r\n    if (this.currentAnimationName !== \"\" && lastDirection.x === 0 && lastDirection.y === 0) {\r\n        return this.animations[this.currentAnimationName].rectangles[0];\r\n    }\r\n    return null;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A camera used in a 2D scene to manage scrolling\r\n * @class Camera2D\r\n * @constructor\r\n * @param {Number} x The position on X of the camera.\r\n * @param {Number} y The position on Y of the camera.\r\n * @param {Number} width The size of the camera.\r\n * @param {Number} height The size of the camera.\r\n */\r\nAtlantis.Camera2D = function(x, y, width, height) {\r\n    this._follow = null;\r\n    this.set(x, y, width, height);\r\n};\r\n\r\nAtlantis.Camera2D.prototype.set = function(x, y, width, height) {\r\n    this.x = +x | 0;\r\n    this.y = +y | 0;\r\n    this.viewport = new Atlantis.Rectangle(0, 0, +width | 0 > 0 ? +width : Atlantis.screen.width, +height | 0 > 0 ? +height : Atlantis.screen.height);\r\n    this._center = new Atlantis.Vector2(Atlantis.screen.widthPerTwo, Atlantis.screen.heightPerTwo);\r\n};\r\n\r\nAtlantis.Camera2D.prototype.reset = function() {\r\n    this.x = 0;\r\n    this.y = 0;\r\n};\r\n\r\nAtlantis.Camera2D.onResize = function(width, height) {\r\n    this._center = new Atlantis.Vector2(width >> 1, height >> 1);\r\n};\r\n\r\n/**\r\n * Follow a sprite\r\n * @method follow\r\n * @param {Atlantis.Sprite} sprite A sprite to follow.\r\n */\r\nAtlantis.Camera2D.prototype.follow = function(sprite) {\r\n    this._follow = sprite;\r\n};\r\n\r\n/**\r\n * Gets the position of the sprite on screen relative to the camera position.\r\n * @method getSpritePosition\r\n * @return {Object} Return a structure with x and y coordinates.\r\n */\r\nAtlantis.Camera2D.prototype.getSpritePosition = function() { // FIXME rename to getPosition\r\n    if (this._follow) {\r\n        return this.getRelativePosition(this._follow);\r\n    }\r\n    return {\r\n        x: this.x,\r\n        y: this.y\r\n    };\r\n};\r\n\r\n/**\r\n * Gets the relative position of a sprite relative to the camera position.\r\n * @method getRelativePosition\r\n * @param {Atlantis.Sprite} sprite The sprite to use.\r\n * @return {Object} Return a structure with x and y coordinates.\r\n */\r\nAtlantis.Camera2D.prototype.getRelativePosition = function(sprite) {\r\n    return {\r\n        x: sprite.rectangle.x + this.x,\r\n        y: sprite.rectangle.y + this.y\r\n    };\r\n};\r\n\r\n/**\r\n * Update the camera position. If a sprite is attached to it, its position is managed by the camera.\r\n * @method update\r\n */\r\nAtlantis.Camera2D.prototype.update = function() {\r\n    if (this._follow) {\r\n        var diffX = (this._follow.rectangle.x - this._follow.lastPosition.x),\r\n            diffY = (this._follow.rectangle.y - this._follow.lastPosition.y),\r\n            targX = this._follow.rectangle.x,\r\n            targY = this._follow.rectangle.y;\r\n\r\n        if ((this._follow.rectangle.x >= this._center.x) && (this.x < this.viewport.getRight() - Atlantis.screen.width) ||\r\n            (this._follow.rectangle.x <= this._center.x) && (this.x > this.viewport.x)) {\r\n            this.x += diffX;\r\n            targX = this._center.x;\r\n        }\r\n\r\n        if ((this._follow.rectangle.y >= this._center.y) && (this.y < this.viewport.getBottom() - Atlantis.screen.height) ||\r\n            (this._follow.rectangle.y <= this._center.y) && (this.y > this.viewport.y)) {\r\n            this.y += diffY;\r\n            targY = this._center.y;\r\n        }\r\n\r\n        this._follow.move(targX, targY);\r\n    }\r\n\r\n    if (this.x < this.viewport.x) {\r\n        this.x = this.viewport.x;\r\n    } else if (this.x + Atlantis.screen.width > this.viewport.getRight()) {\r\n        this.x = this.viewport.getRight() - Atlantis.screen.width;\r\n    } else if (this.y < this.viewport.y) {\r\n        this.y = this.viewport.y;\r\n    }\r\n\r\n    if (this.y + Atlantis.screen.height > this.viewport.getBottom()) {\r\n        this.y = this.viewport.getBottom() - Atlantis.screen.height;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.SpriteCollisionType = {\r\n    None: 0,\r\n    Stop: 1\r\n};\r\n\r\nAtlantis.Sprite = function(_textureName, params) {\r\n    this.name = \"GameObject\";\r\n    this.enabled = true;\r\n    this.visible = true;\r\n    this.rectangle = new Atlantis.Rectangle();\r\n    this.collisionType = Atlantis.SpriteCollisionType.None;\r\n\r\n    this._texture = null;\r\n    this._dead = false;\r\n    this._initialized = false;\r\n    this.sourceRectangle = null;\r\n    this._textureName = (typeof(_textureName) === \"string\") ? _textureName : \"\";\r\n\r\n    this.color = null;\r\n    this.rotation = 0;\r\n    this.scale = new Atlantis.Vector2(1, 1);\r\n    this.origin = new Atlantis.Vector2();\r\n    this.layerDepth = Atlantis.Sprite.Counter++;\r\n    this.parent = null;\r\n\r\n    this.direction = new Atlantis.Vector2();\r\n    this.lastPosition = new Atlantis.Vector2();\r\n    this.lastDistance = new Atlantis.Vector2();\r\n\r\n    // Some physics\r\n    this.acceleration = new Atlantis.Vector2();\r\n    this.velocity = new Atlantis.Vector2();\r\n    this.maxVelocity = 1;\r\n\r\n    // Rectangle and viewport\r\n    this.viewport = new Atlantis.Rectangle(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\r\n    // Force the sprite to stay in screen or to enable across screen\r\n    this.insideScreen = false;\r\n    this.acrossScreen = false;\r\n\r\n    // Animation\r\n    this.spriteAnimator = new Atlantis.SpriteAnimator();\r\n    this.hasAnimations = false;\r\n    this.deleteIf = null;\r\n\r\n    var that = this;\r\n\r\n    /**\r\n     * Active or not the sprite.\r\n     * @property active\r\n     * @type {Boolean}\r\n     * @default true\r\n     */\r\n    Atlantis._createProperty(this, \"active\",\r\n        function() {\r\n            return that.visible && that.enabled;\r\n        },\r\n        function(value) {\r\n            that.enabled = value;\r\n            that.visible = value;\r\n        });\r\n\r\n    /**\r\n     * Indicate if the sprite is alive or dead.\r\n     * @property alive\r\n     * @type {Boolean}\r\n     * @default true\r\n     */\r\n    Atlantis._createProperty(this, \"alive\",\r\n        function() {\r\n            return !that._dead;\r\n        },\r\n        function(value) {\r\n            if (value && that._dead) {\r\n                that.revive();\r\n            } else if (!value && !that._dead) {\r\n                that.kill();\r\n            }\r\n        });\r\n\r\n    /**\r\n     * Position on X axis.\r\n     * @property x\r\n     * @type {Number}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"x\",\r\n        function() {\r\n            return that.rectangle.x;\r\n        },\r\n        function(value) {\r\n            that.lastPosition.x = that.rectangle.x;\r\n            that.rectangle.x = value;\r\n            that.direction.x = that.rectangle.x - that.lastPosition.x;\r\n        });\r\n\r\n    /**\r\n     * Position on Y axis.\r\n     * @property y\r\n     * @type {Boolean}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"y\",\r\n        function() {\r\n            return that.rectangle.y;\r\n        },\r\n        function(value) {\r\n            that.lastPosition.y = that.rectangle.y;\r\n            that.rectangle.y = value;\r\n            that.direction.y = that.rectangle.x - that.lastPosition.y;\r\n        });\r\n\r\n    /**\r\n     * Sprite's width.\r\n     * @property width\r\n     * @type {Number}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"width\",\r\n        function() {\r\n            return that.rectangle.width;\r\n        },\r\n        function(value) {\r\n            that.rectangle.width = value;\r\n        });\r\n\r\n    /**\r\n     * Sprite's height.\r\n     * @property height\r\n     * @type {Number}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"height\",\r\n        function() {\r\n            return that.rectangle.height;\r\n        },\r\n        function(value) {\r\n            that.rectangle.height = value;\r\n        });\r\n\r\n    /**\r\n     * The name of the texture used by the sprite.\r\n     * @property _textureName\r\n     * @type {String}\r\n     * @default \"\"\r\n     */\r\n    Atlantis._createProperty(this, \"textureName\",\r\n        function() {\r\n            return that._textureName;\r\n        },\r\n        function(value) {\r\n            that._textureName = value;\r\n            that._initialized = false;\r\n        });\r\n\r\n    /**\r\n     * Sprite's texture.\r\n     * @property texture\r\n     * @type {Object}\r\n     * @default null\r\n     */\r\n    Atlantis._createProperty(this, \"texture\",\r\n        function() {\r\n            return that._texture;\r\n        },\r\n        function(value) {\r\n            that._texture = value;\r\n            if (that._texture) {\r\n                that.rectangle.setSize(that._texture.width, that._texture.height);\r\n                that._initialized = true;\r\n            } else {\r\n                that.rectangle.setSize(0, 0);\r\n                that._initialized = false;\r\n            }\r\n        });\r\n\r\n    params = params || {};\r\n    for (var i in params) {\r\n        this[i] = params[i];\r\n    }\r\n};\r\n\r\nAtlantis.Sprite.Counter = 0;\r\n\r\n/**\r\n *\r\n * @method initialize\r\n * @param {Function} callback A callback called when the sprite is fully loaded.\r\n */\r\nAtlantis.Sprite.prototype.initialize = function(callback) {\r\n    this.viewport = new Atlantis.Rectangle(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\r\n    if (this._textureName !== \"\" && this._initialized === false) {\r\n        callback = (typeof(callback) === \"function\") ? callback : function() {};\r\n        var that = this;\r\n\r\n        this._texture = Atlantis.app.content.load(this._textureName, function(image) {\r\n            that.rectangle.width = image.width;\r\n            that.rectangle.height = image.height;\r\n\r\n            that._initialized = true;\r\n\r\n            callback(that);\r\n        });\r\n    } else if (callback) {\r\n        callback(this);\r\n    }\r\n};\r\n\r\nAtlantis.Sprite.prototype.copy = function(sprite) {\r\n    this._dead = sprite._dead;\r\n    this._textureName = sprite._textureName;\r\n    this.visible = sprite.visible;\r\n    this.enabled = sprite.enabled;\r\n    this._initialized = sprite._initialized;\r\n    this._texture = sprite._texture;\r\n    this.rectangle = sprite.rectangle;\r\n    this.sourceRectangle = sprite.sourceRectangle;\r\n    this.hasAnimations = sprite.hasAnimations;\r\n    this.spriteAnimator = sprite.spriteAnimator;\r\n};\r\n\r\n/**\r\n *\r\n * @method collides\r\n * @return {Boolean} Return true if collides otherwise return false.\r\n */\r\nAtlantis.Sprite.prototype.collides = function(sprite) {\r\n    var collides = this.rectangle.intersects(sprite.rectangle);\r\n\r\n    if (sprite.collisionType === Atlantis.SpriteCollisionType.Stop) {\r\n        sprite.move(sprite.lastPosition.x, sprite.lastPosition.y);\r\n    }\r\n\r\n    return collides;\r\n};\r\n\r\n/**\r\n * Kill the sprite and put it in a cache so that it can be recycled if needed.\r\n * @method kill\r\n */\r\nAtlantis.Sprite.prototype.kill = function() {\r\n    this.enabled = false;\r\n    this.visible = false;\r\n    this._dead = true;\r\n};\r\n\r\n/** \r\n * Revive the Sprite and remove it from the recycle cache.\r\n * @method revive\r\n */\r\nAtlantis.Sprite.prototype.revive = function() {\r\n    this.enabled = true;\r\n    this.visible = true;\r\n    this._dead = false;\r\n};\r\n\r\n/**\r\n *\r\n * @method prepareAnimation\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.prepareAnimation = function(width, height) {\r\n    if (this._initialized) {\r\n        this.hasAnimations = true;\r\n        var animationWidth = width;\r\n        var animationHeight = height || animationWidth;\r\n        this.spriteAnimator.initialize(animationWidth, animationHeight, this._texture.width || this.rectangle.width, this._texture.height || this.rectangle.height);\r\n        this.rectangle.width = animationWidth;\r\n        this.rectangle.height = animationHeight;\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method addAnimation\r\n * @param\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.addAnimation = function(name, indices, frameRate, twoIndices) {\r\n    if (this._initialized) {\r\n        if (twoIndices) {\r\n            var ids = [];\r\n            for (var i = indices[0]; i <= indices[1]; i++) {\r\n                ids.push(i);\r\n            }\r\n\r\n            indices = ids;\r\n        }\r\n\r\n        this.spriteAnimator.add(name, indices, frameRate);\r\n        this.sourceRectangle = this.spriteAnimator.animations[name].rectangles[0];\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method play\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.play = function(animationName) {\r\n    if (this._initialized) {\r\n        this.sourceRectangle = this.spriteAnimator.play(animationName);\r\n    }\r\n};\r\n\r\n/**\r\n * Function called before update process.\r\n * @method preUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.preUpdate = function(gameTime) {};\r\n\r\n/**\r\n * Update process.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.update = function(gameTime) {\r\n    // Determine the last distance and direction\r\n    this.lastDistance.x = this.rectangle.x - this.lastPosition.x;\r\n    this.lastDistance.y = this.rectangle.y - this.lastPosition.y;\r\n\r\n    // Determine the last position\r\n    this.lastPosition.x = this.rectangle.x;\r\n    this.lastPosition.y = this.rectangle.y;\r\n\r\n    // Update physics\r\n    this.rectangle.x += this.velocity.x;\r\n    this.rectangle.y += this.velocity.y;\r\n    this.velocity.multiply(this.maxVelocity);\r\n    this.velocity.add(this.acceleration);\r\n\r\n    // Update animation\r\n    if (this.hasAnimations && this._initialized) {\r\n        this.spriteAnimator.update(gameTime);\r\n        if (this.lastDistance.x === 0 && this.lastDistance.y === 0 && this.spriteAnimator.currentAnimationName !== \"\") {\r\n            this.sourceRectangle = this.spriteAnimator.getCurrentAnimation().rectangles[0];\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Method called after the update process.\r\n * @method postUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.postUpdate = function() {\r\n    this.direction.x = this.rectangle.x - this.lastPosition.x;\r\n    this.direction.y = this.rectangle.y - this.lastPosition.y;\r\n\r\n    // Force the sprite to stay inside screen\r\n    if (this.insideScreen) {\r\n        if (this.rectangle.x < this.viewport.x) {\r\n            this.rectangle.x = this.viewport.x;\r\n            this.velocity.multiply(0);\r\n        } else if (this.rectangle.getRight() > this.viewport.width) {\r\n            this.rectangle.x = this.viewport.width - this.rectangle.width;\r\n            this.velocity.multiply(0);\r\n        }\r\n\r\n        if (this.rectangle.y < this.viewport.y) {\r\n            this.rectangle.y = this.viewport.y;\r\n            this.velocity.multiply(0);\r\n        } else if (this.rectangle.getBottom() > this.viewport.height) {\r\n            this.rectangle.y = this.viewport.height - this.rectangle.height;\r\n            this.velocity.multiply(0);\r\n        }\r\n    }\r\n\r\n    // The sprite move accross the screen\r\n    else if (this.acrossScreen) {\r\n        if (this.rectangle.getRight() < this.viewport.x) {\r\n            this.rectangle.x = this.viewport.width;\r\n        } else if (this.rectangle.x > this.viewport.width) {\r\n            this.rectangle.x = this.viewport.x;\r\n        }\r\n\r\n        if (this.rectangle.getBottom() < this.viewport.y) {\r\n            this.rectangle.y = this.viewport.height;\r\n        } else if (this.rectangle.y > this.viewport.height) {\r\n            this.rectangle.y = this.viewport.y;\r\n        }\r\n    }\r\n\r\n    if (this.deleteIf) {\r\n        if (this.deleteIf(this)) {\r\n            this.kill();\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Draw the sprite on screen.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch} spriteBatch\r\n */\r\nAtlantis.Sprite.prototype.draw = function(spriteBatch) {\r\n    if (this._initialized) {\r\n        spriteBatch.draw(this._texture, this.rectangle, this.sourceRectangle, this.color, this.rotation, this.origin, this.scale, this.effect, this.layerDepth);\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method setSize\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.setSize = function(width, height) {\r\n    this.rectangle.width = width || this.rectangle.width;\r\n    this.rectangle.height = height || this.rectangle.height;\r\n};\r\n\r\nAtlantis.Sprite.prototype.move = function(x, y) {\r\n    this.rectangle.x = x;\r\n    this.rectangle.y = y;\r\n    this.lastPosition.x = x;\r\n    this.lastPosition.y = y;\r\n};\r\n\r\nAtlantis.Sprite.prototype.translate = function(x, y) {\r\n    this.rectangle.x += x;\r\n    this.rectangle.y += y;\r\n};\r\n\r\nAtlantis.Sprite.prototype.getBoundingRect = function() {\r\n    return this.rectangle;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.SpriteText = function(spriteFont, text, params) {\r\n    Atlantis.Sprite.call(this, undefined, params);\r\n    this.spriteFont = spriteFont;\r\n    this.text = text;\r\n};\r\n\r\nAtlantis.SpriteText.prototype = Object.create(Atlantis.Sprite.prototype);\r\n\r\nAtlantis.SpriteText.prototype.initialize = function() {\r\n    var size = this.measureText();\r\n    this.rectangle.width = size.width;\r\n    this.rectangle.height = this.spriteFont.size;\r\n};\r\n\r\nAtlantis.SpriteText.prototype.preUpdate = function() {};\r\n\r\nAtlantis.SpriteText.prototype.update = function() {};\r\n\r\nAtlantis.SpriteText.prototype.postUpdate = function() {};\r\n\r\nAtlantis.SpriteText.prototype.draw = function(spriteBatch) {\r\n    spriteBatch.drawString(this.spriteFont, this.text, this.rectangle, this.color, this.rotation, this.origin, this.scale, this.effect, this.layerDepth);\r\n};\r\n\r\nAtlantis.SpriteText.prototype.measureText = function(text) {\r\n    var context = Atlantis.app.game.graphicsDevice.getBackBuffer().getContext();\r\n    var oldFont = context.font;\r\n    context.font = this.spriteFont.getFont();\r\n    var size = context.measureText(text || this.text);\r\n    context.font = oldFont;\r\n    return size;\r\n};\r\n\r\nAtlantis.SpriteText.prototype.measureTextHeight = function(text, maxWidth, lineHeight) {\r\n    text = text || this.text;\r\n    maxWidth = maxWidth || this.width;\r\n    var words = text.split(\" \");\r\n    var line = \"\";\r\n    var testLine = \"\";\r\n    var y = lineHeight || this.spriteFont.size;\r\n    var metrics = null;\r\n    var testWidth = 0;\r\n    var context = Atlantis.app.game.graphicsDevice.getBackBuffer().getContext();\r\n\r\n    for (var n = 0; n < words.length; n++) {\r\n        testLine = line + words[n] + \" \";\r\n        metrics = context.measureText(testLine);\r\n        testWidth = metrics.width;\r\n\r\n        if (testWidth > maxWidth && n > 0) {\r\n            line = words[n] + \" \";\r\n            y += lineHeight;\r\n        } else {\r\n            line = testLine;\r\n        }\r\n    }\r\n\r\n    return y;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/** \r\n * A collection that initialize, load, update and draw _sprites.\r\n * @class SpriteGroup\r\n * @extends Sprite\r\n * @constructor\r\n */\r\nAtlantis.SpriteGroup = function() {\r\n\tAtlantis.Sprite.call(this);\r\n\tthis._initialized = false;\r\n\tthis._sprites = [];\r\n\tthis._length = 0;\r\n\tthis._needBoundingCompute = true;\r\n\r\n\tvar that = this;\r\n\tAtlantis._createProperty(this, \"x\",\r\n\t\tfunction() {\r\n\t\t\treturn that.rectangle.x;\r\n\t\t},\r\n\t\tfunction(value) {\r\n\t\t\tvar diff = value - that.rectangle.x;\r\n\t\t\tthat.rectangle.x = value;\r\n\t\t\tfor (var i = 0, l = that._sprites.length; i < l; i++) {\r\n\t\t\t\tthat._sprites[i].translate(diff, 0);\r\n\t\t\t}\r\n\t\t\tthat._needBoundingCompute = true;\r\n\t\t});\r\n\r\n\tAtlantis._createProperty(this, \"y\",\r\n\t\tfunction() {\r\n\t\t\treturn that.rectangle.y;\r\n\t\t},\r\n\t\tfunction(value) {\r\n\t\t\tvar diff = value - that.rectangle.y;\r\n\t\t\tthat.rectangle.x = value;\r\n\t\t\tfor (var i = 0, l = that._sprites.length; i < l; i++) {\r\n\t\t\t\tthat._sprites[i].translate(0, diff);\r\n\t\t\t}\r\n\t\t\tthat._needBoundingCompute = true;\r\n\t\t});\r\n};\r\nAtlantis.SpriteGroup.prototype = Object.create(Atlantis.Sprite.prototype);\r\n\r\n/**\r\n * Load assets of all members.\r\n * @method initialize\r\n * @param {Function} callback\r\n */\r\nAtlantis.SpriteGroup.prototype.initialize = function(callback) {\r\n\tcallback = (typeof(callback) === \"function\") ? callback : function() {};\r\n\r\n\tif (!this._initialized) {\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tthis._sprites[i].initialize();\r\n\t\t}\r\n\t\tthis._initialized = true;\r\n\t\tcallback(this);\r\n\t} else {\r\n\t\tcallback(this);\r\n\t}\r\n};\r\n\r\n/**\r\n * Update logic of all members.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.SpriteGroup.prototype.update = function(gameTime) {\r\n\tAtlantis.Sprite.prototype.update.call(this, gameTime);\r\n\r\n\tif (!this._dead && this.enabled) {\r\n\t\t// Update\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tif (this._sprites[i] !== null && this._sprites[i].alive && this._sprites[i].enabled) {\r\n\t\t\t\tthis._sprites[i].preUpdate(gameTime);\r\n\t\t\t\tthis._sprites[i].update(gameTime);\r\n\t\t\t\tthis._sprites[i].postUpdate(gameTime);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Function called before update process.\r\n * @method preUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.SpriteGroup.prototype.postUpdate = function(gameTime) {};\r\n\r\n/**\r\n * Draw all members on screen.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch}\r\n */\r\nAtlantis.SpriteGroup.prototype.draw = function(spriteBatch) {\r\n\tif (this.visible) {\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tif (this._sprites[i] !== null && this._sprites[i].alive && this._sprites[i].visible) {\r\n\t\t\t\tthis._sprites[i].draw(spriteBatch);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Clear the collection.\r\n * @method clear\r\n */\r\nAtlantis.SpriteGroup.prototype.clear = function() {\r\n\tthis._sprites.length = 0;\r\n\tthis._length = 0;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.collides = function(sprite) {\r\n\tif (this.collidesWithGroup(sprite)) {\r\n\t\tvar i = 0,\r\n\t\t\tcollides = false;\r\n\r\n\t\twhile (i < this._length && collides === false) {\r\n\t\t\tcollides = (sprite.collides(this._sprites[i])) ? true : collides;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tif (collides && sprite.collisionType === Atlantis.SpriteCollisionType.Stop) {\r\n\t\t\tsprite.move(sprite.lastPosition.x, sprite.lastPosition.y);\r\n\t\t}\r\n\r\n\t\treturn collides;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\n/**\r\n *\r\n * @method collidesWithGroup\r\n * @param {Atlantis.Sprite} sprite\r\n * @param {Boolean} computeBoundingRect\r\n * @return {Boolean}\r\n */\r\nAtlantis.SpriteGroup.prototype.collidesWithGroup = function(sprite, computeBoundingRect) {\r\n\tif (computeBoundingRect || this._needBoundingCompute) {\r\n\t\tthis.computeBoundingRect();\r\n\t}\r\n\treturn this.rectangle.intersects(sprite.rectangle);\r\n};\r\n\r\n/**\r\n * Compute the bounding size of the group.\r\n * @method computeBoundingSize\r\n */\r\nAtlantis.SpriteGroup.prototype.computeBoundingRect = function() {\r\n\tthis.rectangle.setSize(0, 0);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tthis.rectangle.width = Math.max(this.rectangle.getRight(), this._sprites[i].rectangle.getRight()) - this.rectangle.x;\r\n\t\tthis.rectangle.height = Math.max(this.rectangle.getBottom(), this._sprites[i].rectangle.getBottom()) - this.rectangle.y;\r\n\t}\r\n\r\n\tthis._needBoundingCompute = false;\r\n};\r\n\r\n/**\r\n * Count the number of living sprite in the group.\r\n * @method countLiving\r\n * @return {Number} Return the number of living sprites.\r\n */\r\nAtlantis.SpriteGroup.prototype.countLiving = function() {\r\n\tvar livings = 0;\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tlivings += (this._sprites[i] !== null && this._sprites[i].alive) ? 1 : 0;\r\n\t}\r\n\r\n\treturn livings;\r\n};\r\n\r\n/**\r\n * Count the number of dead sprite in the group.\r\n * @method countDead\r\n * @return {Number} Return the number of dead sprites.\r\n */\r\nAtlantis.SpriteGroup.prototype.countDead = function() {\r\n\tvar deads = 0;\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tdeads += (this._sprites[i] !== null && !this._sprites[i].alive) ? 1 : 0;\r\n\t}\r\n\r\n\treturn deads;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.size = function() {\r\n\treturn this._length;\r\n};\r\n\r\n/** \r\n * @method forEach\r\n * @param {Function} callback\r\n */\r\nAtlantis.SpriteGroup.prototype.forEach = function(callback) {\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null && this._sprites[i].alive) {\r\n\t\t\tcallback(this._sprites[i], i);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Gets an sprite from the group.\r\n * @method get\r\n * @param {Number} index The index of the sprite on the group.\r\n */\r\nAtlantis.SpriteGroup.prototype.get = function(index) {\r\n\tvar sprite = null;\r\n\r\n\tif (index > -1 && index < this._sprites.length) {\r\n\t\tsprite = this._sprites[index];\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first dead sprite if available.\r\n * @method getFirstDead\r\n * @return {Atlantis.Sprite} Return the first killed sprite otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstDead = function() {\r\n\tvar i = 0,\r\n\t\tsprite = null;\r\n\r\n\twhile (i < this._length && sprite === null) {\r\n\t\tsprite = (!this._sprites[i].alive) ? this._sprites[i] : sprite;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first alive sprite if available.\r\n * @method getFirstAlive\r\n * @return {Atlantis.Sprite} Return the first alive sprite, otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstAlive = function() {\r\n\tvar i = 0,\r\n\t\tsprite = null;\r\n\r\n\twhile (i < this._length && sprite === null) {\r\n\t\tsprite = (this._sprites[i].alive) ? this._sprites[i] : sprite;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first null index.\r\n * @method getFirstNull\r\n * @return {Number} Return the index of the first null element in the group otherwise return -1.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstNull = function() {\r\n\tvar index = -1,\r\n\t\ti = 0;\r\n\r\n\twhile (i < this._length && index === -1) {\r\n\t\tindex = (this._sprites[i] === null) ? i : index;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn index;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.kill = function() {\r\n\tAtlantis.Sprite.prototype.kill.call(this);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null) {\r\n\t\t\tthis._sprites[i].kill();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.revive = function() {\r\n\tAtlantis.Sprite.prototype.revive.call(this);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null) {\r\n\t\t\tthis._sprites[i].revive();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Add an sprite to the group.\r\n * @method add\r\n * @param {Atlantis.Sprite} sprite The sprite to add.\r\n */\r\nAtlantis.SpriteGroup.prototype.add = function(sprite) {\r\n\tif (sprite instanceof Atlantis.Sprite && this._sprites.indexOf(sprite) === -1) {\r\n\t\tvar nullIndex = this.getFirstNull();\r\n\r\n\t\tif (nullIndex === -1) {\r\n\t\t\tthis._sprites.push(sprite);\r\n\t\t\tthis._length++;\r\n\t\t} else {\r\n\t\t\tthis._sprites[nullIndex] = sprite;\r\n\t\t}\r\n\r\n\t\tsprite.parent = this;\r\n\r\n\t\tif (this._initialized) {\r\n\t\t\tsprite.initialize();\r\n\t\t}\r\n\r\n\t\tthis._needBoundingCompute = true;\r\n\t}\r\n};\r\n\r\n/**\r\n * Remove a sprite from the group at the position.\r\n * @method removeAt\r\n * @param {Number} index The index of the sprite to remove.\r\n * @param {Boolean} splice Whether the object should be cut from the array entirely or not.\r\n */\r\nAtlantis.SpriteGroup.prototype.removeAt = function(index, splice) {\r\n\tvar result = null;\r\n\r\n\tif (this._sprites[index]) {\r\n\t\tresult = this._sprites[index];\r\n\t\tresult.parent = null;\r\n\r\n\t\tif (splice) {\r\n\t\t\tthis._sprites.splice(index, 1);\r\n\t\t} else {\r\n\t\t\tthis._sprites[index] = null;\r\n\t\t}\r\n\r\n\t\tthis._length--;\r\n\t\tthis._needBoundingCompute = true;\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * remove a sprite from the group.\r\n * @method remove\r\n * @param {Atlantis.Sprite} sprite The sprite to remove.\r\n * @param {Boolean} splice Whether the object should be cut from the array entirely or not.\r\n */\r\nAtlantis.SpriteGroup.prototype.remove = function(sprite, splice) {\r\n\tvar index = this._sprites.indexOf(sprite);\r\n\treturn this.removeAt(index, splice);\r\n};\r\n\r\n/** \r\n * Replace a sprite by another.\r\n * @methode replace\r\n * @param {Atlantis.Sprite} oldSprite The current sprite of this group that must be replaced.\r\n * @param {Atlantis.Sprite} newSprite The new sprite to replace the old sprite.\r\n * @return {Atlantis.Sprite} Return the new sprite if the replace operation success, otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.replace = function(oldSprite, newSprite) {\r\n\tvar index = this._sprites.indexOf(oldSprite);\r\n\r\n\tif (index > -1) {\r\n\t\toldSprite.parent = null;\r\n\t\tnewSprite.parent = this;\r\n\t\tthis._sprites[index] = newSprite;\r\n\t\tthis._needBoundingCompute = true;\r\n\r\n\t\treturn newSprite;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nAtlantis.SpriteGroup.toArray = function() {\r\n\tvar sprites = [];\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tsprites.push(this._sprites[i]);\r\n\t}\r\n\r\n\treturn sprites;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * Define the type of a layer\r\n * - Tiles\r\n * - Background\r\n * - Objects\r\n * @class TilemapLayerType\r\n * @static\r\n */\r\nAtlantis.TilemapLayerType = {\r\n    Tiles: \"tilelayer\",\r\n    Background: \"imagelayer\",\r\n    Objects: \"objectlayer\"\r\n};\r\n\r\n/**\r\n * Define the type of projection of the map\r\n * - Orthogonal (2D)\r\n * - Isometric (2D Iso)\r\n * @class TilemapProjection\r\n * @static\r\n */\r\nAtlantis.TilemapProjection = {\r\n    Orthogonal: \"orthogonal\",\r\n    Isometric: \"isometric\"\r\n};\r\n\r\n/**\r\n * Represent a tileset which is an image that contains many other images named tiles.\r\n * @class Tileset\r\n * @constructor\r\n * @param {Atlantis.Tileset|Object} tileset (optional) An object that contains all necessary data to construct a tileset.\r\n */\r\nAtlantis.Tileset = function(tileset) {\r\n    this.firstGID = +tileset.firstgid || 1;\r\n    this.id = Atlantis.Tileset.Counter++;\r\n    this.name = tileset.name || [\"Tileset_\", this.id].join(\"\");\r\n    this.texture = tileset.texture;\r\n    this.width = +tileset.imagewidth | 0;\r\n    this.height = +tileset.imageheight | 0;\r\n    this.margin = +tileset.margin | 0;\r\n    this.padding = +tileset.spacing | 0;\r\n    this.tileWidth = +tileset.tilewidth | 0;\r\n    this.tileHeight = +tileset.tileheight | 0;\r\n    this.properties = tileset.properties || {};\r\n};\r\n\r\nAtlantis.Tileset.Counter = 0;\r\n\r\n/**\r\n * Represent a tilemap layer which contains a tileset or background.\r\n * @class TilemapLayer\r\n * @constructor\r\n * @param {Atlantis.TilemapLayer|Object} layer (optional) An object that contains all necessary data to construct a layer.\r\n */\r\nAtlantis.TilemapLayer = function(layer) {\r\n    layer = layer || {};\r\n    this.id = Atlantis.TilemapLayer.Counter++;\r\n    this.data = layer.data || [];\r\n    this.type = layer.type || Atlantis.TilemapLayer.Tiles;\r\n    this.visible = layer.visible;\r\n    this.opacity = +layer.opacity;\r\n    this.name = layer.name || [\"Layer_\", this.id].join(\"\");\r\n    this.width = +layer.width | 0;\r\n    this.height = +layer.height | 0;\r\n    this.offset = {\r\n        x: +layer.x | 0,\r\n        y: +layer.y | 0\r\n    };\r\n    this.properties = layer.properties || {};\r\n    this.backgroundId = +layer.backgroundId || +this.properties.backgroundId || 0;\r\n    this.tilesetId = +layer.tilesetId || +this.properties.tilesetId || 0;\r\n};\r\n\r\nAtlantis.TilemapLayer.Counter = 0;\r\n\r\n/**\r\n * This class is responsible to store all data for drawing a tilemap.\r\n * A tilemap is composed of layers, tilesets and backgrounds.\r\n * @class Tilemap\r\n * @constructor\r\n * @param {Atlantis.Tilemap|Object} tilemap (optional) An object that contains tilemap data.\r\n */\r\nAtlantis.Tilemap = function(tilemap) {\r\n    tilemap = tilemap || {};\r\n    this.id = Atlantis.Tilemap.Counter++;\r\n    this.name = tilemap.name || [\"Tilemap_\", this.id].join(\"\");\r\n    this.version = +tilemap.version | 0;\r\n    this.projection = tilemap.orientation || tilemap.projection || Atlantis.TilemapProjection.Orthogonal;\r\n\r\n    this.layers = tilemap.layers || [];\r\n    this.tilesets = tilemap.tilesets || [];\r\n    this.backgrounds = tilemap.backgrounds || [];\r\n\r\n    this.width = +tilemap.width | 0;\r\n    this.height = +tilemap.height | 0;\r\n    this.tileWidth = +tilemap.tilewidth | 0;\r\n    this.tileHeight = +tilemap.tileheight | 0;\r\n    this.mapWidth = this.width * this.tileWidth;\r\n    this.mapHeight = this.height * this.tileHeight;\r\n\r\n    this.properties = tilemap.properties || {};\r\n    this.loaded = (typeof(tilemap.loaded) !== \"undefined\") ? tilemap.loaded : false;\r\n    this.visible = (typeof(tilemap.visible) !== \"undefined\") ? tilemap.visible : true;\r\n\r\n    this._cacheTilesCanvas = [];\r\n};\r\n\r\nAtlantis.Tilemap.Counter = 0;\r\n\r\nAtlantis.Tilemap.prototype.update = function(camera) {\r\n    // TODO : Add collision detection \r\n};\r\n\r\n/**\r\n * Draw the tilemap if it's visible and loaded.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the tileset.\r\n * @param {Atlantis.Camera2D} camera The camera to use to defined what must be drawn.\r\n */\r\nAtlantis.Tilemap.prototype.draw = function(spriteBatch, camera) {\r\n    if (this.visible && this.loaded) {\r\n        for (var i = 0, l = this.layers.length; i < l; i++) {\r\n            if (this.layers[i].visible) {\r\n                if (this.layers[i].type === Atlantis.TilemapLayerType.Background) {\r\n                    this.drawBackground(spriteBatch, this.layers[i], this.backgrounds[this.layers[i].backgroundId]);\r\n                } else if (this.layers[i].type === Atlantis.TilemapLayerType.Tiles) {\r\n                    this.drawLayer(spriteBatch, camera, this.layers[i], this.tilesets[this.layers[i].tilesetId]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Draw the background with this defined offset\r\n * @method drawBackground\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the background.\r\n * @param {Atlantis.TilemapLayer} layer The layer to draw.\r\n * @param {Image|Canvas} background An image or canvas to draw as background.\r\n */\r\nAtlantis.Tilemap.prototype.drawBackground = function(spriteBatch, layer, background) {\r\n    spriteBatch.draw(background, {\r\n        x: layer.offset.x,\r\n        y: layer.offset.y\r\n    });\r\n};\r\n\r\n/**\r\n * Draw tiles with the defined offset, spacing and margin\r\n * @method drawLayer\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the tileset.\r\n * @param {Atlantis.Camera2D} camera The camera to use to defined what must be drawn.\r\n * @param {Atlantis.TilemapLayer} layer The layer to draw.\r\n * @param {Atlantis.Tileset} The tileset to use for drawing the layer.\r\n */\r\nAtlantis.Tilemap.prototype.drawLayer = function(spriteBatch, camera, layer, tileset) {\r\n    var nbTileX = Math.floor((tileset.width - tileset.margin * 4) / tileset.tileWidth);\r\n\r\n    // posX/Y   : Relative position to the camera\r\n    // start/End/X/Y : Start/End position for the render loop  \r\n    var posX = camera.x / this.tileWidth,\r\n        posY = camera.y / this.tileHeight,\r\n        startX = Math.floor(posX),\r\n        startY = Math.floor(posY),\r\n        stopX = Math.min(Math.round((camera.x + Atlantis.screen.width) / tileset.tileWidth) + 1, layer.width),\r\n        stopY = Math.min(Math.round((camera.y + Atlantis.screen.height) / tileset.tileHeight) + 1, layer.height);\r\n\r\n    // Source rectangle values for drawing a tile.\r\n    var srcX = 0,\r\n        srcY = 0,\r\n        destX = 0,\r\n        destY = 0,\r\n        isoX = 0,\r\n        isoY = 0,\r\n        tileId = 0;\r\n\r\n    for (var x = startX; x < stopX; x++) {\r\n        for (var y = startY; y < stopY; y++) {\r\n            tileId = layer.data[x + y * layer.width] - tileset.firstGID;\r\n\r\n            // To prevent negative source rectangle\r\n            if (tileId >= 0) {\r\n                srcX = tileId % nbTileX;\r\n                srcY = Math.floor(tileId / nbTileX);\r\n                srcX = (srcY > 0) ? (srcX % (nbTileX * srcY)) : (srcX % nbTileX);\r\n\r\n                destX = ((x + layer.offset.x) - posX) * this.tileWidth;\r\n                destY = ((y + layer.offset.y) - posY) * this.tileHeight;\r\n\r\n                if (this.projection === Atlantis.TilemapProjection.Isometric) {\r\n                    isoX = (destX / 2 - destY);\r\n                    isoY = (destX / 2 + destY) / 2;\r\n                    destX = isoX + Atlantis.screen.width / 2;\r\n                    destY = isoY;\r\n                }\r\n\r\n                spriteBatch.draw(tileset.texture, {\r\n                    x: destX,\r\n                    y: destY,\r\n                    width: this.tileWidth,\r\n                    height: this.tileHeight\r\n                }, {\r\n                    x: tileset.margin + srcX * (tileset.tileWidth + tileset.padding),\r\n                    y: tileset.margin + srcY * (tileset.tileHeight + tileset.padding),\r\n                    width: tileset.tileWidth - tileset.padding,\r\n                    height: tileset.tileHeight - tileset.padding\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Get a transformed position from isometric world coordinates to screen coordinates.\r\n * @method isoToScreen\r\n * @static\r\n * @param {Number} x The x coordinate on isometric world.\r\n * @param {Number} y The y coordinate on isometric world.\r\n * @return {Object} Return an object with transformed coordinates.\r\n */\r\nAtlantis.Tilemap.isoToScreen = function(x, y) {\r\n    return {\r\n        x: (2 * y + x) / 2,\r\n        y: (2 * y - x) / 2\r\n    };\r\n};\r\n\r\n/**\r\n * Get a transformed position from screen coordinates to iso coordinates.\r\n * @method screenToIso\r\n * @static\r\n * @param {Number} x The x coordinate on screen.\r\n * @param {Number} y The y coordinate on screen.\r\n * @return {Object} Return an object with transformed coordinates.\r\n */\r\nAtlantis.Tilemap.screenToIso = function(x, y) {\r\n    return {\r\n        x: (x - y),\r\n        y: (x + y) / 2\r\n    };\r\n};\r\n\r\n/**\r\n * Gets the tile index at the specified position.\r\n * @method getTileIdAt\r\n * @param {Number} layerIndex The index of the layer\r\n * @param {Number} x The position of the tile on X axis.\r\n * @param {Number} y The postion of the tile on Y axis.\r\n * @return {Number} Return the id of the tile at this position if exists, otherwise return 0.\r\n */\r\nAtlantis.Tilemap.prototype.getTileIdAt = function(layerIndex, x, y) {\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex];\r\n        var tx = Math.floor(x / this.tileWidth);\r\n        var ty = Math.floor(y / this.tileHeight);\r\n        return layer.data[tx + ty * layer.width];\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nAtlantis.Tilemap.prototype.getTileRectAt = function(layerIndex, x, y) {\r\n    var rect = {\r\n        x: 0,\r\n        y: 0,\r\n        width: this.tileWidth,\r\n        height: this.tileHeight\r\n    };\r\n\r\n    if (this.layers[layerIndex]) {\r\n        rect.x = Math.floor(x / this.tileWidth);\r\n        rect.y = Math.floor(y / this.tileHeight);\r\n    }\r\n\r\n    return rect;\r\n};\r\n\r\n/**\r\n * Extract a tile from tileset and return a canvas element with the tile drawn in it.\r\n * It's usefull to do some tests, such as pixel perfect. \r\n * Note 1: that it's work with a scale different to 1.\r\n * Note 2: The extraction is done once, the result is stored in a cache, so you can safely call this method.\r\n * @method getTileAt\r\n * @param {Atlantis.Tileset} tileset The tileset to use to extract the tile.\r\n * @param {Number} layerIndex The index of the layer\r\n * @param {Number} x The position of the tile on X axis.\r\n * @param {Number} y The postion of the tile on Y axis.\r\n * @return {HTMLCanvas} Return a canvas element of the specified tile if exists, otherwise return null.\r\n */\r\nAtlantis.Tilemap.prototype.getTileAt = function(tileset, layerIndex, x, y) {\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex],\r\n            tileId = this.getTileIdAt(layerIndex, x, y),\r\n            cacheId = [layer.id, \"_\", tileset.id, \"_\", tileId].join(\"\");\r\n\r\n        if (!this._cacheTilesCanvas[cacheId]) {\r\n            var canvas = document.createElement(\"canvas\"),\r\n                context = canvas.getContext(\"2d\");\r\n\r\n            canvas.width = tileset.tileWidth;\r\n            canvas.height = tileset.tileHeight;\r\n\r\n            if (tileId >= 0) {\r\n                var nbTileX = tileset.imagewidth / tileset.tilewidth,\r\n                    srcX = tileId % nbTileX,\r\n                    srcY = Math.floor(tileId / nbTileX);\r\n\r\n                srcX = (srcY > 0) ? (srcX % (nbTileX * srcY)) : (srcX % nbTileX);\r\n\r\n                context.drawImage(tileset.texture, {\r\n                    x: srcX * tileset.tileWidth,\r\n                    y: srcY * tileset.tileHeight,\r\n                    width: tileset.tileWidth,\r\n                    height: tileset.tileHeight\r\n                }, {\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: this.tileWidth,\r\n                    height: this.tileHeight\r\n                });\r\n\r\n                this._cacheTilesCanvas[cacheId] = canvas;\r\n                return canvas;\r\n            }\r\n        } else {\r\n            return this._cacheTilesCanvas[cacheId];\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A loader that load a map created with Tiled and exported to JSON.\r\n * @class TmxLoader\r\n * @static\r\n */\r\nAtlantis.TmxLoader = {\r\n    /**\r\n     * Load a tilemap at the specified path.\r\n     * @method load\r\n     * @param {String} mapPath\r\n     * @param {Function} callback\r\n     * @return {Atlantis.Tilemap} Return a tilemap.\r\n     */\r\n    load: function(mapPath, callback) {\r\n        var tilemap = new Atlantis.Tilemap();\r\n\r\n        Atlantis.app.content.load(mapPath, function(map) {\r\n            var i = 0,\r\n                l = 0;\r\n\r\n            for (i = 0, l = map.tilesets.length; i < l; i++) {\r\n                tilemap.tilesets.push(new Atlantis.Tileset(map.tilesets[i]));\r\n                tilemap.tilesets[i].texture = Atlantis.app.content.load(map.tilesets[i].image);\r\n                tilemap.tilesets[i].texture.width = map.tilesets[i].imagewidth;\r\n                tilemap.tilesets[i].texture.height = map.tilesets[i].imageheight;\r\n            }\r\n\r\n            for (i = 0, l = map.layers.length; i < l; i++) {\r\n                tilemap.layers.push(new Atlantis.TilemapLayer(map.layers[i]));\r\n\r\n                if (map.layers[i].image) {\r\n                    tilemap.backgrounds.push(Atlantis.app.content.load(map.layers[i].image));\r\n                    tilemap.layers[i].backgroundId = i;\r\n                }\r\n            }\r\n\r\n            tilemap.height = map.height;\r\n            tilemap.width = map.width;\r\n            tilemap.tileWidth = map.tilewidth;\r\n            tilemap.tileHeight = map.tileheight;\r\n            tilemap.mapWidth = tilemap.width * tilemap.tileWidth;\r\n            tilemap.mapHeight = tilemap.height * tilemap.tileHeight;\r\n            tilemap.projection = map.orientation;\r\n            tilemap.version = map.version;\r\n            tilemap.properties = map.properties;\r\n            tilemap.visible = true;\r\n            tilemap.loaded = true;\r\n\r\n            if (callback) {\r\n                callback(tilemap);\r\n            }\r\n        });\r\n\r\n        return tilemap;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.KeyboardComponent = (function() {\r\n    var Keys = Atlantis.Keys;\r\n\r\n    /**\r\n     * A keyboard component that be used with KeyboardHelper to provide some\r\n     * interesting keyboars states as pressed, justPressed, etc.\r\n     * @class KeyboardComponent\r\n     * @constructor\r\n     * @extends Atlantis.GameComponent\r\n     * @param {Atlantis.Game} game A game instance.\r\n     */\r\n    var keyComponent = function(game) {\r\n        Atlantis.GameComponent.call(this, game);\r\n        this.keysState = game.keyboard.getState();\r\n        this.previousKeysState = null;\r\n    };\r\n    keyComponent.prototype = Object.create(Atlantis.GameComponent.prototype);\r\n\r\n    /**\r\n     * Update key states.\r\n     * @method update\r\n     * @param {Atlantis.GameTime} gameTime\r\n     */\r\n    keyComponent.prototype.update = function(gameTime) {\r\n        this.previousKeysState = this.keysState;\r\n        this.keysState = this.game.keyboard.getState();\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method pressed\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.pressed = function(key) {\r\n        return this.keysState.isKeyDown(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method released\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.released = function(key) {\r\n        return this.keysState.isKeyUp(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method justPressed\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.justPressed = function(key) {\r\n        return this.keysState.isKeyUp(key) && this.previousKeysState.isKeyDown(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method justReleased\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.justReleased = function(key) {\r\n        return this.keysState.isKeyDown(key) && this.previousKeysState.isKeyUp(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method up\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.up = function() {\r\n        return this.pressed(Keys.Up);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method down\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.down = function() {\r\n        return this.pressed(Keys.Down);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method left\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.left = function() {\r\n        return this.pressed(Keys.Left);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method right\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.right = function() {\r\n        return this.pressed(Keys.Right);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method enter\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.enter = function() {\r\n        return this.pressed(Keys.Enter);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method space\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.space = function() {\r\n        return this.pressed(Keys.Space);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method escape\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.escape = function() {\r\n        return this.pressed(Keys.Escape);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method control\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.control = function() {\r\n        return this.pressed(Keys.Control);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method shift\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.shift = function() {\r\n        return this.pressed(Keys.Shift);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method tab\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.tab = function() {\r\n        return this.pressed(Keys.Tab);\r\n    };\r\n\r\n    return keyComponent;\r\n})();\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.TouchComponent = (function() {\r\n    var touchComponent = function(game) {\r\n        Atlantis.GameComponent.call(this, game);\r\n        this.sensibility = new Atlantis.Vector2(1, 1);\r\n        this.deadZone = new Atlantis.Vector2(0, 0);\r\n        this.maxDelta = 100;\r\n        this.maxFingerPoints = 1;\r\n        this.delta = new Atlantis.Vector2(0, 0);\r\n        this._touchCollection = new Atlantis.TouchCollection();\r\n        this._position = [];\r\n        this._lastPosition = [];\r\n        this._needUpdate = false;\r\n    };\r\n\r\n    touchComponent.prototype = Object.create(Atlantis.GameComponent.prototype);\r\n\r\n    touchComponent.prototype.initialize = function() {\r\n        Atlantis.GameComponent.prototype.initialize(this);\r\n        this._touchCollection = this.game.touchPanel.getState();\r\n        this._lastTouchCollection = this.game.touchPanel.getState();\r\n\r\n        this._position.length = 0;\r\n        this._lastPosition.length = 0;\r\n\r\n        for (var i = 0; i < this.maxFingerPoints; i++) {\r\n            this._position.push(new Atlantis.Vector2(0, 0));\r\n            this._lastPosition.push(new Atlantis.Vector2(0, 0));\r\n        }\r\n    };\r\n\r\n    touchComponent.prototype.update = function(gameTime) {\r\n        if (this.maxFingerPoints) {\r\n            this._touchCollection = this.game.touchPanel.getState();\r\n\r\n            var count = this._touchCollection.length;\r\n\r\n            if (count) {\r\n                for (var i = 0; i < this.maxFingerPoints; i++) {\r\n                    if (i < count) {\r\n                        this._updateTouchState(i);\r\n                    } else {\r\n                        this._resetTrouchState(i);\r\n                    }\r\n                }\r\n\r\n                this.delta.x = (this._position[0].x - this._lastPosition[0].x) * this.sensibility.x;\r\n                this.delta.y = (this._position[0].y - this._lastPosition[0].y) * this.sensibility.y;\r\n            } else {\r\n                this.delta.x = 0;\r\n                this.delta.y = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    touchComponent.prototype._updateTouchState = function(index) {\r\n        this._lastPosition[index].x = this._position[index].x;\r\n        this._lastPosition[index].y = this._position[index].y;\r\n        this._position[index].x = this._touchCollection[index].position.x;\r\n        this._position[index].y = this._touchCollection[index].position.y;\r\n    };\r\n\r\n    touchComponent.prototype._resetTrouchState = function(index) {\r\n        this._lastPosition[index].x = 0;\r\n        this._lastPosition[index].y = 0;\r\n        this._position[index].x = 0;\r\n        this._position[index].y = 0;\r\n    };\r\n\r\n    touchComponent.prototype.pressed = function(index) {\r\n        if (!this._touchCollection[index]) {\r\n            return false;\r\n        }\r\n\r\n        return this._touchCollection[index].state === Atlantis.TouchLocationState.Pressed;\r\n    };\r\n\r\n    touchComponent.prototype.released = function(index) {\r\n        if (!this._touchCollection[index]) {\r\n            return false;\r\n        }\r\n\r\n        return this._touchCollection[index].state === (Atlantis.TouchLocationState.Released || Atlantis.TouchLocationState.Invalid);\r\n    };\r\n\r\n    touchComponent.prototype.moved = function(index) {\r\n        if (!this._touchCollection[index]) {\r\n            return false;\r\n        }\r\n\r\n        return this._touchCollection[index].state === Atlantis.TouchLocationState.Moved;\r\n    };\r\n\r\n    return touchComponent;\r\n})();\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * An interface for a 2D level.\r\n * @class Level\r\n \r\n */\r\nAtlantis.Level = function(name) {\r\n\tthis.active = false;\r\n\tthis.name = name || \"Level_0\";\r\n\tthis.scene = new Atlantis.SpriteGroup();\r\n\tthis.camera = new Atlantis.Camera2D(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\tthis.spriteBatch = new Atlantis.SpriteBatch(Atlantis.app.game.graphicsDevice);\r\n};\r\n\r\nAtlantis.Level.prototype.initialize = function() {\r\n\tthis.scene.initialize();\r\n\tthis.camera.reset();\r\n};\r\n\r\nAtlantis.Level.prototype.update = function(gameTime) {\r\n\tthis.scene.update(gameTime);\r\n\tthis.camera.update(gameTime);\r\n};\r\n\r\nAtlantis.Level.prototype.draw = function(gameTime) {\r\n\tthis.spriteBatch.begin();\r\n\tthis.scene.draw(this.spriteBatch);\r\n\tthis.spriteBatch.end();\r\n};\r\n\r\nAtlantis.Level.prototype.onEnabled = function() {\r\n\r\n};\r\n\r\nAtlantis.Level.prototype.onDisabled = function() {\r\n\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * This is a static class that contains some managers such as\r\n * Storage, Audio, Level, etc.\r\n * @class app\r\n * @static\r\n */\r\nAtlantis.app = {};\r\n\r\n/**\r\n * This is a static class that contains input managers\r\n * @class input\r\n * @static\r\n */\r\nAtlantis.input = {};\r\n\r\n/**\r\n * This is a static class that contains screen management\r\n * @class screen\r\n * @static\r\n */\r\nAtlantis.screen = {};\r\n\r\n/**\r\n * The engine class that initialize an Atlantis.Game object and setup managers and scene.\r\n * @constructor \r\n * @class Engine\r\n * @extends Atlantis.Game\r\n * @param {Number} width Desired screen width.\r\n * @param {Number} height Desired screen height\r\n * @param {Number} domElement The DOM element to use for canvas (optional).\r\n */\r\nAtlantis.GameApplication = function(width, height, domElement, params) {\r\n    Atlantis.Game.call(this, width, height, domElement, params);\r\n\r\n    this.audioManager = new Atlantis.AudioManager();\r\n    this.storageManager = new Atlantis.StorageManager();\r\n    this.levelManager = new Atlantis.LevelManager(this);\r\n    this.components.add(this.levelManager);\r\n\r\n    var that = this;\r\n\r\n    Atlantis.app = {\r\n        game: that,\r\n        content: that.content,\r\n        components: that.components,\r\n        storage: that.storageManager,\r\n        levelManager: that.levelManager\r\n    };\r\n\r\n    Atlantis.input = {\r\n        keys: null,\r\n        mouse: null,\r\n        touch: null,\r\n        gamepad: null\r\n    };\r\n\r\n    Atlantis.screen = {\r\n        width: width,\r\n        widthPerTwo: width / 2,\r\n        height: height,\r\n        heightPerTwo: height / 2,\r\n        getCanvasWidth: function() {\r\n            return that.graphicsDevice.getFrontBuffer().getWidth();\r\n        },\r\n        getCanvasHeight: function() {\r\n            return that.graphicsDevice.getFrontBuffer().getHeight();\r\n        }\r\n    };\r\n\r\n    document.addEventListener(Atlantis.events.ResolutionChanged, function(event) {\r\n        Atlantis.screen.width = event.width;\r\n        Atlantis.screen.widthPerTwo = event.width / 2;\r\n        Atlantis.screen.height = event.height;\r\n        Atlantis.screen.heightPerTwo = event.height / 2;\r\n    }, false);\r\n};\r\n\r\nAtlantis.GameApplication.prototype = Object.create(Atlantis.Game.prototype);\r\n\r\nAtlantis.GameApplication.prototype.initialize = function() {\r\n    Atlantis.Game.prototype.initialize.call(this);\r\n\r\n    Atlantis.screen.width = this.graphicsDevice.preferredBackBufferWidth;\r\n    Atlantis.screen.height = this.graphicsDevice.preferredBackBufferHeight;\r\n\r\n    var keyboardComponent = new Atlantis.KeyboardComponent(this);\r\n    this.components.add(keyboardComponent);\r\n\r\n    //var touchComponent = new Atlantis.TouchComponent(this);\r\n    //this.components.add(touchComponent);\r\n\r\n    Atlantis.input.keys = keyboardComponent;\r\n    //Atlantis.input.touch = touchComponent;\r\n};\r\n\r\nAtlantis.GameApplication.prototype.setScreenSize = function(width, height) {\r\n    this.graphicsDevice._frontBuffer.setSize(width, height);\r\n    this.graphicsDevice.applyChanges();\r\n};"],"sourceRoot":"/source/"}