{"version":3,"sources":["atlantis.min.js"],"names":["Atlantis","window","events","ContentPreloading","ResolutionChanged","ajax","t","e","i","url","n","success","s","XMLHttpRequest","method","open","onreadystatechange","readyState","status","responseText","send","data","a","join","notify","document","createEvent","initEvent","Object","dispatchEvent","isMobileDevice","navigator","userAgent","match","_createProperty","defineProperty","get","set","enumerable","configurable","ContentManager","this","rootDirectory","_assets","preloader","PreloadTimerInterval","prototype","preload","length","load","o","r","progress","h","setInterval","clearInterval","split","loadImage","loadAudio","loadVideo","loadResource","Image","onload","style","position","left","body","appendChild","removeChild","src","createElement","controls","JSON","parse","dispose","GameComponent","game","enabled","initialized","initialize","update","isEnabled","isInitialized","setEnabled","DrawableGameComponent","call","visible","assetLoaded","loadContent","unloadContent","draw","isVisible","setVisible","GameComponentCollection","components","drawables","add","indexOf","push","remove","splice","GameTime","reset","elapsedTime","totalGameTime","currentTime","Date","fps","getElapsedTime","getTotalGameTime","getFPS","MathHelper","Pi","Math","PI","PiOver2","PiOver4","TwoPi","clamp","distance","abs","hermite","lerp","smoothStep","toDegrees","toRadians","isPowerOfTwo","Rectangle","x","y","width","height","divide","fromRectangle","multiply","subtract","contains","getRight","getBottom","intersects","getLeft","getTop","toString","toVector2","Vector2","toPoint","Point","getCenter","getWidth","getHeight","getTopCenter","getBottomCenter","getLeftCenter","getRightCenter","setPosition","setSize","clone","Matrix","toArray","Array","M11","M12","M13","M14","M21","M22","M23","M24","M31","M32","M33","M34","M41","M42","M43","M44","getIdentityValues","getZeroValues","setIdentity","getMatrixIdentity","setLeft","z","Vector3","setRight","setUp","getUp","setDown","getDown","setBackward","getBackward","setForward","getForward","setTranslation","createRotationX","cos","sin","createRotationY","createRotationZ","createScale","createTranslation","createLookAt","normalize","cross","dot","createOrthographic","createOrthographicOffCenter","createPerspectiveFieldOfView","tan","createPerspectiveOffCenter","createPerspetiveFieldOfViewRH","createPerspectiveOffCenterRH","invert","l","c","u","p","f","d","M","A","m","g","w","v","_","b","V","S","T","B","createWorld","Quaternion","fromQuaternion","Identity","conjugate","createFromYawPitchRoll","fromVector","Zero","One","UnitX","UnitY","addToRef","subtractToRef","divideToRef","multiplyToRef","sqrt","lerpToRef","min","minToRef","max","maxToRef","negate","normalizeToRef","reflect","ReflectToRef","reflectToRef","smoothStepToRef","transform","transformToRef","transformNormal","transformNormalToRef","UnitZ","Up","Down","Right","Left","Forward","Backward","distanceSquared","transformCoordinate","Vector4","KeyboardState","keys","Input","isKeyDown","isKeyUp","Keyboard","maxKeys","preventDefault","keyCode","type","addEventListener","getState","ButtonState","Released","Pressed","MouseState","scrollWheelValue","leftButton","rightButton","middleButton","Mouse","HTMLElement","_x","_y","_scroll","_buttons","pageX","offsetLeft","Game","scaleFactor","pageY","offsetTop","button","wheelDelta","detail","TouchLocationState","Invalid","Moved","TouchCollection","TouchPanelState","create","state","TouchPanel","_states","up","down","cancel","move","callback","touches","clientX","clientY","maxTouchPoints","msMaxTouchPoints","PointerEvent","MSPointerEvent","getCapabilities","hasTouch","GamepadButton","X","Y","LeftShoulder","RightShoulder","LeftTrigger","RightTrigger","Select","Start","L3","R3","DPadUp","DPadDown","DPadLeft","DPadRight","GamepadAxis","Horizontal","Vertical","HorizontalRight","VerticalRight","GamepadState","axis","buttons","isButtonDown","isButtonUp","getAxis","Gamepad","_gamepads","getGamepads","webkitGetGamepads","msGetGamepads","webkitGamepads","_gamepadsSupported","_addGamepad","gamepad","_removeGamepad","index","_updateGamepads","pressed","value","axes","Keys","BackSpace","Tab","Enter","Shift","Control","Alt","Pause","Escape","Space","Home","End","Suppr","PageUp","PageDown","Insert","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","C","D","E","F","G","H","I","J","K","L","N","O","P","Q","R","U","W","Z","Super","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ScaleMode","ScaleToFit","ConserveAspectRatio","NoScaleCenter","GraphicsDevice","preferredBackBufferWidth","backBufferWidth","preferredBackBufferHeight","backBufferHeight","disableSmoothing","forceDisableSmoothing","viewport","scaleMode","_frontBuffer","RenderTarget","canvas","_fbContext","getContext","_backBuffer","_bbCanvas","getCanvas","msTouchAction","backgroundColor","id","applyChanges","getBackBuffer","getFrontBuffer","clear","imageSmoothingEnabled","present","drawImage","toggleFullscreen","isFullscreen","requestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","SpriteSortMode","BackToFront","FrontToBack","Immediate","SpriteEffect","None","FlipHorizontaly","FlipVerticaly","BatchItemType","Texture","Font","SpriteBatch","_graphicsDevice","_viewport","_canvas","_context","_batchItems","_batchStarted","_spriteSortMode","_transformMatrix","_cacheColoredTextures","_batchRect","_onResize","bind","begin","save","_drawBatchItem","texture2D","sourceRectangle","destinationRectangle","color","rotation","origin","scale","effect","layerDepth","drawString","end","sort","_sortBatchItem","restore","drawTexture","fillStyle","font","getFont","strokeStyle","lineWidth","wrapText","strokeText","_wrapText","size","fillText","translate","rotate","_colorizeTexture","_searchColoredTexture","getImageData","_hexaToBytes","putImageData","texture","parseInt","slice","measureText","_data","_needUpdate","fromImage","setData","getData","getPixelData","clearRect","saveAsPng","toDataURL","saveAsJpg","SpriteFont","fontName","Preloader","screenWidth","graphicsDevice","screenHeight","screenWidthPerTwo","screenHeightPerTwo","spriteFont","onProgress","round","gameTime","afterDraw","_paused","requestAnimationFrame","target","innerWidth","innerHeight","settings","domElement","replace","getElementsByClassName","getElementById","HTMLCanvasElement","version","content","keyboard","mouse","touchPanel","frontBuffer","context","_internalIntialize","resizeEnabled","autoClear","run","focus","pause","cancelAnimationFrame","resume","Random","random","randomFloat","randomInt","floor","vector2","vector3","vector4","randomArrayItem","array","undefined","MusicState","Playing","Stopped","Paused","AudioManager","repeatMusic","currentMusic","volume","currentState","STOPPED","playOneShot","audioClip","play","music","repeat","stopMusic","stop","StorageManager","container","name","stringify","localStorage","setItem","getLocalStorageKey","defaultValue","getItem","LevelManager","levels","activeLevel","_autoLoadLevel","loadLevel","nameOrIndex","reinitialize","reinit","onDisabled","getLevelByName","_checkIndex","active","onEnabled","level","autoLoad","getLoadedLevelIndex","getLoadedLevelName","SpriteAnimation","framerate","rectangles","next","SpriteAnimator","animations","spriteWidth","spriteHeight","textureWidth","textureHeight","nbSpriteX","nbSpriteY","spritesheetLength","currentAnimationName","animationWidth","animationHeight","framesIndex","frameRate","animationLength","animation","animationName","getCurrentAnimation","lastDistance","checkForIDLEAnimation","lastDirection","Camera2D","_follow","screen","_center","widthPerTwo","heightPerTwo","onResize","follow","sprite","getSpritePosition","getRelativePosition","rectangle","diffX","lastPosition","diffY","targX","targY","SpriteCollisionType","Stop","Sprite","_textureName","params","collisionType","_texture","_dead","_initialized","Counter","parent","direction","acceleration","velocity","maxVelocity","insideScreen","acrossScreen","spriteAnimator","hasAnimations","deleteIf","that","revive","kill","app","image","copy","collides","prepareAnimation","addAnimation","indices","twoIndices","ids","preUpdate","postUpdate","spriteBatch","getBoundingRect","SpriteText","text","oldFont","measureTextHeight","maxWidth","lineHeight","words","line","testLine","metrics","testWidth","SpriteGroup","_sprites","_length","_needBoundingCompute","diff","alive","collidesWithGroup","computeBoundingRect","countLiving","livings","countDead","deads","forEach","getFirstDead","getFirstAlive","getFirstNull","nullIndex","removeAt","result","oldSprite","newSprite","sprites","TilemapLayerType","Tiles","Background","Objects","TilemapProjection","Orthogonal","Isometric","Tileset","tileset","firstGID","firstgid","imagewidth","imageheight","margin","padding","spacing","tileWidth","tilewidth","tileHeight","tileheight","properties","TilemapLayer","layer","opacity","offset","backgroundId","tilesetId","Tilemap","tilemap","projection","orientation","layers","tilesets","backgrounds","mapWidth","mapHeight","loaded","_cacheTilesCanvas","camera","drawBackground","drawLayer","background","nbTileX","posX","posY","startX","startY","stopX","stopY","srcX","srcY","destX","destY","isoX","isoY","tileId","isoToScreen","screenToIso","getTileIdAt","layerIndex","tx","ty","getTileRectAt","rect","getTileAt","cacheId","TmxLoader","mapPath","map","KeyboardComponent","keyComponent","keysState","previousKeysState","key","released","justPressed","justReleased","right","enter","space","escape","control","shift","tab","TouchComponent","touchComponent","sensibility","deadZone","maxDelta","maxFingerPoints","delta","_touchCollection","_position","_lastPosition","_lastTouchCollection","count","_updateTouchState","_resetTrouchState","moved","Level","scene","input","GameApplication","audioManager","storageManager","levelManager","storage","touch","getCanvasWidth","getCanvasHeight","event","keyboardComponent","setScreenSize"],"mappings":"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","file":"atlantis.min.js","sourcesContent":["var Atlantis=window.Atlantis||{};Atlantis.events={ContentPreloading:\"atlantis.preloading\",ResolutionChanged:\"atlantis.graphics.resize\"},Atlantis.ajax=function(t){var e=t||{},i=t.url,n=t.success||function(){},s=new XMLHttpRequest;if(\"POST\"===e.method)s.open(\"POST\",i),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&n(s.responseText)},s.send(e.data);else{var a=e.data?[i,\"?\",e.data].join(\"\"):i;s.open(\"GET\",a),s.onreadystatechange=function(){4==s.readyState&&n(s.responseText)},s.send(null)}},Atlantis.notify=function(t,e){var i=document.createEvent(\"HTMLEvents\");if(i.initEvent(t,!0,!1),e instanceof Object)for(var n in e)i[n]=e[n];document.dispatchEvent(i)},Atlantis.isMobileDevice=function(){return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)},Atlantis._createProperty=function(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})};var Atlantis=window.Atlantis||{};Atlantis.ContentManager=function(t){this.rootDirectory=t||\"\",this._assets={},this.preloader=[]},Atlantis.ContentManager.PreloadTimerInterval=250,Atlantis.ContentManager.prototype.preload=function(t,e){var i=this.preloader.length,n=0;t=\"function\"==typeof t?t:function(){},e=\"function\"==typeof e?e:function(){};for(var s=function(t){n++},a=0;i>a;a++)this.load(this.preloader[a],s);var o=this,r={status:\"Loading\",progress:0},h=setInterval(function(){r.progress=100*n/i,n===i&&(clearInterval(h),r.status=\"Complete\",o.preloader.length=0,e()),Atlantis.notify(Atlantis.events.ContentPreloading,r),t(r)},Atlantis.ContentManager.PreloadTimerInterval)},Atlantis.ContentManager.prototype.load=function(t,e){e=\"function\"==typeof e?e:function(){};var i=t.split(\".\"),n=i[i.length-1];if(t=this.rootDirectory+t,this._assets[t])return e(this._assets[t]),this._assets[t];switch(n){case\"png\":case\"jpg\":case\"bmp\":this.loadImage(t,e);break;case\"mp3\":case\"ogg\":case\"wav\":this.loadAudio(t,e);break;case\"mp4\":case\"ogv\":this.loadVideo(t,e);break;case\"xml\":case\"json\":case\"js\":this.loadResource(t,n,e)}return this._assets[t]},Atlantis.ContentManager.prototype.loadImage=function(t,e){var i=new Image;return i.onload=function(){this.style.position=\"absolute\",this.style.left=\"-9999px\",document.body.appendChild(i),document.body.removeChild(i),this.style.position=\"\",this.style.left=\"\",e(this)},i.src=t,this._assets[t]=i,i},Atlantis.ContentManager.prototype.loadAudio=function(t,e){var i=document.createElement(\"audio\");return i.src=t,i.load(),i.controls=!1,this._assets[t]=i,e(i),i},Atlantis.ContentManager.prototype.loadVideo=function(t,e){var i=document.createElement(\"video\");return i.onload=e,i.src=t,this._assets[t]=i,i},Atlantis.ContentManager.prototype.loadResource=function(t,e,i){var n=this;Atlantis.ajax({method:\"GET\",url:t,success:function(s){var a=s;\"json\"==e&&(a=JSON.parse(s)),n._assets[t]=a,i(a)}})},Atlantis.ContentManager.prototype.dispose=function(){this._assets.length=0};var Atlantis=window.Atlantis||{};Atlantis.GameComponent=function(t){this.game=t,this.enabled=!0,this.initialized=!1},Atlantis.GameComponent.prototype.initialize=function(){this.initialized=!0},Atlantis.GameComponent.prototype.update=function(t){},Atlantis.GameComponent.prototype.isEnabled=function(){return this.enabled},Atlantis.GameComponent.prototype.isInitialized=function(){return this.initialized},Atlantis.GameComponent.prototype.setEnabled=function(t){this.enabled=t},Atlantis.DrawableGameComponent=function(t){Atlantis.GameComponent.call(this,t),this.visible=!0,this.assetLoaded=!1},Atlantis.DrawableGameComponent.prototype=new Atlantis.GameComponent,Atlantis.DrawableGameComponent.prototype.loadContent=function(){this.assetLoaded=!0},Atlantis.DrawableGameComponent.prototype.unloadContent=function(){this.assetLoaded=!1},Atlantis.DrawableGameComponent.prototype.draw=function(t,e){},Atlantis.DrawableGameComponent.prototype.isVisible=function(){return this.isVisible},Atlantis.DrawableGameComponent.prototype.setVisible=function(t){this.isVisible=t},Atlantis.GameComponentCollection=function(){this.components=[],this.drawables=[],this.initialized=!1,this.assetLoaded=!1},Atlantis.GameComponentCollection.prototype.initialize=function(t){for(var e=0,i=this.components.length;i>e;e++)this.components[e].initialize();this.initialized=!0},Atlantis.GameComponentCollection.prototype.loadContent=function(){for(var t=0,e=this.drawables.length;e>t;t++)this.drawables[t].loadContent();this.assetLoaded=!0},Atlantis.GameComponentCollection.prototype.unloadContent=function(){for(var t=0,e=this.drawables.length;e>t;t++)this.drawables[t].unloadContent();this.assetLoaded=!1},Atlantis.GameComponentCollection.prototype.update=function(t){for(var e=0,i=this.components.length;i>e;e++)this.components[e].isEnabled()&&this.components[e].update(t)},Atlantis.GameComponentCollection.prototype.draw=function(t,e){for(var i=0,n=this.drawables.length;n>i;i++)this.drawables[i].isVisible()&&this.drawables[i].draw(t,e)},Atlantis.GameComponentCollection.prototype.add=function(t){-1==this.components.indexOf(t)&&(this.components.push(t),this.initialized&&t.initialize(),t instanceof Atlantis.DrawableGameComponent&&(this.drawables.push(t),this.assetLoaded&&t.loadContent()))},Atlantis.GameComponentCollection.prototype.remove=function(t){var e=this.components.indexOf(t);return e>-1?(this.components.splice(e,1),t instanceof Atlantis.DrawableGameComponent&&(e=this.drawables.indexOf(t),e>-1&&this.drawables.splice(e,1)),!0):!1},Atlantis.GameComponentCollection.prototype.get=function(t){return t>-1&&t<this.components.length?this.components[t]:null};var Atlantis=window.Atlantis||{};Atlantis.GameTime=function(){this.reset()},Atlantis.GameTime.prototype.reset=function(){this.elapsedTime=0,this.totalGameTime=0,this.currentTime=+new Date,this.fps=0},Atlantis.GameTime.prototype.update=function(){var t=+new Date;this.elapsedTime=t-this.currentTime,this.totalGameTime+=this.elapsedTime,this.fps=1e3/(t-this.currentTime),this.currentTime=t},Atlantis.GameTime.prototype.getElapsedTime=function(){return this.elapsedTime},Atlantis.GameTime.prototype.getTotalGameTime=function(){return this.totalGameTime},Atlantis.GameTime.prototype.getFPS=function(){return this.fps};var Atlantis=window.Atlantis||{};Atlantis.MathHelper={Pi:Math.PI,PiOver2:Math.PI/2,PiOver4:Math.PI/4,TwoPi:2*Math.PI,clamp:function(t,e,i){return t=t>i?i:t,t=e>t?e:t},distance:function(t,e){return Math.abs(t-e)},hermite:function(t,e,i,n,s){var a=s*s*s,o=s*s;return 0===s?t:1===s?i:(2*t-2*i+n+e)*a+(3*i-3*t-2*e-n)*o+e*s+t},lerp:function(t,e,i){return i=0>i?0:i,i=i>1?1:i,t+(e-t)*i},smoothStep:function(t,e,i){var n=this.clamp(i,0,1);return n=this.hermite(t,0,e,0,n)},toDegrees:function(t){return t*(180/Math.PI)},toRadians:function(t){return t*(Math.PI/180)},isPowerOfTwo:function(t){return t>0&&0===(t&t-1)}};var Atlantis=Atlantis||{};Atlantis.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},Atlantis.Rectangle.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.width+=t.width,this.height+=t.height},Atlantis.Rectangle.prototype.divide=function(t){this.x/=t.x,this.y/=t.y,this.width/=t.width,this.height/=t.height},Atlantis.Rectangle.prototype.fromRectangle=function(t){this.x=t.x?+t.x:0,this.y=t.y?+t.y:0,this.width=t.width?+t.width:0,this.height=t.height?+t.height:0},Atlantis.Rectangle.prototype.multiply=function(t){this.x*=t.x,this.y*=t.y,this.width*=t.width,this.height*=t.height},Atlantis.Rectangle.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y,this.width-=t.width,this.height-=t.height},Atlantis.Rectangle.prototype.contains=function(t,e){return t instanceof Atlantis.Rectangle?this.x<=t.x&&t.getRight()<=this.getRight()&&this.y<=t.y&&t.getBottom()<=this.getBottom():this.x<=t&&t<this.getRight()&&this.y<=e&&e<this.getBottom()},Atlantis.Rectangle.prototype.intersects=function(t){return t.getLeft()<this.getRight()&&this.getLeft()<t.getRight()&&t.getTop()<this.getBottom()&&this.getTop()<t.getBottom()},Atlantis.Rectangle.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" width: \",this.width,\" height: \",this.height].toString()},Atlantis.Rectangle.prototype.toVector2=function(){return new Atlantis.Vector2(this.x,this.y)},Atlantis.Rectangle.prototype.toPoint=function(){return new Atlantis.Point(this.x,this.y)},Atlantis.Rectangle.prototype.getTop=function(){return this.y},Atlantis.Rectangle.prototype.getBottom=function(){return this.y+this.height},Atlantis.Rectangle.prototype.getLeft=function(){return this.x},Atlantis.Rectangle.prototype.getRight=function(){return this.x+this.width},Atlantis.Rectangle.prototype.getCenter=function(){return new Atlantis.Point(this.x+this.width/2,this.y+this.height/2)},Atlantis.Rectangle.prototype.getWidth=function(){return this.width},Atlantis.Rectangle.prototype.getHeight=function(){return this.height},Atlantis.Rectangle.prototype.getTopCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y)},Atlantis.Rectangle.prototype.getBottomCenter=function(){return new Atlantis.Vector2(this.x+this.width/2,this.y+this.height)},Atlantis.Rectangle.prototype.getLeftCenter=function(){return new Atlantis.Vector2(this.x,this.y+this.height/2)},Atlantis.Rectangle.prototype.getRightCenter=function(){return new Atlantis.Vector2(this.x+this.width,this.y+this.height/2)},Atlantis.Rectangle.prototype.set=function(t,e,i,n){t instanceof Atlantis.Rectangle?(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.x=t,this.y=e,this.width=i,this.height=n)},Atlantis.Rectangle.prototype.setPosition=function(t,e){this.x=t,this.y=e},Atlantis.Rectangle.prototype.setSize=function(t,e){this.width=t,this.height=e},Atlantis.Rectangle.prototype.clone=function(){return new Atlantis.Rectangle(this.x,this.y,this.width,this.height)},Atlantis.Rectangle.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" width: \",this.width,\" height: \",this.height].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Matrix=function(t){t instanceof Atlantis.Matrix?this.set(t.toArray()):t instanceof Array&&16==t.length?this.set(t):(this.M11=0,this.M12=0,this.M13=0,this.M14=0,this.M21=0,this.M22=0,this.M23=0,this.M24=0,this.M31=0,this.M32=0,this.M33=0,this.M34=0,this.M41=0,this.M42=0,this.M43=0,this.M44=0)},Atlantis.Matrix.prototype.clone=function(){return new Atlantis.Matrix(this.toArray())},Atlantis.Matrix.prototype.set=function(t){16==t.length&&(this.M11=t[0],this.M12=t[1],this.M13=t[2],this.M14=t[3],this.M21=t[4],this.M22=t[5],this.M23=t[6],this.M24=t[7],this.M31=t[8],this.M32=t[9],this.M33=t[10],this.M34=t[11],this.M41=t[12],this.M42=t[13],this.M43=t[14],this.M44=t[15])},Atlantis.Matrix.prototype.getIdentityValues=function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t},Atlantis.Matrix.prototype.getZeroValues=function(){for(var t=[],e=0;16>e;e++)t.push(0);return t},Atlantis.Matrix.prototype.setIdentity=function(){this.set(this.getIdentityValues())},Atlantis.Matrix.getMatrixIdentity=function(){var t=new Atlantis.Matrix;return t.setIdentity(),t},Atlantis.Matrix.prototype.toArray=function(){var t=[];return t.push(this.M11),t.push(this.M12),t.push(this.M13),t.push(this.M14),t.push(this.M21),t.push(this.M22),t.push(this.M23),t.push(this.M24),t.push(this.M31),t.push(this.M32),t.push(this.M33),t.push(this.M34),t.push(this.M41),t.push(this.M42),t.push(this.M43),t.push(this.M44),t},Atlantis.Matrix.prototype.setLeft=function(t){this.M11=-t.x,this.M12=-t.y,this.M13=-t.z},Atlantis.Matrix.prototype.getLeft=function(){var t=new Atlantis.Vector3;return t.x=-this.M11,t.y=-this.M12,t.z=-this.M13,t},Atlantis.Matrix.prototype.setRight=function(t){this.M11=t.x,this.M12=t.y,this.M13=t.z},Atlantis.Matrix.prototype.getRight=function(){var t=new Atlantis.Vector3;return t.x=this.M11,t.y=this.M12,t.z=this.M13,t},Atlantis.Matrix.prototype.setUp=function(t){this.M21=t.x,this.M22=t.y,this.M23=t.z},Atlantis.Matrix.prototype.getUp=function(){var t=new Atlantis.Vector3;return t.x=this.M21,t.y=this.M22,t.z=this.M23,t},Atlantis.Matrix.prototype.setDown=function(t){this.M21=-t.x,this.M22=-t.y,this.M23=-t.z},Atlantis.Matrix.prototype.getDown=function(){var t=new Atlantis.Vector3;return t.x=-this.M21,t.y=-this.M22,t.z=-this.M23,t},Atlantis.Matrix.prototype.setBackward=function(t){this.M31=t.x,this.M32=t.y,this.M33=t.z},Atlantis.Matrix.prototype.getBackward=function(){var t=new Atlantis.Vector3;return t.x=this.M31,t.y=this.M32,t.z=this.M33,t},Atlantis.Matrix.prototype.setForward=function(t){this.M31=-t.x,this.M32=-t.y,this.M33=-t.z},Atlantis.Matrix.prototype.getForward=function(){var t=new Atlantis.Vector3;return t.x=-this.M31,t.y=-this.M32,t.z=-this.M33,t},Atlantis.Matrix.prototype.setTranslation=function(t){this.M41=t.x,this.M42=t.y,this.M43=t.z},Atlantis.Matrix.prototype.add=function(t){for(var e=this.toArray(),i=t.toArray(),n=0;16>n;n++)e[n]+=i[n];this.set(e)},Atlantis.Matrix.add=function(t,e){var i=new Atlantis.Matrix(t);return i.add(e),i},Atlantis.Matrix.createRotationX=function(t){var e=Atlantis.Matrix.getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M22=i,e.M23=n,e.M32=-n,e.M33=i,e},Atlantis.Matrix.createRotationY=function(t){var e=Atlantis.Matrix.getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M11=i,e.M13=-n,e.M31=n,e.M33=i,e},Atlantis.Matrix.createRotationZ=function(t){var e=this.getMatrixIdentity(),i=Math.cos(t),n=Math.sin(t);return e.M11=i,e.M13=n,e.M31=-n,e.M33=i,e},Atlantis.Matrix.createScale=function(t,e,i){var n=Atlantis.Matrix.getMatrixIdentity();return n.M11=t,n.M22=e||t,n.M33=i||t,n},Atlantis.Matrix.createTranslation=function(t,e,i){var n=Atlantis.Matrix.getMatrixIdentity();return n.M41=t,n.M42=e||t,n.M43=i||t,n},Atlantis.Matrix.createLookAt=function(t,e,i){var n=Atlantis.Vector3.subtract(e,t);n.normalize();var s=Atlantis.Vector3.cross(i,n);s.normalize();var a=Atlantis.Vector3.cross(n,s);a.normalize();var o=Atlantis.Matrix.getMatrixIdentity();return o.M11=s.x,o.M21=s.y,o.M31=s.z,o.M12=a.x,o.M22=a.y,o.M32=a.z,o.M13=n.x,o.M23=n.y,o.M33=n.z,o.M41=-Atlantis.Vector3.dot(s,t),o.M42=-Atlantis.Vector3.dot(a,t),o.M43=-Atlantis.Vector3.dot(n,t),o},Atlantis.Matrix.createOrthographic=function(t,e,i,n){var s=new Atlantis.Matrix;return s.M11=2/t,s.M12=s.M13=s.M14=0,s.M22=2/e,s.M21=s.M23=s.M24=0,s.M33=1/(i-n),s.M31=s.M32=s.M34=0,s.M41=s.M42=0,s.M43=i/(i-n),s.M44=1,s},Atlantis.Matrix.createOrthographicOffCenter=function(t,e,i,n,s,a){var o=new Atlantis.Matrix;return o.M11=2/(e-t),o.M12=0,o.M13=0,o.M14=0,o.M21=0,o.M22=2/(n-i),o.M23=0,o.M24=0,o.M31=0,o.M32=0,o.M33=1/(s-a),o.M34=0,o.M41=(t+e)/(t-e),o.M42=(n+i)/(i-n),o.M43=s/(s-a),o.M44=1,o},Atlantis.Matrix.createPerspectiveFieldOfView=function(t,e,i,n){var s=1/Math.tan(.5*t),a=s/e,o=i/a,r=i/s;return Atlantis.Matrix.createPerspectiveOffCenter(-o,o,-r,r,i,n)},Atlantis.Matrix.createPerspetiveFieldOfViewRH=function(t,e,i,n){var s=1/Math.tan(.5*t),a=s/e,o=i/a,r=i/s;return Atlantis.Matrix.createPerspectiveOffCenterRH(-o,o,-r,r,i,n)},Atlantis.Matrix.createPerspectiveOffCenter=function(t,e,i,n,s,a){var o=a/(a-s),r=new Atlantis.Matrix;return r.M11=2*s/(e-t),r.M22=2*s/(n-i),r.M31=(t+e)/(t-e),r.M32=(n+i)/(i-n),r.M33=o,r.M34=1,r.M43=-s*o,r},Atlantis.Matrix.createPerspectiveOffCenterRH=function(t,e,i,n,s,a){var o=Atlantis.Matrix.createPerspectiveOffCenter(t,e,i,n,s,a);return o.M31*=-1,o.M32*=-1,o.M33*=-1,o.M34*=-1,o},Atlantis.Matrix.prototype.invert=function(){var t=this.M31*this.M42-this.M32*this.M41,e=this.M31*this.M43-this.M33*this.M41,i=this.M34*this.M41-this.M31*this.M44,n=this.M32*this.M43-this.M33*this.M42,s=this.M34*this.M42-this.M32*this.M44,a=this.M33*this.M44-this.M34*this.M43,o=this.M22*a+this.M23*s+this.M24*n,r=this.M21*a+this.M23*i+this.M24*e,h=this.M21*-s+this.M22*i+this.M24*t,l=this.M21*n+this.M22*-e+this.M23*t,c=this.M11*o-this.M12*r+this.M13*h-this.M14*l;if(0===Math.abs(c))return void this.set(this.getZeroValues());c=1/c;var u=this.M11*this.M22-this.M12*this.M21,p=this.M11*this.M23-this.M13*this.M21,f=this.M14*this.M21-this.M11*this.M24,d=this.M12*this.M23-this.M13*this.M22,M=this.M14*this.M22-this.M12*this.M24,A=this.M13*this.M24-this.M14*this.M23,y=this.M12*a+this.M13*s+this.M14*n,m=this.M11*a+this.M13*i+this.M14*e,g=this.M11*-s+this.M12*i+this.M14*t,x=this.M11*n+this.M12*-e+this.M13*t,w=this.M42*A+this.M43*M+this.M44*d,v=this.M41*A+this.M43*f+this.M44*p,_=this.M41*-M+this.M42*f+this.M44*u,b=this.M41*d+this.M42*-p+this.M43*u,V=this.M32*A+this.M33*M+this.M34*d,S=this.M31*A+this.M33*f+this.M34*p,T=this.M31*-M+this.M32*f+this.M34*u,B=this.M31*d+this.M32*-p+this.M33*u;this.M11=+o*c,this.M12=-y*c,this.M13=+w*c,this.M14=-V*c,this.M21=-r*c,this.M22=+m*c,this.M23=-v*c,this.M24=+S*c,this.M31=+h*c,this.M32=-g*c,this.M33=+_*c,this.M34=-T*c,this.M41=-l*c,this.M42=+x*c,this.M43=-b*c,this.M44=+B*c},Atlantis.Matrix.invert=function(t){var e=new Atlantis.Matrix(t);return e.invert(),e},Atlantis.Matrix.createWorld=function(t,e,i){var n=new Atlantis.Matrix,s=Atlantis.Vector3.cross(e,i),a=Atlantis.Vector3.cross(s,e);return s.normalize(),a.normalize(),n.setTranslation(t),n.M44=1,n},Atlantis.Matrix.prototype.multiply=function(t){var e=this.M11*t.M11+this.M12*t.M21+this.M13*t.M31+this.M14*t.M41,i=this.M11*t.M12+this.M12*t.M22+this.M13*t.M32+this.M14*t.M42,n=this.M11*t.M13+this.M12*t.M23+this.M13*t.M33+this.M14*t.M43,s=this.M11*t.M14+this.M12*t.M24+this.M13*t.M34+this.M14*t.M44,a=this.M21*t.M11+this.M22*t.M21+this.M23*t.M31+this.M24*t.M41,o=this.M21*t.M12+this.M22*t.M22+this.M23*t.M32+this.M24*t.M42,r=this.M21*t.M13+this.M22*t.M23+this.M23*t.M33+this.M24*t.M43,h=this.M21*t.M14+this.M22*t.M24+this.M23*t.M34+this.M24*t.M44,l=this.M31*t.M11+this.M32*t.M21+this.M33*t.M31+this.M34*t.M41,c=this.M31*t.M12+this.M32*t.M22+this.M33*t.M32+this.M34*t.M42,u=this.M31*t.M13+this.M32*t.M23+this.M33*t.M33+this.M34*t.M43,p=this.M31*t.M14+this.M32*t.M24+this.M33*t.M34+this.M34*t.M44,f=this.M41*t.M11+this.M42*t.M21+this.M43*t.M31+this.M44*t.M41,d=this.M41*t.M12+this.M42*t.M22+this.M43*t.M32+this.M44*t.M42,M=this.M41*t.M13+this.M42*t.M23+this.M43*t.M33+this.M44*t.M43,A=this.M41*t.M14+this.M42*t.M24+this.M43*t.M34+this.M44*t.M44;this.M11=e,this.M12=i,this.M13=n,this.M14=s,this.M21=a,this.M22=o,this.M23=r,this.M24=h,this.M31=l,this.M32=c,this.M33=u,this.M34=p,this.M41=f,this.M42=d,this.M43=M,this.M44=A},Atlantis.Matrix.multiply=function(t,e,i){var n=new Atlantis.Matrix(t);return n.multiply(e),i instanceof Atlantis.Matrix&&n.multiply(i),n},Atlantis.Matrix.prototype.subtract=function(t){for(var e=this.toArray(),i=t.toArray(),n=0;16>n;n++)e[n]-=i[n];this.set(e)},Atlantis.Matrix.subtract=function(t,e){var i=new Atlantis.Matrix(t);return i.subtract(e),i},Atlantis.Matrix.prototype.toString=function(){for(var t=this.toArray(),e=[],i=0;16>i;i+=4)e.push(\"[\"),e.push(t[i]+\" \"),e.push(t[i+1]+\" \"),e.push(t[i+2]+\" \"),e.push(t[i+3]),e.push(\"] \");return e.join(\"\")};var Atlantis=Atlantis||{};Atlantis.Quaternion=function(t,e,i,n){this.x=t?+t:0,this.y=e?+e:0,this.z=i?+i:0,this.z=n?+n:0},Atlantis.Quaternion.prototype.fromQuaternion=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},Atlantis.Quaternion.Identity=function(){return new Atlantis.Quaternion(0,0,0,1)},Atlantis.Quaternion.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w},Atlantis.Quaternion.add=function(t,e){var i=new Atlantis.Quaternion(t);return i.add(e),i},Atlantis.Quaternion.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},Atlantis.Quaternion.conjugate=function(t){var e=new Atlantis.Quaternion(t);return e.conjugate(),e},Atlantis.Quaternion.createFromYawPitchRoll=function(t,e,i){var n=new Atlantis.Quaternion,s=.5*t,a=.5*e,o=.5*i,r=Math.sin(s),h=Math.cos(s),l=Math.sin(a),c=Math.cos(a),u=Math.sin(o),p=Math.cos(o);return n.x=h*l*p+r*c*u,n.y=r*c*p-h*l*u,n.z=h*c*u-r*l*p,n.w=h*c*p-r*l*u,n},Atlantis.Quaternion.prototype.clone=function(){return new Atlantis.Quaternion(this.x,this.y,this.z,this.w)},Atlantis.Quaternion.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z,\" w: \",this.w].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Point=function(t,e){this.x=t?+t:0,this.y=e?+e:0},Atlantis.Point.clone=function(t,e){return new Atlantis.Point(this.x,this.y)},Atlantis.Point.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y].join(\"\")},Atlantis.Vector2=function(t,e){this.x=t?+t:0,this.y=e?+e:0},Atlantis.Vector2.prototype.fromVector=function(t){this.x=t.x,this.y=t.y},Atlantis.Vector2.Zero=function(){return new Atlantis.Vector2(0,0)},Atlantis.Vector2.One=function(){return new Atlantis.Vector2(1,1)},Atlantis.Vector2.UnitX=function(){return new Atlantis.Vector2(1,0)},Atlantis.Vector2.UnitY=function(){return new Atlantis.Vector2(0,1)},Atlantis.Vector2.prototype.add=function(t){\"number\"==typeof t?(this.x+=t,this.y+=t):(this.x+=t.x,this.y+=t.y)},Atlantis.Vector2.add=function(t,e){var i=t.clone();return i.add(e),i},Atlantis.Vector2.addToRef=function(t,e,i){i.x=t.x+e.x,i.y=t.y+e.y},Atlantis.Vector2.prototype.subtract=function(t){\"number\"==typeof t?(this.x-=t,this.y-=t):(this.x-=t.x,this.y-=t.y)},Atlantis.Vector2.subtract=function(t,e){var i=t.clone();return i.subtract(e),i},Atlantis.Vector2.subtractToRef=function(t,e,i){i.x=t.x-e.x,i.y=t.y-e.y},Atlantis.Vector2.prototype.divide=function(t){\"number\"==typeof t?(this.x/=t,this.y/=t):(this.x/=t.x,this.y/=t.y)},Atlantis.Vector2.divide=function(t,e){var i=t.clone();return i.divide(e),i},Atlantis.Vector2.divideToRef=function(t,e,i){i.x=t.x/e.x,i.y=t.y/e.y},Atlantis.Vector2.prototype.multiply=function(t){\"number\"==typeof t?(this.x*=t,this.y*=t):(this.x*=t.x,this.y*=t.y)},Atlantis.Vector2.multiply=function(t,e){var i=t.clone();return i.multiply(e),i},Atlantis.Vector2.multiplyToRef=function(t,e,i){i.x=t.x*e.x,i.y=t.y*e.y},Atlantis.Vector2.prototype.distance=function(t){return Atlantis.Vector2.distance(this,t)},Atlantis.Vector2.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},Atlantis.Vector2.prototype.dot=function(t){return Atlantis.Vector2.dot(this,t)},Atlantis.Vector2.dot=function(t,e){return t.x*e.x+t.y*e.y},Atlantis.Vector2.prototype.length=function(){return Atlantis.Vector2.length(this)},Atlantis.Vector2.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Atlantis.Vector2.lerp=function(t,e,i){var n=new Atlantis.Vector2.Zero;return Atlantis.Vector2.lerpToRef(t,e,i,n),n},Atlantis.Vector2.lerpToRef=function(t,e,i,n){n.x=Atlantis.MathHelper.lerp(t.x,e.x,i),n.y=Atlantis.MathHelper.lerp(t.y,e.y,i)},Atlantis.Vector2.min=function(t,e){var i=new Atlantis.Vector2;return Atlantis.Vector2.minToRef(t,e,i),i},Atlantis.Vector2.minToRef=function(t,e,i){i.x=t.x<e.x?t.x:e.x,i.y=t.y<e.y?t.y:e.y},Atlantis.Vector2.max=function(t,e){var i=Atlantis.Vector2.Zero();return Atlantis.Vector2.maxToRef(t,e,i),i},Atlantis.Vector2.maxToRef=function(t,e,i){i.x=t.x>e.x?t.x:e.x,i.y=t.y>e.y?t.y:e.y},Atlantis.Vector2.prototype.negate=function(t){\"number\"==typeof t?(this.x=-t,this.y=-t):(this.x=-t.x,this.y=-t.y)},Atlantis.Vector2.negate=function(t){var e=t.clone();return e.x*=-1,e.y*=-1,e},Atlantis.Vector2.prototype.normalize=function(){Atlantis.Vector2.normalizeToRef(this)},Atlantis.Vector2.normalize=function(t){var e=t.clone();return e.normalize(),e},Atlantis.Vector2.normalizeToRef=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);e||(t.x=0,t.y=0);var i=1/e;t.x*=i,t.y*=i},Atlantis.Vector2.reflect=function(t,e){var i=new Atlantis.Vector2;return Atlantis.ReflectToRef(t,e,i),i},Atlantis.Vector2.reflectToRef=function(t,e,i){var n=2*(t.x*e.x+t.y*e.y);i.x=t.x-e.x*n,i.y=t.y-e.y*n},Atlantis.Vector2.smoothStep=function(t,e,i){var n=new Atlantis.Vector2;return Atlantis.Vector2.smoothStepToRef(t,e,i,n),n},Atlantis.Vector2.smoothStepToRef=function(t,e,i,n){n.x=Atlantis.MathHelper.smoothStep(t.x,e.x,i),n.y=Atlantis.MathHelper.smoothStep(t.y,e.y,i)},Atlantis.Vector2.transform=function(t,e){var i=new Atlantis.Vector3;return Atlantis.Vector2.transformToRef(t,e,i),i},Atlantis.Vector2.transformToRef=function(t,e,i){var n=t.x*e.M11+t.y*e.M21+e.M41,s=t.x*e.M12+t.y*e.M22+e.M42;i.x=n,i.x=s},Atlantis.Vector2.transformNormal=function(t,e){var i=new Atlantis.Vector3;return Atlantis.Vector2.transformNormalToRef(t,e,i),i},Atlantis.Vector2.transformNormalToRef=function(t,e,i){var n=t.x*e.M11+t.y*e.M21,s=t.x*e.M12+t.y*e.M22;i.x=n,i.y=s},Atlantis.Vector2.prototype.set=function(t,e){this.x=t,this.y=e},Atlantis.Vector2.prototype.clone=function(){return new Atlantis.Vector2(this.x,this.y)},Atlantis.Vector2.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Vector3=function(t,e,i){this.x=t?+t:0,this.y=e?+e:0,this.z=i?+i:0},Atlantis.Vector3.prototype.fromVector=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Atlantis.Vector3.Zero=function(){return new Atlantis.Vector3(0,0,0)},Atlantis.Vector3.One=function(){return new Atlantis.Vector3(1,1,1)},Atlantis.Vector3.UnitX=function(){return new Atlantis.Vector3(1,0,0)},Atlantis.Vector3.UnitY=function(){return new Atlantis.Vector3(0,1,0)},Atlantis.Vector3.UnitZ=function(){return new Atlantis.Vector3(0,0,1)},Atlantis.Vector3.Up=function(){return new Atlantis.Vector3(0,1,0)},Atlantis.Vector3.Down=function(){return new Atlantis.Vector3(0,-1,0)},Atlantis.Vector3.Right=function(){return new Atlantis.Vector3(1,0,0)},Atlantis.Vector3.Left=function(){return new Atlantis.Vector3(-1,0,0)},Atlantis.Vector3.Forward=function(){return new Atlantis.Vector3(0,0,-1)},Atlantis.Vector3.Backward=function(){return new Atlantis.Vector3(0,0,1)},Atlantis.Vector3.prototype.add=function(t){t instanceof Atlantis.Vector3?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t)},Atlantis.Vector3.add=function(t,e){var i=new Atlantis.Vector3(t);return i.add(e),i},Atlantis.Vector3.prototype.subtract=function(t){t instanceof Atlantis.Vector3?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t)},Atlantis.Vector3.subtract=function(t,e){var i=new Atlantis.Vector3(t);return i.subtract(e),i},Atlantis.Vector3.prototype.divide=function(t){0!==t.x&&(this.x/=t.x),0!==t.y&&(this.y/=t.y),0!==t.z&&(this.z/=t.z)},Atlantis.Vector3.divide=function(t,e){var i=new Atlantis.Vector3(t);return i.divide(e),i},Atlantis.Vector3.prototype.multiply=function(t){t instanceof Atlantis.Vector3?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t)},Atlantis.Vector3.multiply=function(t,e){var i=new Atlantis.Vector3(t);return i.multiply(e),i},Atlantis.Vector3.cross=function(t,e){var i=new Atlantis.Vector3;return i.x=t.y*e.z-e.y*t.z,i.y=-(t.x*e.z-e.x*t.z),i.z=t.x*e.y-e.x*t.y,i},Atlantis.Vector3.distance=function(t,e){return Math.sqrt(Atlantis.Vector3.distanceSquared(t,e))},Atlantis.Vector3.distanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y,s=t.z-e.z;return i*i+n*n+s*s},Atlantis.Vector3.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},Atlantis.Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Atlantis.Vector3.prototype.lerp=function(t,e){this.x=Atlantis.MathHelper.lerp(this.x,t.x,e),this.y=Atlantis.MathHelper.lerp(this.y,t.y,e),this.z=Atlantis.MathHelper.lerp(this.z,t.z,e)},Atlantis.Vector3.lerp=function(t,e,i){var n=Atlantis.MathHelper.lerp(t.x,e.x,i),s=Atlantis.MathHelper.lerp(t.y,e.y,i),a=Atlantis.MathHelper.lerp(t.z,e.z,i);return new Atlantis.Vector3(n,s,a)},Atlantis.Vector3.min=function(t,e){var i=new Atlantis.Vector3;return i.x=t.x<e.x?t.x:e.x,i.y=t.y<e.y?t.y:e.y,i.z=t.z<e.z?t.z:e.z,i},Atlantis.Vector3.max=function(t,e){var i=new Atlantis.Vector3;return i.x=t.x>e.x?t.x:e.x,i.y=t.y>e.y?t.y:e.y,i.z=t.z>e.z?t.z:e.z,i},Atlantis.Vector3.prototype.negate=function(){this.x*=-1,this.y*=-1,this.z*=-1},Atlantis.Vector3.negate=function(t){var e=new Atlantis.Vector3(t);return e.negate(),e},Atlantis.Vector3.prototype.normalize=function(){var t=Atlantis.Vector3.distance(this,new Atlantis.Vector3);0!==t&&(t=1/t,this.set(this.x*t,this.y*t,this.z*t))},Atlantis.Vector3.normalize=function(t){var e=new Atlantis.Vector3(t);return e.normalize(),e},Atlantis.Vector3.transform=function(t,e){var i=new Atlantis.Vector3(t.x*e.M11+t.y*e.M21+t.z*e.M31+e.M41,t.x*e.M12+t.y*e.M22+t.z*e.M32+e.M42,t.x*e.M13+t.y*e.M23+t.z*e.M33+e.M43);return i},Atlantis.Vector3.transformCoordinate=function(t,e){var i=new Atlantis.Vector4;return i.x=t.x*e.M11+t.y*e.M21+t.z*e.M31+e.M41,i.y=t.x*e.M12+t.y*e.M22+t.z*e.M32+e.M42,i.z=t.x*e.M13+t.y*e.M23+t.z*e.M33+e.M43,i.w=1/(t.x*e.M14+t.y*e.M24+t.z*e.M34+e.M44),new Atlantis.Vector3(i.x*i.w,i.y*i.w,i.z*i.w)},Atlantis.Vector3.prototype.set=function(t,e,i){this.x=t,this.y=e,this.z=i},Atlantis.Vector3.prototype.clone=function(){return new Atlantis.Vector3(this.x,this.y,this.z)},Atlantis.Vector3.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.Vector4=function(t,e,i,n){this.x=t?+t:0,this.y=e?+e:0,this.z=i?+i:0,this.z=n?+n:0},Atlantis.Vector4.prototype.fromVector=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},Atlantis.Vector4.prototype.lerp=function(t,e){this.x=Atlantis.MathHelper.lerp(this.x,t.x,e),this.y=Atlantis.MathHelper.lerp(this.y,t.y,e),this.z=Atlantis.MathHelper.lerp(this.z,t.z,e),this.w=Atlantis.MathHelper.lerp(this.w,t.w,e)},Atlantis.Vector4.lerp=function(t,e,i){var n=new Atlantis.Vector4(t);return n.lerp(e,i),n},Atlantis.Vector4.prototype.clone=function(){return new Atlantis.Vector4(this.x,this.y,this.z,this.w)},Atlantis.Vector4.prototype.toString=function(){return[\"x: \",this.x,\" y: \",this.y,\" z: \",this.z,\" w: \",this.w].join(\"\")};var Atlantis=window.Atlantis||{};Atlantis.KeyboardState=function(t){this.keys=[];for(var e=0,i=t.length;i>e;e++)this.keys.push(t[e])},Atlantis.KeyboardState.prototype.clone=function(){return new Atlantis.Input.KeyboardState(this.keys)},Atlantis.KeyboardState.prototype.isKeyDown=function(t){return this.keys[t]===!0},Atlantis.KeyboardState.prototype.isKeyUp=function(t){return this.keys[t]===!1},Atlantis.Keyboard=function(t){this.keys=[],this.maxKeys=t||130;for(var e=0;t>e;e++)this.keys[e]=!1;var i=this,n=function(t){Atlantis.Keyboard.preventDefault&&t.preventDefault(),i.keys[t.keyCode]=\"keydown\"===t.type?!0:!1};document.addEventListener(\"keydown\",n,!1),document.addEventListener(\"keyup\",n,!1)},Atlantis.Keyboard.preventDefault=!1,Atlantis.Keyboard.prototype.getState=function(){return new Atlantis.KeyboardState(this.keys)};var Atlantis=window.Atlantis||{};Atlantis.ButtonState={Released:0,Pressed:1},Atlantis.MouseState=function(t,e,i,n){this.x=t,this.y=e,this.scrollWheelValue=i,this.leftButton=n[0],this.rightButton=n[2],this.middleButton=n[1]},Atlantis.MouseState.prototype.clone=function(){return new Atlantis.MouseState(this.x,this.y,this.scrollWheelValue,[this.leftButton,this.middleButton,this.rightButton])},Atlantis.Mouse=function(t){t=t instanceof HTMLElement?t:document.body,this._x=0,this._y=0,this._scroll=0,this._buttons=[],this._buttons[0]=!1,this._buttons[1]=!1,this._buttons[2]=!1,this.preventDefault=!0;var e=this,i=function(){e._buttons[0]=!1,e._buttons[1]=!1,e._buttons[2]=!1},n=function(n){e._x=(n.pageX-t.offsetLeft)*Atlantis.Game.scaleFactor.x,e._y=(n.pageY-t.offsetTop)*Atlantis.Game.scaleFactor.y,\"mousemove\"!==n.type&&\"pointermove\"!==n.type&&(i(),\"mousedown\"===n.type||\"pointerdown\"===n.type?e._buttons[n.button]=!0:e._buttons[n.button]=!1)},s=function(t){e._scroll=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail))};t.addEventListener(\"mousedown\",n,!1),t.addEventListener(\"mousemove\",n,!1),t.addEventListener(\"mouseup\",n,!1),t.addEventListener(\"mousewheel\",s,!1),t.addEventListener(\"DOMMouseScroll\",s,!1)},Atlantis.Mouse.prototype.getState=function(){return new Atlantis.MouseState(this._x,this._y,this._scroll,this._buttons)};var Atlantis=window.Atlantis||{};Atlantis.TouchLocationState={Invalid:1,Moved:2,Pressed:3,Released:4},Atlantis.TouchCollection=function(t){Array.call(this),t=t||[];for(var e=0,i=t.length;i>e;e++)this.push(new Atlantis.TouchPanelState(t[e]))},Atlantis.TouchCollection.prototype=Object.create(Array.prototype),Atlantis.TouchCollection.prototype.clone=function(){for(var t=[],e=0,i=this.length;i>e;e++)t.push(this[e].clone());return new Atlantis.TouchCollection(t)},Atlantis.TouchPanelState=function(t){this.state=t.state||Atlantis.TouchLocationState.Invalid,\nthis.position=t.position?t.position:new Atlantis.Vector2(0,0)},Atlantis.TouchPanelState.prototype.clone=function(){return new Atlantis.TouchPanelState({state:this.state,position:{x:this.position.x,y:this.position.y}})},Atlantis.TouchPanel=function(t){this._states=[new Atlantis.TouchPanelState({}),new Atlantis.TouchPanelState({}),new Atlantis.TouchPanelState({})];var e={up:\"touchend\",down:\"touchstart\",cancel:\"touchcancel\",move:\"touchmove\",callback:null},i=this,n=null,s=!1,a=function(a,o){if(i._states[a]||(i._states[a]=new Atlantis.TouchPanelState),o.touches?(i._states[a].position.x=o.touches[a].pageX-t.offsetLeft,i._states[a].position.y=o.touches[a].pageY-t.offsetTop):(i._states[a].position.x=o.clientX-t.offsetLeft,i._states[a].position.y=o.clientY-t.offsetTop),i._states[a].position.x*=Atlantis.Game.scaleFactor.x,i._states[a].position.y*=Atlantis.Game.scaleFactor.y,s){var r=n===e.down&&o.type===e.move;if(n=o.type,r)return void(n=null)}o.type==e.down?i._states[a].state=Atlantis.TouchLocationState.Pressed:o.type==e.move?(o.preventDefault(),i._states[a].state=Atlantis.TouchLocationState.Moved):o.type==e.up?i._states[a].state=Atlantis.TouchLocationState.Released:i._states[a].state=Atlantis.TouchLocationState.Invalid},o=function(t){var e=0,n=0;if(\"touchend\"===t.type||\"touchcancel\"===t.type)for(e=0,n=i._states.length;n>e;e++)i._states[e].state=\"touchend\"===t.type?Atlantis.TouchLocationState.Released:Atlantis.TouchLocationState.Invalid;else for(e=0,n=t.touches.length;n>e;e++)a(e,t)},r=function(t){t.preventDefault(),\"MSPointerUp\"===t.type||\"MSPointerCancel\"===t.type||\"pointerup\"===t.type||\"pointercancel\"===t.type?i._states[0].state=\"MSPointerUp\"===t.type||\"pointerup\"===t.type?Atlantis.TouchLocationState.Released:Atlantis.TouchLocationState.Invalid:a(0,t)},h=+navigator.maxTouchPoints||+navigator.msMaxTouchPoints;0!==h&&(window.PointerEvent?(e.up=\"pointerup\",e.down=\"pointerdown\",e.move=\"pointermove\",e.cancel=\"pointercancel\",e.callback=r):window.MSPointerEvent?(e.up=\"MSPointerUp\",e.down=\"MSPointerDown\",e.move=\"MSPointerMove\",e.cancel=\"MSPointerCancel\",e.callback=r):e.callback=o,s=\"touchstart\"!==e.down,t.addEventListener(e.down,e.callback,!1),t.addEventListener(e.move,e.callback,!1),t.addEventListener(e.up,e.callback,!1),t.addEventListener(e.cancel,e.callback,!1))},Atlantis.TouchPanel.prototype.getCapabilities=function(){return{hasTouch:!!(\"ontouchstart\"in window)||!!(\"ongesturechange\"in window)}},Atlantis.TouchPanel.prototype.getState=function(t){return\"number\"==typeof t?new Atlantis.TouchPanelState(this._states[t]?this._states[t]:{}):new Atlantis.TouchCollection(this._states)};var Atlantis=window.Atlantis||{};Atlantis.GamepadButton={A:0,B:1,X:2,Y:3,LeftShoulder:4,RightShoulder:5,LeftTrigger:6,RightTrigger:7,Select:8,Start:9,L3:10,R3:11,DPadUp:12,DPadDown:13,DPadLeft:14,DPadRight:15},Atlantis.GamepadAxis={Horizontal:0,Vertical:1,HorizontalRight:2,VerticalRight:3},Atlantis.GamepadState=function(t,e){this.axis=[],this.buttons=[];var i=0,n=0;if(t)for(i=0,n=t.length;n>i;i++)this.axis.push(t[i]);else for(i=0;6>i;i++)this.axis.push(0);if(e)for(i=0,n=e.length;n>i;i++)this.buttons.push(e[i]);else for(i=0;15>i;i++)this.buttons.push(!1)},Atlantis.GamepadState.prototype.isButtonDown=function(t){return this.buttons[t]},Atlantis.GamepadState.prototype.isButtonUp=function(t){return!this.buttons[t]},Atlantis.GamepadState.prototype.getAxis=function(t){return this.axis[t]},Atlantis.Gamepad=function(){Atlantis.GameComponent.call(this),this._gamepads=[],this._states={}},Atlantis.Gamepad.prototype=Object.create(Atlantis.GameComponent.prototype),Atlantis.Gamepad.prototype.initialize=function(){var t=this;navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.msGetGamepads||navigator.webkitGamepads,this._gamepadsSupported=navigator.getGamepads?!0:!1,window.addEventListener(\"gamepadconnected\",function(e){t._addGamepad(e.gamepad)},!1),window.addEventListener(\"gamepaddisconnected\",function(e){t._removeGamepad(e.gamepad)},!1)},Atlantis.Gamepad.prototype._addGamepad=function(t){this._gamepads.push(t),this._states[t.index]=new Atlantis.GamepadState},Atlantis.Gamepad.prototype._removeGamepad=function(t){delete this._gamepads[t.index],delete this._states[t.index]},Atlantis.Gamepad.prototype._updateGamepads=function(){for(var t=navigator.getGamepads(),e=0;e<t.length;e++)t[e]&&-1===this._gamepads.indexOf(t[e])&&this._addGamepad(t[e])},Atlantis.Gamepad.prototype.update=function(t){if(this._gamepadsSupported){var e=0,i=0;this._updateGamepads();for(var n=0,s=this._gamepads.length;s>n;n++){var a=this._gamepads[n];for(e=0,i=a.buttons.length;i>e;e++){var o=a.buttons[e],r=1===o?!0:!1;\"object\"==typeof o&&(r=o.pressed,o=o.value),this._states[a.index].buttons[e]=r}for(e=0,i=a.axes.length;i>e;e++)this._states[a.index].axis[e]=0|+a.axes[e]}}},Atlantis.Gamepad.prototype.getState=function(t){return t=\"undefined\"!=typeof t?t:0,this._gamepads[t]?new Atlantis.GamepadState(this._states[t].axis,this._states[t].buttons):new Atlantis.GamepadState};var Atlantis=window.Atlantis||{};Atlantis.Keys={BackSpace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,Escape:27,Space:32,Home:36,End:35,Left:37,Up:38,Right:39,Down:40,Suppr:46,PageUp:33,PageDown:34,Insert:45,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Super:91,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var Atlantis=window.Atlantis||{};Atlantis.ScaleMode={ScaleToFit:0,ConserveAspectRatio:1,NoScaleCenter:2},Atlantis.GraphicsDevice=function(t,e,i){if(i=i||{},i.width=t,i.height=e,this.preferredBackBufferWidth=i.backBufferWidth||t,this.preferredBackBufferHeight=i.backBufferHeight||e,this.disableSmoothing=!1,this.forceDisableSmoothing=!1,this.viewport=new Atlantis.Rectangle,this.scaleMode=Atlantis.ScaleMode.ScaleToFit,t&&e){this._frontBuffer=new Atlantis.RenderTarget(t,e,i.canvas),this._fbContext=this._frontBuffer.getContext(),this._backBuffer=new Atlantis.RenderTarget(this.preferredBackBufferWidth,this.preferredBackBufferHeight),this._bbCanvas=this._backBuffer.getCanvas();var n=this._frontBuffer.getCanvas();n.style.msTouchAction=\"none\",n.style.backgroundColor=\"#000\",n.id=n.id?n.id:\"AtlantisCanvas\",this.viewport.setSize(this.preferredBackBufferWidth,this.preferredBackBufferHeight)}},Atlantis.GraphicsDevice.prototype.applyChanges=function(){this._backBuffer.setSize(this.preferredBackBufferWidth,this.preferredBackBufferHeight);var t=this._frontBuffer.getWidth(),e=this._frontBuffer.getHeight();if(this.scaleMode==Atlantis.ScaleMode.ScaleToFit||t===this.preferredBackBufferWidth&&e===this.preferredBackBufferHeight)this.viewport.set(0,0,t,e);else if(this.scaleMode==Atlantis.ScaleMode.ConserveAspectRatio){var i=0;this.preferredBackBufferWidth>this.preferredBackBufferHeight?(i=this.preferredBackBufferWidth/t,this.viewport.width=t,this.viewport.height=this.preferredBackBufferHeight*(1+i)):(i=this.preferredBackBufferHeight/e,this.viewport.width=this.preferredBackBufferWidth*(1+i),this.viewport.height=e),this.viewport.x=t/2-this.viewport.width/2,this.viewport.y=e/2-this.viewport.height/2}else this.scaleMode==Atlantis.ScaleMode.NoScaleCenter&&(this.viewport.x=t/2-this.preferredBackBufferWidth/2,this.viewport.y=e/2-this.preferredBackBufferHeight/2,this.viewport.width=this.preferredBackBufferWidth,this.viewport.height=this.preferredBackBufferHeight);Atlantis.Game.scaleFactor.x=this.preferredBackBufferWidth/this._frontBuffer.getWidth(),Atlantis.Game.scaleFactor.y=this.preferredBackBufferHeight/this._frontBuffer.getHeight(),Atlantis.notify(Atlantis.events.ResolutionChanged,{width:this.preferredBackBufferWidth,height:this.preferredBackBufferHeight})},Atlantis.GraphicsDevice.prototype.getBackBuffer=function(){return this._backBuffer},Atlantis.GraphicsDevice.prototype.getFrontBuffer=function(){return this._frontBuffer},Atlantis.GraphicsDevice.prototype.clear=function(t){this._backBuffer.clear(t),this._frontBuffer.clear(t),this.disableSmoothing&&(this._backBuffer.getContext().imageSmoothingEnabled=!1,this._fbContext.imageSmoothingEnabled=!1)},Atlantis.GraphicsDevice.prototype.present=function(){this._fbContext.drawImage(this._bbCanvas,this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height)},Atlantis.GraphicsDevice.prototype.toggleFullscreen=function(t){t=t instanceof HTMLElement?t:this._frontBuffer.getCanvas();var e=this.isFullscreen();t.requestFullScreen=t.requestFullScreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||function(){return!1},document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||function(){return!1},e?document.cancelFullScreen():t.requestFullScreen()},Atlantis.GraphicsDevice.prototype.isFullscreen=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||!1};var Atlantis=window.Atlantis||{};Atlantis.SpriteSortMode={BackToFront:0,FrontToBack:1,Immediate:2},Atlantis.SpriteEffect={None:0,FlipHorizontaly:1,FlipVerticaly:2},Atlantis.BatchItemType={Texture:0,Font:1},Atlantis.SpriteBatch=function(t){this._graphicsDevice=t,this._viewport=new Atlantis.Rectangle(0,0,t.preferredBackBufferWidth,t.preferredBackBufferHeight),this._canvas=this._graphicsDevice.getBackBuffer().getCanvas(),this._context=this._graphicsDevice.getBackBuffer().getContext(),this._batchItems=[],this._batchStarted=!1,this._spriteSortMode=Atlantis.SpriteSortMode.Immediate,this._transformMatrix=null,this._cacheColoredTextures=[],this._batchRect=new Atlantis.Rectangle,document.addEventListener(Atlantis.events.ResolutionChanged,this._onResize.bind(this),!1)},Atlantis.SpriteBatch.prototype._onResize=function(t){this._viewport.width=t.width,this._viewport.height=t.height},Atlantis.SpriteBatch.prototype.begin=function(t,e){this._batchStarted||(this._batchStarted=!0,this._spriteSortMode=\"number\"==typeof t?t:Atlantis.SpriteSortMode.Immediate,this._transformMatrix=e,this._transformMatrix&&(this._context.save(),this._context.transform(this._transformMatrix[0],this._transformMatrix[1],this._transformMatrix[2],this._transformMatrix[3],this._transformMatrix[4],this._transformMatrix[5])))},Atlantis.SpriteBatch.prototype.draw=function(t,e,i,n,s,a,o,r,h){this._batchStarted&&(e.width||(e.width=t.width,e.height=t.height),this._spriteSortMode==Atlantis.SpriteSortMode.Immediate?this._drawBatchItem(t,e,i,n,s,a,o,r,h,Atlantis.BatchItemType.Texture):this._batchItems.push({type:Atlantis.BatchItemType.Texture,texture2D:t,sourceRectangle:i,destinationRectangle:e,color:n,rotation:s,origin:a,scale:o,effect:r?r:Atlantis.SpriteEffect.None,layerDepth:0|+h}))},Atlantis.SpriteBatch.prototype.drawString=function(t,e,i,n,s,a,o,r,h){this._batchStarted&&(this._spriteSortMode===Atlantis.SpriteSortMode.Immediate?this._drawBatchItem(t,i,e,n,s,a,o,r,h,Atlantis.BatchItemType.Font):this._batchItems.push({type:Atlantis.BatchItemType.Font,texture2D:t,sourceRectangle:e,destinationRectangle:{x:i.x,y:i.y,width:1,height:1},color:n,rotation:s,origin:a,scale:o,effect:r?r:Atlantis.SpriteEffect.None,layerDepth:0|+h}))},Atlantis.SpriteBatch.prototype.end=function(){if(this._batchStarted){if(this._spriteSortMode!==Atlantis.SpriteSortMode.Immediate){this._batchItems=this._batchItems.sort(this._sortBatchItem.bind(this));for(var t=0,e=this._batchItems.length;e>t;t++)this._drawBatchItem(this._batchItems[t].texture2D,this._batchItems[t].destinationRectangle,this._batchItems[t].sourceRectangle,this._batchItems[t].color,this._batchItems[t].rotation,this._batchItems[t].origin,this._batchItems[t].scale,this._batchItems[t].effect,this._batchItems[t].layerDepth,this._batchItems[t].type);this._batchItems.length=0}this._transformMatrix&&this._context.restore(),this._batchStarted=!1}},Atlantis.SpriteBatch.drawTexture=function(t,e,i,n,s,a,o){o?t.drawImage(e,o.x,o.y,o.width,o.height,i,n,s,a):t.drawImage(e,i,n,s,a)},Atlantis.SpriteBatch.drawString=function(t,e,i,n,s){t.fillStyle=s,t.font=e.getFont(),e.strokeStyle&&e.lineWidth&&(t.lineWidth=e.lineWidth,t.strokeStyle=e.strokeStyle,e.wrapText||t.strokeText(i,n.x,n.y)),e.wrapText?Atlantis.SpriteBatch._wrapText(t,i,n.x,n.y,n.width,e.size,e.strokeStyle&&e.lineWidth):t.fillText(i,n.x,n.y)},Atlantis.SpriteBatch.prototype._drawBatchItem=function(t,e,i,n,s,a,o,r,h,l){if(this._batchRect.fromRectangle(e),this._viewport.intersects(this._batchRect)){var c=a?a.x:0,u=a?a.y:0;this._context.save(),this._context.translate(e.x,e.y),this._context.translate(c,u),this._batchRect.x=-c,this._batchRect.y=-u,s&&this._context.rotate(s),o&&this._context.scale(o.x,o.y),r&&r!==Atlantis.SpriteEffect.None&&(r==Atlantis.SpriteEffect.FlipHorizontaly?(this._context.scale(-1,1),this._batchRect.x-=this._batchRect.width):(this._context.scale(1,-1),this._batchRect.y-=this._batchRect.height)),l===Atlantis.BatchItemType.Texture?n&&t.width&&t.height?Atlantis.SpriteBatch.drawTexture(this._context,this._colorizeTexture(t,n),this._batchRect.x,this._batchRect.y,this._batchRect.width,this._batchRect.height,i):Atlantis.SpriteBatch.drawTexture(this._context,t,this._batchRect.x,this._batchRect.y,this._batchRect.width,this._batchRect.height,i):l===Atlantis.BatchItemType.Font&&Atlantis.SpriteBatch.drawString(this._context,t,i,this._batchRect,n),this._context.restore()}},Atlantis.SpriteBatch.prototype._colorizeTexture=function(t,e){var i=this._searchColoredTexture(t,e);if(!i){i=document.createElement(\"canvas\"),i.width=t.width,i.height=t.height;var n=i.getContext(\"2d\");n.drawImage(t,0,0);for(var s=n.getImageData(0,0,t.width,t.height),a=this._hexaToBytes(e),o=0,r=s.data.length;r>o;o+=4)s.data[o]=a.r|s.data[o],s.data[o+1]=a.g|s.data[o+1],s.data[o+2]=a.b|s.data[o+2],s.data[o+3]=a.a|s.data[o+3];n.putImageData(s,0,0),this._cacheColoredTextures.push({texture:t,color:e,canvas:i})}return i},Atlantis.SpriteBatch.prototype._hexaToBytes=function(t){var e=t.split(\"#\")[1],i={r:0,g:0,b:0,a:0},n=e.length;return 3===n?(i.r=parseInt(e[0]+e[0],16),i.g=parseInt(e[1]+e[1],16),i.b=parseInt(e[2]+e[2],16)):6===n?(i.r=parseInt(e.slice(0,2),16),i.g=parseInt(e.slice(2,4),16),i.b=parseInt(e.slice(4,6),16)):8===n&&(i.r=parseInt(e.slice(0,2),16),i.g=parseInt(e.slice(2,4),16),i.b=parseInt(e.slice(4,6),16),i.a=parseInt(e.slice(6,8),16)),i},Atlantis.SpriteBatch.prototype._searchColoredTexture=function(t,e){for(var i=0,n=this._cacheColoredTextures.length,s=null;n>i&&null===s;)s=this._cacheColoredTextures[i].texture===t&&this._cacheColoredTextures[i].color===e?this._cacheColoredTextures[i].canvas:null,i++;return s},Atlantis.SpriteBatch.prototype._sortBatchItem=function(t,e){return this._spriteSortMode===Atlantis.SpriteSortMode.BackToFront?+t.layerDepth>+e.layerDepth?1:+t.layerDepth<+e.layerDepth?-1:0:+t.layerDepth<+e.layerDepth?1:+t.layerDepth>+e.layerDepth?-1:0},Atlantis.SpriteBatch._wrapText=function(t,e,i,n,s,a,o){for(var r=e.split(\" \"),h=\"\",l=0;l<r.length;l++){var c=h+r[l]+\" \",u=t.measureText(c),p=u.width;p>s&&l>0?(o&&t.strokeText(h,i,n),t.fillText(h,i,n),h=r[l]+\" \",n+=a):h=c}o&&t.strokeText(h,i,n),t.fillText(h,i,n)};var Atlantis=window.Atlantis||{};Atlantis.RenderTarget=function(t,e,i){this._canvas=i,this._canvas||(this._canvas=document.createElement(\"canvas\"),this.setSize(t,e)),this._context=null,this._data=null,this._needUpdate=!1,this._context=this._canvas.getContext(\"2d\"),this.setSize(t,e)},Atlantis.RenderTarget.fromImage=function(t){var e=new Atlantis.RenderTarget(t.width,t.height,!1);return e._context.drawImage(t,0,0,t.width,t.height),e},Atlantis.RenderTarget.prototype.setData=function(t){this._context.putImageData(t,0,0)},Atlantis.RenderTarget.prototype.getData=function(){return(!this._data||this._needUpdate)&&(this._data=this._context.getImageData(0,0,this._canvas.width,this._canvas.height)),this._data},Atlantis.RenderTarget.prototype.getPixelData=function(t,e){var i=this._context.getImageData(t,e,1,1).data;return{r:i[0],g:i[1],b:i[2],a:i[3]}},Atlantis.RenderTarget.prototype.getContext=function(){return this._context},Atlantis.RenderTarget.prototype.getCanvas=function(){return this._canvas},Atlantis.RenderTarget.prototype.getWidth=function(){return this._canvas.width},Atlantis.RenderTarget.prototype.getHeight=function(){return this._canvas.height},Atlantis.RenderTarget.prototype.setSize=function(t,e){this._canvas.width=t,this._canvas.height=e},Atlantis.RenderTarget.prototype.clear=function(t){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)},Atlantis.RenderTarget.prototype.saveAsPng=function(){return this._canvas.toDataURL(\"image/png\")},Atlantis.RenderTarget.prototype.saveAsJpg=function(){return this._canvas.toDataURL(\"image/jpg\")};var Atlantis=window.Atlantis||{};Atlantis.SpriteFont=function(t,e,i){this.fontName=t||\"Arial\",this.size=e||14,this.style=i||\"normal\",this.strokeStyle=null,this.lineWidth=0},Atlantis.SpriteFont.prototype.getFont=function(){return[this.style,\" \",this.size,\"px \",this.fontName].join(\"\")},Atlantis.SpriteFont.prototype.clone=function(){var t=new Atlantis.SpriteFont(this.fontName,this.size,this.style);return t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t};var Atlantis=window.Atlantis||{};Atlantis.Preloader=function(t){this.screenWidth=t.graphicsDevice.preferredBackBufferWidth,this.screenHeight=t.graphicsDevice.preferredBackBufferHeight,this.screenWidthPerTwo=this.screenWidth/2,this.screenHeightPerTwo=this.screenHeight/2,this.spriteFont=new Atlantis.SpriteFont(\"Arial\",32)},Atlantis.Preloader.prototype.onProgress=function(t,e){var i=[\"Game loading \",Math.round(e.progress),\"%\"].join(\"\"),n=t.measureText(i),s=this.screenWidthPerTwo-n.width/2,a=this.screenHeightPerTwo-this.spriteFont.size/2;t.clearRect(0,0,this.screenWidth,this.screenHeight),t.fillStyle=\"#fafafa\",t.font=this.spriteFont.getFont(),t.fillText(i,s,a)};var Atlantis=window.Atlantis||{};Atlantis.Game=function(){function t(){i.gameTime.update(),i.update(i.gameTime),i.draw(i.gameTime),i.afterDraw(i.gamepad),i._paused||requestAnimationFrame(t)}function e(t){i.width=t.target.innerWidth,i.height=t.target.innerHeight,i.canvas.width=i.width,i.canvas.height=i.height}var i=null,n=function(t,e,n,s){this.settings=s||{},t=t||window.innerWidth,e=e||window.innerHeight,this.domElement=document.body,typeof n instanceof HTMLElement?this.domElement=n:\"string\"==typeof n&&(\".\"===n[0]?(n=n.replace(\".\",\"\"),this.domElement=document.getElementsByClassName(n)[0]):(n=\"#\"===n[0]?n.replace(\"#\",\"\"):n,this.domElement=document.getElementById(n))),this.domElement instanceof HTMLCanvasElement&&(this.settings.canvas=this.domElement),this.version=\"0.0.0.1\",this.gameTime=new Atlantis.GameTime,this.components=new Atlantis.GameComponentCollection,this.content=new Atlantis.ContentManager,this.keyboard=null,this.mouse=null,this.touchPanel=null,this.gamepad=null,this.preloader=null,this.graphicsDevice=new Atlantis.GraphicsDevice(t,e,this.settings),this.canvas=this.settings.canvas,this.frontBuffer=null,this.context=null,this.initialized=!1,this._paused=!1,i=this};return n.scaleFactor=new Atlantis.Vector2(1,1),n.prototype._internalIntialize=function(){this.frontBuffer=this.graphicsDevice.getFrontBuffer(),this.context=this.frontBuffer.getContext(),this.canvas||(this.canvas=this.frontBuffer.getCanvas()),this.keyboard=new Atlantis.Keyboard,this.mouse=new Atlantis.Mouse(this.frontBuffer.getCanvas()),this.touchPanel=new Atlantis.TouchPanel(this.frontBuffer.getCanvas()),this.gamepad=new Atlantis.Gamepad,this.components.add(this.gamepad),this.settings.resizeEnabled&&window.addEventListener(\"resize\",e,!1),this.domElement&&!this.settings.canvas&&this.domElement.appendChild(this.frontBuffer.getCanvas())},n.prototype.initialize=function(){this.components.initialize()},n.prototype.loadContent=function(){this.components.loadContent(this.content)},n.prototype.unloadContent=function(){this.components.unloadContent()},n.prototype.update=function(t){this.components.update(t)},n.prototype.draw=function(t,e){this.settings.autoClear&&this.graphicsDevice.clear(),this.components.draw(t,e)},n.prototype.afterDraw=function(t){this.graphicsDevice.present()},n.prototype.run=function(){var e=this,i=function(){e.initialize(),e.initialized=!0,e.loadContent(),e.frontBuffer.getCanvas().focus(),t()};this.initialized||(this.initialized=!0,this._internalIntialize(),this.content.preloader.length?(null===this.preloader&&(this.preloader=new Atlantis.Preloader(this)),this.content.preload(function(t){this.preloader.onProgress(this.context,t)}.bind(this),function(){this.context.clearRect(0,0,this.frontBuffer.getWidth(),this.frontBuffer.getHeight()),i()}.bind(this))):i())},n.prototype.pause=function(){cancelAnimationFrame(t),this._paused=!0},n.prototype.resume=function(){this._paused&&(this._paused=!1,t())},n}();\n//# sourceMappingURL=atlantis.framework.min.js.map\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * An helper to generate random value for some types.\r\n * @class Random\r\n * @static\r\n */\r\nAtlantis.Random = {\r\n\t/**\r\n\t * Gets a random value.\r\n\t * @method value\r\n\t * @return {Number} Return a random value.\r\n\t */\r\n\tvalue: function() {\r\n\t\treturn Math.random();\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random float between min and max.\r\n\t * @method randomFloat\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Number} Return a random value between min and max.\r\n\t */\r\n\trandomFloat: function(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random integer between min and max.\r\n\t * @method randomFloat\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Number} Return a random value between min and max.\r\n\t */\r\n\trandomInt: function(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random Vector2 between min and max.\r\n\t * @method vector2\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector2} Return a random Vector2 between min and max.\r\n\t */\r\n\tvector2: function(min, max) {\r\n\t\treturn new Atlantis.Vector2(this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random Vector3 between min and max.\r\n\t * @method vector3\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector3} Return a random vector3 between min and max.\r\n\t */\r\n\tvector3: function(min, max) {\r\n\t\treturn new Atlantis.Vector3(this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random vector4 between min and max.\r\n\t * @method vector4\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {Atlantis.Vector4} Return a random vector4 between min and max.\r\n\t */\r\n\tvector4: function(min, max) {\r\n\t\treturn new Atlantis.Vector4(this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max), this.randomFloat(min, max));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random float between min and max.\r\n\t * @method color\r\n\t * @param {Number} min The minimum value.\r\n\t * @param {Number} max The maximum value.\r\n\t * @return {String} Return a random color in hexadecimal format.\r\n\t */\r\n\tcolor: function() {\r\n\t\treturn (\"#\" + (Math.floor(Math.random() * 16777215).toString(16)));\r\n\t},\r\n\r\n\t/**\r\n\t * Gets a random element from an Array.\r\n\t * @method randomArrayItem\r\n\t * @param {Array} array The array to use.\r\n\t * @return {Object} Return a random value from the array.\r\n\t */\r\n\trandomArrayItem: function(array) {\r\n\t\tif (array.length === 0) return undefined;\r\n\t\treturn array[Atlantis.Random.randomInt(0, array.length - 1)];\r\n\t}\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * Define a music status\r\n * @class MusicState\r\n * @static\r\n */\r\nAtlantis.MusicState = {\r\n    Playing: 1,\r\n    Stopped: 2,\r\n    Paused: 3\r\n};\r\n\r\n/**\r\n * An audio manager to play sound and musics.\r\n * @constructor \r\n * @class AudioManager\r\n */\r\nAtlantis.AudioManager = function() {\r\n    this.repeatMusic = false;\r\n    this.currentMusic = null;\r\n    this.volume = 1;\r\n    this.currentState = Atlantis.MusicState.STOPPED;\r\n};\r\n\r\n/**\r\n * Play a sound or a music one time\r\n * @method playOneShot\r\n */\r\nAtlantis.AudioManager.prototype.playOneShot = function(audioClip) {\r\n    audioClip.play();\r\n};\r\n\r\n/**\r\n * Play a music.\r\n * @method playMusic\r\n * @param {AudioElement} music An HTML Audio Element that contains the music.\r\n * @param {Boolean} repeat Sets to true for enable repeat.\r\n */\r\nAtlantis.AudioManager.prototype.play = function(music, repeat) {\r\n    this.stopMusic();\r\n    this.currentMusic = music;\r\n    this.repeat = repeat;\r\n    this.currentMusic.play();\r\n    this.currentState = Atlantis.MusicState.Playing;\r\n};\r\n\r\n/**\r\n * Stop the current played music.\r\n * @method stopMusic\r\n */\r\nAtlantis.AudioManager.prototype.stop = function() {\r\n    this.currentMusic.stop();\r\n    this.currentState = Atlantis.MusicState.Stopped;\r\n};\r\n\r\n/**\r\n * Pause the current played music.\r\n * @method pauseMusic\r\n */\r\nAtlantis.AudioManager.prototype.pause = function() {\r\n    if (this.currentState == Atlantis.MusicState.Playing) {\r\n        this.currentMusic.pause();\r\n        this.currentState = Atlantis.MusicState.Paused;\r\n    }\r\n};\r\n\r\n/**\r\n * Resume a paused music.\r\n * @method resume\r\n */\r\nAtlantis.AudioManager.prototype.resume = function() {\r\n    if (this.currentState == Atlantis.MusicState.Paused) {\r\n        this.currentMusic.play();\r\n        this.currentState = Atlantis.MusicState.Playing;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A storage manager that work with localStorage\r\n * @constructor\r\n * @class StorageManager\r\n */\r\nAtlantis.StorageManager = function() {\r\n\tthis.container = \"atlantis.game\";\r\n};\r\n\r\n/**\r\n * Save data in the localStorage.\r\n * @method save\r\n * @param {String} container The localStorage key.\r\n * @param {String} name Desired name for the data who'll save.\r\n * @param {Object} or {String} data An object to serialize or a serialized object.\r\n */\r\nAtlantis.StorageManager.prototype.save = function(name, data) {\r\n\tif (typeof(data) === \"object\") {\r\n\t\tdata = JSON.stringify(data);\r\n\t}\r\n\r\n\tlocalStorage.setItem(this.getLocalStorageKey(name), data);\r\n};\r\n\r\n/**\r\n * Load data from the localStorage.\r\n * @method load\r\n * @param {String} name The data key.\r\n * @param {Object} defaultValue The default value if the data not exists.\r\n * @return {Object} The object if exists otherwise return defaultValue\r\n */\r\nAtlantis.StorageManager.prototype.load = function(name, defaultValue) {\r\n\tvar data = localStorage.getItem(this.getLocalStorageKey(name));\r\n\treturn data !== null ? data : defaultValue;\r\n};\r\n\r\n/**\r\n * Gets the localStorage key with a container name and a data name.\r\n * @method getLoadStorageKey\r\n * @param {String} name Desired name for the data who'll save.\r\n * @return {string} The localStorage final key.\r\n */\r\nAtlantis.StorageManager.prototype.getLocalStorageKey = function(name) {\r\n\treturn [this.container, \".\", name].join(\"\");\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A level manager.\r\n * @constructor\r\n * @class LevelManager\r\n */\r\nAtlantis.LevelManager = function(game) {\r\n    Atlantis.DrawableGameComponent.call(this, game);\r\n    this.graphicsDevice = game.graphicsDevice;\r\n    this.levels = [];\r\n    this.autoClear = true;\r\n    this.activeLevel = null;\r\n    this.initialized = false;\r\n    this._autoLoadLevel;\r\n};\r\n\r\nAtlantis.LevelManager.prototype = Object.create(Atlantis.DrawableGameComponent.prototype);\r\n\r\nAtlantis.LevelManager.prototype.initialize = function() {\r\n    this.initialized = true;\r\n\r\n    if (typeof(this._autoLoadLevel) !== \"undefined\") {\r\n        this.loadLevel(this._autoLoadLevel);\r\n        this._autoLoadLevel = \"\";\r\n    }\r\n};\r\n\r\n/**\r\n * Update active level.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.LevelManager.prototype.update = function(gameTime) {\r\n    if (this.activeLevel) {\r\n        this.activeLevel.update(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n * Draw active levels.\r\n * @method draw\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.LevelManager.prototype.draw = function(gameTime) {\r\n    if (this.activeLevel) {\r\n        if (this.autoClear) {\r\n            this.graphicsDevice.clear();\r\n        }\r\n\r\n        this.activeLevel.draw(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n * Add a level to the level manager.\r\n * @method loadLevel\r\n * @param {Altantis.level} levelParam Instance of the level to add.\r\n */\r\nAtlantis.LevelManager.prototype.loadLevel = function(nameOrIndex, reinitialize) {\r\n    var reinit = typeof(reinitialize) === \"boolean\" ? reinitialize : true;\r\n\r\n    if (!this.initialized) {\r\n        this._autoLoadLevel = nameOrIndex;\r\n        return;\r\n    }\r\n\r\n    if (this.activeLevel) {\r\n        this.activeLevel.onDisabled();\r\n    }\r\n\r\n    this.activeLevel = null;\r\n\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        this.activeLevel = this.getLevelByName(nameOrIndex);\r\n    } else if (this._checkIndex(nameOrIndex)) {\r\n        this.activeLevel = this.levels[nameOrIndex];\r\n    }\r\n\r\n    if (this.activeLevel) {\r\n        if (reinit) {\r\n            this.activeLevel.initialize();\r\n        }\r\n\r\n        this.activeLevel.active = true;\r\n\r\n        this.activeLevel.onEnabled();\r\n    }\r\n};\r\n\r\n// -------------------------- //\r\n// --- Collection methods --- //\r\n// -------------------------- //\r\n\r\n/**\r\n * Add a level to the level manager.\r\n * @method add\r\n * @param {Altantis.level} name Instance of the level to add.\r\n * @param {Boolean} autoload Sets to `true` to load the level.\r\n */\r\nAtlantis.LevelManager.prototype.add = function(level, autoLoad) {\r\n    this.levels.push(level);\r\n\r\n    if (autoLoad) {\r\n        this.loadLevel(this.levels.length - 1);\r\n    }\r\n};\r\n\r\n/**\r\n * Remove a level by its index, name or instance.\r\n * @method remove\r\n * @param {Number|String} nameOrIndex level's index or name.\r\n */\r\nAtlantis.LevelManager.prototype.remove = function(nameOrIndex) {\r\n    var level = null,\r\n        index = -1;\r\n\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        level = this.getLevelByName(nameOrIndex);\r\n        index = this.levels.indexOf(level);\r\n    } else if (this._checkIndex(nameOrIndex)) {\r\n        level = this.levels[nameOrIndex];\r\n        index = nameOrIndex;\r\n    }\r\n\r\n    if (level === this.activeLevel) {\r\n        this.activeLevel = null;\r\n    }\r\n\r\n    if (this._checkIndex(index)) {\r\n        this.levels.splice(index, 1);\r\n    }\r\n};\r\n\r\n/**\r\n * Gets a level by its index or its name.\r\n * @method get\r\n * @param {Number|String} nameOrIndex level's index or name.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.get = function(nameOrIndex) {\r\n    if (typeof(nameOrIndex) === \"string\") {\r\n        return this.getLevelByName(nameOrIndex);\r\n    } else if (this._checkIndex(nameOrIndex)) {\r\n        return this.levels[nameOrIndex];\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLevelByName = function(name) {\r\n    var i = 0,\r\n        size = this.levels.length,\r\n        level = null;\r\n\r\n    while (i < size && level === null) {\r\n        level = (this.levels[i].name === name) ? this.levels[i] : level;\r\n        i++;\r\n    }\r\n\r\n    return level;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLoadedLevelIndex = function() {\r\n    if (this.activeLevel) {\r\n        return this.levels.indexOf(this.activeLevel);\r\n    }\r\n    return -1;\r\n};\r\n\r\n/**\r\n * Get a level by its name\r\n * @method getLevelByName\r\n * @param {String} name The name of the level to load.\r\n * @return {Atlantis.Level} Return the level if it exists, otherwise return null.\r\n */\r\nAtlantis.LevelManager.prototype.getLoadedLevelName = function() {\r\n    if (this.activeLevel) {\r\n        return this.activeLevel.name;\r\n    }\r\n    return -1;\r\n};\r\n\r\nAtlantis.LevelManager.prototype._checkIndex = function(index) {\r\n    return index > -1 && index < this.levels.length;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A sprite animation define an animation which is a group of frames\r\n * An animation is a serie of rectangle on a spritesheet\r\n * @constructor\r\n * @class SpriteAnimation\r\n * @param length The number of frames\r\n * @param framerate The desired frame rate.\r\n */\r\nAtlantis.SpriteAnimation = function(length, framerate) {\r\n    this.rectangles = new Array(length);\r\n    this.framerate = framerate;\r\n    this.index = 0;\r\n    this.max = length;\r\n    this.elapsedTime = 0;\r\n    this.length = length;\r\n};\r\n\r\n/**\r\n * Gets the next available frame of the animation.\r\n * @method next\r\n * @return {Atlantis.Rectangle} Return the next frame of the animation.\r\n */\r\nAtlantis.SpriteAnimation.prototype.next = function() {\r\n    if (this.index >= this.rectangles.length) {\r\n        this.index = 0;\r\n    }\r\n    return this.rectangles[this.index];\r\n};\r\n\r\n/**\r\n * Update animation index relative to time.\r\n * @method update\r\n */\r\nAtlantis.SpriteAnimation.prototype.update = function(gameTime) {\r\n    this.elapsedTime += gameTime.getElapsedTime();\r\n\r\n    if (this.elapsedTime > this.framerate) {\r\n        this.index++;\r\n        this.elapsedTime = 0;\r\n    }\r\n};\r\n\r\n/**\r\n * A SpriteAnimator is a class that is used to play sprite animations.\r\n * A sprite has many animation that are stored in a dictionary[name] => spriteAnimation\r\n * @constructor\r\n * @class SpriteAnimator\r\n */\r\nAtlantis.SpriteAnimator = function() {\r\n    // Dictionary <string, SpriteAnimation>\r\n    this.animations = {};\r\n    this.spriteWidth = 0;\r\n    this.spriteHeight = 0;\r\n    this.textureWidth = 0;\r\n    this.textureHeight = 0;\r\n    this.nbSpriteX = 0;\r\n    this.nbSpriteY = 0;\r\n    this.spritesheetLength = 0;\r\n    this.currentAnimationName = \"\";\r\n};\r\n\r\n/**\r\n * Initialize the animator\r\n * @method initialize\r\n * @param {Number} animationWidth The width of a frame.\r\n * @param {Number} animationHeight The height of a frame.\r\n * @param {Number} textureWidth The width of the texture (spritesheet).\r\n * @param {Number} textureHeight The height of the texture (spritesheet).\r\n */\r\nAtlantis.SpriteAnimator.prototype.initialize = function(animationWidth, animationHeight, textureWidth, textureHeight) {\r\n    this.animations = {};\r\n    this.spriteWidth = animationWidth;\r\n    this.spriteHeight = animationHeight;\r\n    this.textureWidth = textureWidth;\r\n    this.textureHeight = textureHeight;\r\n    this.nbSpriteX = this.textureWidth / this.spriteWidth;\r\n    this.nbSpriteY = this.textureHeight / this.spriteHeight;\r\n    this.spritesheetLength = this.nbSpriteX * this.nbSpriteY;\r\n    this.currentAnimationName = \"\";\r\n};\r\n\r\n/**\r\n * Add an animation to the animator.\r\n * @method add\r\n * @param {String} name The name of the animation.\r\n * @param {Array} framesIndex An array of indices that compose the animation on the spritesheet.\r\n * @param {Number} framerate The desired framerate for this animation.\r\n */\r\nAtlantis.SpriteAnimator.prototype.add = function(name, framesIndex, frameRate) {\r\n    var animationLength = framesIndex.length;\r\n\r\n    var animation = new Atlantis.SpriteAnimation(animationLength, frameRate);\r\n\r\n    if (framesIndex instanceof Atlantis.Rectangle) {\r\n        animation.rectangles = framesIndex;\r\n    } else {\r\n        for (var i = 0; i < animationLength; i++) {\r\n            var x = framesIndex[i] % this.nbSpriteX;\r\n            var y = Math.floor(framesIndex[i] / this.nbSpriteX);\r\n\r\n            if (y > 0) {\r\n                x = x % (this.nbSpriteX * y);\r\n            } else {\r\n                x = x % this.nbSpriteX;\r\n            }\r\n\r\n            animation.rectangles[i] = new Atlantis.Rectangle(x * this.spriteWidth, y * this.spriteHeight, this.spriteWidth, this.spriteHeight);\r\n        }\r\n    }\r\n\r\n    this.animations[name] = animation;\r\n};\r\n\r\n/**\r\n * Play an animation.\r\n * @method play\r\n * @param {String} animationName The name of the animation to play.\r\n */\r\nAtlantis.SpriteAnimator.prototype.play = function(animationName) {\r\n    this.currentAnimationName = animationName;\r\n\r\n    return this.animations[animationName].next();\r\n};\r\n\r\n/**\r\n *\r\n * @method getCurrentAnimation\r\n */\r\nAtlantis.SpriteAnimator.prototype.getCurrentAnimation = function() {\r\n    if (this.currentAnimationName !== \"\") {\r\n        return this.animations[this.currentAnimationName];\r\n    }\r\n    return null;\r\n};\r\n\r\n/**\r\n *\r\n * @method update\r\n * @param gameTime\r\n * @param lastDistance\r\n */\r\nAtlantis.SpriteAnimator.prototype.update = function(gameTime, lastDistance) {\r\n    if (this.currentAnimationName !== \"\") {\r\n        this.animations[this.currentAnimationName].update(gameTime);\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method checkForIDLEAnimation\r\n */\r\nAtlantis.SpriteAnimator.prototype.checkForIDLEAnimation = function(lastDirection) {\r\n    if (this.currentAnimationName !== \"\" && lastDirection.x === 0 && lastDirection.y === 0) {\r\n        return this.animations[this.currentAnimationName].rectangles[0];\r\n    }\r\n    return null;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A camera used in a 2D scene to manage scrolling\r\n * @class Camera2D\r\n * @constructor\r\n * @param {Number} x The position on X of the camera.\r\n * @param {Number} y The position on Y of the camera.\r\n * @param {Number} width The size of the camera.\r\n * @param {Number} height The size of the camera.\r\n */\r\nAtlantis.Camera2D = function(x, y, width, height) {\r\n    this._follow = null;\r\n    this.set(x, y, width, height);\r\n};\r\n\r\nAtlantis.Camera2D.prototype.set = function(x, y, width, height) {\r\n    this.x = +x | 0;\r\n    this.y = +y | 0;\r\n    this.viewport = new Atlantis.Rectangle(0, 0, +width | 0 > 0 ? +width : Atlantis.screen.width, +height | 0 > 0 ? +height : Atlantis.screen.height);\r\n    this._center = new Atlantis.Vector2(Atlantis.screen.widthPerTwo, Atlantis.screen.heightPerTwo);\r\n};\r\n\r\nAtlantis.Camera2D.prototype.reset = function() {\r\n    this.x = 0;\r\n    this.y = 0;\r\n};\r\n\r\nAtlantis.Camera2D.onResize = function(width, height) {\r\n    this._center = new Atlantis.Vector2(width >> 1, height >> 1);\r\n};\r\n\r\n/**\r\n * Follow a sprite\r\n * @method follow\r\n * @param {Atlantis.Sprite} sprite A sprite to follow.\r\n */\r\nAtlantis.Camera2D.prototype.follow = function(sprite) {\r\n    this._follow = sprite;\r\n};\r\n\r\n/**\r\n * Gets the position of the sprite on screen relative to the camera position.\r\n * @method getSpritePosition\r\n * @return {Object} Return a structure with x and y coordinates.\r\n */\r\nAtlantis.Camera2D.prototype.getSpritePosition = function() { // FIXME rename to getPosition\r\n    if (this._follow) {\r\n        return this.getRelativePosition(this._follow);\r\n    }\r\n    return {\r\n        x: this.x,\r\n        y: this.y\r\n    };\r\n};\r\n\r\n/**\r\n * Gets the relative position of a sprite relative to the camera position.\r\n * @method getRelativePosition\r\n * @param {Atlantis.Sprite} sprite The sprite to use.\r\n * @return {Object} Return a structure with x and y coordinates.\r\n */\r\nAtlantis.Camera2D.prototype.getRelativePosition = function(sprite) {\r\n    return {\r\n        x: sprite.rectangle.x + this.x,\r\n        y: sprite.rectangle.y + this.y\r\n    };\r\n};\r\n\r\n/**\r\n * Update the camera position. If a sprite is attached to it, its position is managed by the camera.\r\n * @method update\r\n */\r\nAtlantis.Camera2D.prototype.update = function() {\r\n    if (this._follow) {\r\n        var diffX = (this._follow.rectangle.x - this._follow.lastPosition.x),\r\n            diffY = (this._follow.rectangle.y - this._follow.lastPosition.y),\r\n            targX = this._follow.rectangle.x,\r\n            targY = this._follow.rectangle.y;\r\n\r\n        if ((this._follow.rectangle.x >= this._center.x) && (this.x < this.viewport.getRight() - Atlantis.screen.width) ||\r\n            (this._follow.rectangle.x <= this._center.x) && (this.x > this.viewport.x)) {\r\n            this.x += diffX;\r\n            targX = this._center.x;\r\n        }\r\n\r\n        if ((this._follow.rectangle.y >= this._center.y) && (this.y < this.viewport.getBottom() - Atlantis.screen.height) ||\r\n            (this._follow.rectangle.y <= this._center.y) && (this.y > this.viewport.y)) {\r\n            this.y += diffY;\r\n            targY = this._center.y;\r\n        }\r\n\r\n        this._follow.move(targX, targY);\r\n    }\r\n\r\n    if (this.x < this.viewport.x) {\r\n        this.x = this.viewport.x;\r\n    } else if (this.x + Atlantis.screen.width > this.viewport.getRight()) {\r\n        this.x = this.viewport.getRight() - Atlantis.screen.width;\r\n    } else if (this.y < this.viewport.y) {\r\n        this.y = this.viewport.y;\r\n    }\r\n\r\n    if (this.y + Atlantis.screen.height > this.viewport.getBottom()) {\r\n        this.y = this.viewport.getBottom() - Atlantis.screen.height;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.SpriteCollisionType = {\r\n    None: 0,\r\n    Stop: 1\r\n};\r\n\r\nAtlantis.Sprite = function(_textureName, params) {\r\n    this.name = \"GameObject\";\r\n    this.enabled = true;\r\n    this.visible = true;\r\n    this.rectangle = new Atlantis.Rectangle();\r\n    this.collisionType = Atlantis.SpriteCollisionType.None;\r\n\r\n    this._texture = null;\r\n    this._dead = false;\r\n    this._initialized = false;\r\n    this.sourceRectangle = null;\r\n    this._textureName = (typeof(_textureName) === \"string\") ? _textureName : \"\";\r\n\r\n    this.color = null;\r\n    this.rotation = 0;\r\n    this.scale = new Atlantis.Vector2(1, 1);\r\n    this.origin = new Atlantis.Vector2();\r\n    this.layerDepth = Atlantis.Sprite.Counter++;\r\n    this.parent = null;\r\n\r\n    this.direction = new Atlantis.Vector2();\r\n    this.lastPosition = new Atlantis.Vector2();\r\n    this.lastDistance = new Atlantis.Vector2();\r\n\r\n    // Some physics\r\n    this.acceleration = new Atlantis.Vector2();\r\n    this.velocity = new Atlantis.Vector2();\r\n    this.maxVelocity = 1;\r\n\r\n    // Rectangle and viewport\r\n    this.viewport = new Atlantis.Rectangle(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\r\n    // Force the sprite to stay in screen or to enable across screen\r\n    this.insideScreen = false;\r\n    this.acrossScreen = false;\r\n\r\n    // Animation\r\n    this.spriteAnimator = new Atlantis.SpriteAnimator();\r\n    this.hasAnimations = false;\r\n    this.deleteIf = null;\r\n\r\n    var that = this;\r\n\r\n    /**\r\n     * Active or not the sprite.\r\n     * @property active\r\n     * @type {Boolean}\r\n     * @default true\r\n     */\r\n    Atlantis._createProperty(this, \"active\",\r\n        function() {\r\n            return that.visible && that.enabled;\r\n        },\r\n        function(value) {\r\n            that.enabled = value;\r\n            that.visible = value;\r\n        });\r\n\r\n    /**\r\n     * Indicate if the sprite is alive or dead.\r\n     * @property alive\r\n     * @type {Boolean}\r\n     * @default true\r\n     */\r\n    Atlantis._createProperty(this, \"alive\",\r\n        function() {\r\n            return !that._dead;\r\n        },\r\n        function(value) {\r\n            if (value && that._dead) {\r\n                that.revive();\r\n            } else if (!value && !that._dead) {\r\n                that.kill();\r\n            }\r\n        });\r\n\r\n    /**\r\n     * Position on X axis.\r\n     * @property x\r\n     * @type {Number}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"x\",\r\n        function() {\r\n            return that.rectangle.x;\r\n        },\r\n        function(value) {\r\n            that.lastPosition.x = that.rectangle.x;\r\n            that.rectangle.x = value;\r\n            that.direction.x = that.rectangle.x - that.lastPosition.x;\r\n        });\r\n\r\n    /**\r\n     * Position on Y axis.\r\n     * @property y\r\n     * @type {Boolean}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"y\",\r\n        function() {\r\n            return that.rectangle.y;\r\n        },\r\n        function(value) {\r\n            that.lastPosition.y = that.rectangle.y;\r\n            that.rectangle.y = value;\r\n            that.direction.y = that.rectangle.x - that.lastPosition.y;\r\n        });\r\n\r\n    /**\r\n     * Sprite's width.\r\n     * @property width\r\n     * @type {Number}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"width\",\r\n        function() {\r\n            return that.rectangle.width;\r\n        },\r\n        function(value) {\r\n            that.rectangle.width = value;\r\n        });\r\n\r\n    /**\r\n     * Sprite's height.\r\n     * @property height\r\n     * @type {Number}\r\n     * @default 0\r\n     */\r\n    Atlantis._createProperty(this, \"height\",\r\n        function() {\r\n            return that.rectangle.height;\r\n        },\r\n        function(value) {\r\n            that.rectangle.height = value;\r\n        });\r\n\r\n    /**\r\n     * The name of the texture used by the sprite.\r\n     * @property _textureName\r\n     * @type {String}\r\n     * @default \"\"\r\n     */\r\n    Atlantis._createProperty(this, \"textureName\",\r\n        function() {\r\n            return that._textureName;\r\n        },\r\n        function(value) {\r\n            that._textureName = value;\r\n            that._initialized = false;\r\n        });\r\n\r\n    /**\r\n     * Sprite's texture.\r\n     * @property texture\r\n     * @type {Object}\r\n     * @default null\r\n     */\r\n    Atlantis._createProperty(this, \"texture\",\r\n        function() {\r\n            return that._texture;\r\n        },\r\n        function(value) {\r\n            that._texture = value;\r\n            if (that._texture) {\r\n                that.rectangle.setSize(that._texture.width, that._texture.height);\r\n                that._initialized = true;\r\n            } else {\r\n                that.rectangle.setSize(0, 0);\r\n                that._initialized = false;\r\n            }\r\n        });\r\n\r\n    params = params || {};\r\n    for (var i in params) {\r\n        this[i] = params[i];\r\n    }\r\n};\r\n\r\nAtlantis.Sprite.Counter = 0;\r\n\r\n/**\r\n *\r\n * @method initialize\r\n * @param {Function} callback A callback called when the sprite is fully loaded.\r\n */\r\nAtlantis.Sprite.prototype.initialize = function(callback) {\r\n    this.viewport = new Atlantis.Rectangle(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\r\n    if (this._textureName !== \"\" && this._initialized === false) {\r\n        callback = (typeof(callback) === \"function\") ? callback : function() {};\r\n        var that = this;\r\n\r\n        this._texture = Atlantis.app.content.load(this._textureName, function(image) {\r\n            that.rectangle.width = image.width;\r\n            that.rectangle.height = image.height;\r\n\r\n            that._initialized = true;\r\n\r\n            callback(that);\r\n        });\r\n    } else if (callback) {\r\n        callback(this);\r\n    }\r\n};\r\n\r\nAtlantis.Sprite.prototype.copy = function(sprite) {\r\n    this._dead = sprite._dead;\r\n    this._textureName = sprite._textureName;\r\n    this.visible = sprite.visible;\r\n    this.enabled = sprite.enabled;\r\n    this._initialized = sprite._initialized;\r\n    this._texture = sprite._texture;\r\n    this.rectangle = sprite.rectangle;\r\n    this.sourceRectangle = sprite.sourceRectangle;\r\n    this.hasAnimations = sprite.hasAnimations;\r\n    this.spriteAnimator = sprite.spriteAnimator;\r\n};\r\n\r\n/**\r\n *\r\n * @method collides\r\n * @return {Boolean} Return true if collides otherwise return false.\r\n */\r\nAtlantis.Sprite.prototype.collides = function(sprite) {\r\n    var collides = this.rectangle.intersects(sprite.rectangle);\r\n\r\n    if (sprite.collisionType === Atlantis.SpriteCollisionType.Stop) {\r\n        sprite.move(sprite.lastPosition.x, sprite.lastPosition.y);\r\n    }\r\n\r\n    return collides;\r\n};\r\n\r\n/**\r\n * Kill the sprite and put it in a cache so that it can be recycled if needed.\r\n * @method kill\r\n */\r\nAtlantis.Sprite.prototype.kill = function() {\r\n    this.enabled = false;\r\n    this.visible = false;\r\n    this._dead = true;\r\n};\r\n\r\n/** \r\n * Revive the Sprite and remove it from the recycle cache.\r\n * @method revive\r\n */\r\nAtlantis.Sprite.prototype.revive = function() {\r\n    this.enabled = true;\r\n    this.visible = true;\r\n    this._dead = false;\r\n};\r\n\r\n/**\r\n *\r\n * @method prepareAnimation\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.prepareAnimation = function(width, height) {\r\n    if (this._initialized) {\r\n        this.hasAnimations = true;\r\n        var animationWidth = width;\r\n        var animationHeight = height || animationWidth;\r\n        this.spriteAnimator.initialize(animationWidth, animationHeight, this._texture.width || this.rectangle.width, this._texture.height || this.rectangle.height);\r\n        this.rectangle.width = animationWidth;\r\n        this.rectangle.height = animationHeight;\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method addAnimation\r\n * @param\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.addAnimation = function(name, indices, frameRate, twoIndices) {\r\n    if (this._initialized) {\r\n        if (twoIndices) {\r\n            var ids = [];\r\n            for (var i = indices[0]; i <= indices[1]; i++) {\r\n                ids.push(i);\r\n            }\r\n\r\n            indices = ids;\r\n        }\r\n\r\n        this.spriteAnimator.add(name, indices, frameRate);\r\n        this.sourceRectangle = this.spriteAnimator.animations[name].rectangles[0];\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method play\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.play = function(animationName) {\r\n    if (this._initialized) {\r\n        this.sourceRectangle = this.spriteAnimator.play(animationName);\r\n    }\r\n};\r\n\r\n/**\r\n * Function called before update process.\r\n * @method preUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.preUpdate = function(gameTime) {};\r\n\r\n/**\r\n * Update process.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.update = function(gameTime) {\r\n    // Determine the last distance and direction\r\n    this.lastDistance.x = this.rectangle.x - this.lastPosition.x;\r\n    this.lastDistance.y = this.rectangle.y - this.lastPosition.y;\r\n\r\n    // Determine the last position\r\n    this.lastPosition.x = this.rectangle.x;\r\n    this.lastPosition.y = this.rectangle.y;\r\n\r\n    // Update physics\r\n    this.rectangle.x += this.velocity.x;\r\n    this.rectangle.y += this.velocity.y;\r\n    this.velocity.multiply(this.maxVelocity);\r\n    this.velocity.add(this.acceleration);\r\n\r\n    // Update animation\r\n    if (this.hasAnimations && this._initialized) {\r\n        this.spriteAnimator.update(gameTime);\r\n        if (this.lastDistance.x === 0 && this.lastDistance.y === 0 && this.spriteAnimator.currentAnimationName !== \"\") {\r\n            this.sourceRectangle = this.spriteAnimator.getCurrentAnimation().rectangles[0];\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Method called after the update process.\r\n * @method postUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.Sprite.prototype.postUpdate = function() {\r\n    this.direction.x = this.rectangle.x - this.lastPosition.x;\r\n    this.direction.y = this.rectangle.y - this.lastPosition.y;\r\n\r\n    // Force the sprite to stay inside screen\r\n    if (this.insideScreen) {\r\n        if (this.rectangle.x < this.viewport.x) {\r\n            this.rectangle.x = this.viewport.x;\r\n            this.velocity.multiply(0);\r\n        } else if (this.rectangle.getRight() > this.viewport.width) {\r\n            this.rectangle.x = this.viewport.width - this.rectangle.width;\r\n            this.velocity.multiply(0);\r\n        }\r\n\r\n        if (this.rectangle.y < this.viewport.y) {\r\n            this.rectangle.y = this.viewport.y;\r\n            this.velocity.multiply(0);\r\n        } else if (this.rectangle.getBottom() > this.viewport.height) {\r\n            this.rectangle.y = this.viewport.height - this.rectangle.height;\r\n            this.velocity.multiply(0);\r\n        }\r\n    }\r\n\r\n    // The sprite move accross the screen\r\n    else if (this.acrossScreen) {\r\n        if (this.rectangle.getRight() < this.viewport.x) {\r\n            this.rectangle.x = this.viewport.width;\r\n        } else if (this.rectangle.x > this.viewport.width) {\r\n            this.rectangle.x = this.viewport.x;\r\n        }\r\n\r\n        if (this.rectangle.getBottom() < this.viewport.y) {\r\n            this.rectangle.y = this.viewport.height;\r\n        } else if (this.rectangle.y > this.viewport.height) {\r\n            this.rectangle.y = this.viewport.y;\r\n        }\r\n    }\r\n\r\n    if (this.deleteIf) {\r\n        if (this.deleteIf(this)) {\r\n            this.kill();\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Draw the sprite on screen.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch} spriteBatch\r\n */\r\nAtlantis.Sprite.prototype.draw = function(spriteBatch) {\r\n    if (this._initialized) {\r\n        spriteBatch.draw(this._texture, this.rectangle, this.sourceRectangle, this.color, this.rotation, this.origin, this.scale, this.effect, this.layerDepth);\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @method setSize\r\n * @param\r\n * @param\r\n */\r\nAtlantis.Sprite.prototype.setSize = function(width, height) {\r\n    this.rectangle.width = width || this.rectangle.width;\r\n    this.rectangle.height = height || this.rectangle.height;\r\n};\r\n\r\nAtlantis.Sprite.prototype.move = function(x, y) {\r\n    this.rectangle.x = x;\r\n    this.rectangle.y = y;\r\n    this.lastPosition.x = x;\r\n    this.lastPosition.y = y;\r\n};\r\n\r\nAtlantis.Sprite.prototype.translate = function(x, y) {\r\n    this.rectangle.x += x;\r\n    this.rectangle.y += y;\r\n};\r\n\r\nAtlantis.Sprite.prototype.getBoundingRect = function() {\r\n    return this.rectangle;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.SpriteText = function(spriteFont, text, params) {\r\n    Atlantis.Sprite.call(this, undefined, params);\r\n    this.spriteFont = spriteFont;\r\n    this.text = text;\r\n};\r\n\r\nAtlantis.SpriteText.prototype = Object.create(Atlantis.Sprite.prototype);\r\n\r\nAtlantis.SpriteText.prototype.initialize = function() {\r\n    var size = this.measureText();\r\n    this.rectangle.width = size.width;\r\n    this.rectangle.height = this.spriteFont.size;\r\n};\r\n\r\nAtlantis.SpriteText.prototype.preUpdate = function() {};\r\n\r\nAtlantis.SpriteText.prototype.update = function() {};\r\n\r\nAtlantis.SpriteText.prototype.postUpdate = function() {};\r\n\r\nAtlantis.SpriteText.prototype.draw = function(spriteBatch) {\r\n    spriteBatch.drawString(this.spriteFont, this.text, this.rectangle, this.color, this.rotation, this.origin, this.scale, this.effect, this.layerDepth);\r\n};\r\n\r\nAtlantis.SpriteText.prototype.measureText = function(text) {\r\n    var context = Atlantis.app.game.graphicsDevice.getBackBuffer().getContext();\r\n    var oldFont = context.font;\r\n    context.font = this.spriteFont.getFont();\r\n    var size = context.measureText(text || this.text);\r\n    context.font = oldFont;\r\n    return size;\r\n};\r\n\r\nAtlantis.SpriteText.prototype.measureTextHeight = function(text, maxWidth, lineHeight) {\r\n    text = text || this.text;\r\n    maxWidth = maxWidth || this.width;\r\n    var words = text.split(\" \");\r\n    var line = \"\";\r\n    var testLine = \"\";\r\n    var y = lineHeight || this.spriteFont.size;\r\n    var metrics = null;\r\n    var testWidth = 0;\r\n    var context = Atlantis.app.game.graphicsDevice.getBackBuffer().getContext();\r\n\r\n    for (var n = 0; n < words.length; n++) {\r\n        testLine = line + words[n] + \" \";\r\n        metrics = context.measureText(testLine);\r\n        testWidth = metrics.width;\r\n\r\n        if (testWidth > maxWidth && n > 0) {\r\n            line = words[n] + \" \";\r\n            y += lineHeight;\r\n        } else {\r\n            line = testLine;\r\n        }\r\n    }\r\n\r\n    return y;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/** \r\n * A collection that initialize, load, update and draw _sprites.\r\n * @class SpriteGroup\r\n * @extends Sprite\r\n * @constructor\r\n */\r\nAtlantis.SpriteGroup = function() {\r\n\tAtlantis.Sprite.call(this);\r\n\tthis._initialized = false;\r\n\tthis._sprites = [];\r\n\tthis._length = 0;\r\n\tthis._needBoundingCompute = true;\r\n\r\n\tvar that = this;\r\n\tAtlantis._createProperty(this, \"x\",\r\n\t\tfunction() {\r\n\t\t\treturn that.rectangle.x;\r\n\t\t},\r\n\t\tfunction(value) {\r\n\t\t\tvar diff = value - that.rectangle.x;\r\n\t\t\tthat.rectangle.x = value;\r\n\t\t\tfor (var i = 0, l = that._sprites.length; i < l; i++) {\r\n\t\t\t\tthat._sprites[i].translate(diff, 0);\r\n\t\t\t}\r\n\t\t\tthat._needBoundingCompute = true;\r\n\t\t});\r\n\r\n\tAtlantis._createProperty(this, \"y\",\r\n\t\tfunction() {\r\n\t\t\treturn that.rectangle.y;\r\n\t\t},\r\n\t\tfunction(value) {\r\n\t\t\tvar diff = value - that.rectangle.y;\r\n\t\t\tthat.rectangle.x = value;\r\n\t\t\tfor (var i = 0, l = that._sprites.length; i < l; i++) {\r\n\t\t\t\tthat._sprites[i].translate(0, diff);\r\n\t\t\t}\r\n\t\t\tthat._needBoundingCompute = true;\r\n\t\t});\r\n};\r\nAtlantis.SpriteGroup.prototype = Object.create(Atlantis.Sprite.prototype);\r\n\r\n/**\r\n * Load assets of all members.\r\n * @method initialize\r\n * @param {Function} callback\r\n */\r\nAtlantis.SpriteGroup.prototype.initialize = function(callback) {\r\n\tcallback = (typeof(callback) === \"function\") ? callback : function() {};\r\n\r\n\tif (!this._initialized) {\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tthis._sprites[i].initialize();\r\n\t\t}\r\n\t\tthis._initialized = true;\r\n\t\tcallback(this);\r\n\t} else {\r\n\t\tcallback(this);\r\n\t}\r\n};\r\n\r\n/**\r\n * Update logic of all members.\r\n * @method update\r\n * @param {Atlantis.GameTime} gameTime An instance of GameTime.\r\n */\r\nAtlantis.SpriteGroup.prototype.update = function(gameTime) {\r\n\tAtlantis.Sprite.prototype.update.call(this, gameTime);\r\n\r\n\tif (!this._dead && this.enabled) {\r\n\t\t// Update\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tif (this._sprites[i] !== null && this._sprites[i].alive && this._sprites[i].enabled) {\r\n\t\t\t\tthis._sprites[i].preUpdate(gameTime);\r\n\t\t\t\tthis._sprites[i].update(gameTime);\r\n\t\t\t\tthis._sprites[i].postUpdate(gameTime);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Function called before update process.\r\n * @method preUpdate\r\n * @param {Atlantis.GameTime} gameTime\r\n */\r\nAtlantis.SpriteGroup.prototype.postUpdate = function(gameTime) {};\r\n\r\n/**\r\n * Draw all members on screen.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch}\r\n */\r\nAtlantis.SpriteGroup.prototype.draw = function(spriteBatch) {\r\n\tif (this.visible) {\r\n\t\tfor (var i = 0; i < this._length; i++) {\r\n\t\t\tif (this._sprites[i] !== null && this._sprites[i].alive && this._sprites[i].visible) {\r\n\t\t\t\tthis._sprites[i].draw(spriteBatch);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Clear the collection.\r\n * @method clear\r\n */\r\nAtlantis.SpriteGroup.prototype.clear = function() {\r\n\tthis._sprites.length = 0;\r\n\tthis._length = 0;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.collides = function(sprite) {\r\n\tif (this.collidesWithGroup(sprite)) {\r\n\t\tvar i = 0,\r\n\t\t\tcollides = false;\r\n\r\n\t\twhile (i < this._length && collides === false) {\r\n\t\t\tcollides = (sprite.collides(this._sprites[i])) ? true : collides;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tif (collides && sprite.collisionType === Atlantis.SpriteCollisionType.Stop) {\r\n\t\t\tsprite.move(sprite.lastPosition.x, sprite.lastPosition.y);\r\n\t\t}\r\n\r\n\t\treturn collides;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\n/**\r\n *\r\n * @method collidesWithGroup\r\n * @param {Atlantis.Sprite} sprite\r\n * @param {Boolean} computeBoundingRect\r\n * @return {Boolean}\r\n */\r\nAtlantis.SpriteGroup.prototype.collidesWithGroup = function(sprite, computeBoundingRect) {\r\n\tif (computeBoundingRect || this._needBoundingCompute) {\r\n\t\tthis.computeBoundingRect();\r\n\t}\r\n\treturn this.rectangle.intersects(sprite.rectangle);\r\n};\r\n\r\n/**\r\n * Compute the bounding size of the group.\r\n * @method computeBoundingSize\r\n */\r\nAtlantis.SpriteGroup.prototype.computeBoundingRect = function() {\r\n\tthis.rectangle.setSize(0, 0);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tthis.rectangle.width = Math.max(this.rectangle.getRight(), this._sprites[i].rectangle.getRight()) - this.rectangle.x;\r\n\t\tthis.rectangle.height = Math.max(this.rectangle.getBottom(), this._sprites[i].rectangle.getBottom()) - this.rectangle.y;\r\n\t}\r\n\r\n\tthis._needBoundingCompute = false;\r\n};\r\n\r\n/**\r\n * Count the number of living sprite in the group.\r\n * @method countLiving\r\n * @return {Number} Return the number of living sprites.\r\n */\r\nAtlantis.SpriteGroup.prototype.countLiving = function() {\r\n\tvar livings = 0;\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tlivings += (this._sprites[i] !== null && this._sprites[i].alive) ? 1 : 0;\r\n\t}\r\n\r\n\treturn livings;\r\n};\r\n\r\n/**\r\n * Count the number of dead sprite in the group.\r\n * @method countDead\r\n * @return {Number} Return the number of dead sprites.\r\n */\r\nAtlantis.SpriteGroup.prototype.countDead = function() {\r\n\tvar deads = 0;\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tdeads += (this._sprites[i] !== null && !this._sprites[i].alive) ? 1 : 0;\r\n\t}\r\n\r\n\treturn deads;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.size = function() {\r\n\treturn this._length;\r\n};\r\n\r\n/** \r\n * @method forEach\r\n * @param {Function} callback\r\n */\r\nAtlantis.SpriteGroup.prototype.forEach = function(callback) {\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null && this._sprites[i].alive) {\r\n\t\t\tcallback(this._sprites[i], i);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Gets an sprite from the group.\r\n * @method get\r\n * @param {Number} index The index of the sprite on the group.\r\n */\r\nAtlantis.SpriteGroup.prototype.get = function(index) {\r\n\tvar sprite = null;\r\n\r\n\tif (index > -1 && index < this._sprites.length) {\r\n\t\tsprite = this._sprites[index];\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first dead sprite if available.\r\n * @method getFirstDead\r\n * @return {Atlantis.Sprite} Return the first killed sprite otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstDead = function() {\r\n\tvar i = 0,\r\n\t\tsprite = null;\r\n\r\n\twhile (i < this._length && sprite === null) {\r\n\t\tsprite = (!this._sprites[i].alive) ? this._sprites[i] : sprite;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first alive sprite if available.\r\n * @method getFirstAlive\r\n * @return {Atlantis.Sprite} Return the first alive sprite, otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstAlive = function() {\r\n\tvar i = 0,\r\n\t\tsprite = null;\r\n\r\n\twhile (i < this._length && sprite === null) {\r\n\t\tsprite = (this._sprites[i].alive) ? this._sprites[i] : sprite;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn sprite;\r\n};\r\n\r\n/**\r\n * Gets the first null index.\r\n * @method getFirstNull\r\n * @return {Number} Return the index of the first null element in the group otherwise return -1.\r\n */\r\nAtlantis.SpriteGroup.prototype.getFirstNull = function() {\r\n\tvar index = -1,\r\n\t\ti = 0;\r\n\r\n\twhile (i < this._length && index === -1) {\r\n\t\tindex = (this._sprites[i] === null) ? i : index;\r\n\t\ti++;\r\n\t}\r\n\r\n\treturn index;\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.kill = function() {\r\n\tAtlantis.Sprite.prototype.kill.call(this);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null) {\r\n\t\t\tthis._sprites[i].kill();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nAtlantis.SpriteGroup.prototype.revive = function() {\r\n\tAtlantis.Sprite.prototype.revive.call(this);\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tif (this._sprites[i] !== null) {\r\n\t\t\tthis._sprites[i].revive();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Add an sprite to the group.\r\n * @method add\r\n * @param {Atlantis.Sprite} sprite The sprite to add.\r\n */\r\nAtlantis.SpriteGroup.prototype.add = function(sprite) {\r\n\tif (sprite instanceof Atlantis.Sprite && this._sprites.indexOf(sprite) === -1) {\r\n\t\tvar nullIndex = this.getFirstNull();\r\n\r\n\t\tif (nullIndex === -1) {\r\n\t\t\tthis._sprites.push(sprite);\r\n\t\t\tthis._length++;\r\n\t\t} else {\r\n\t\t\tthis._sprites[nullIndex] = sprite;\r\n\t\t}\r\n\r\n\t\tsprite.parent = this;\r\n\r\n\t\tif (this._initialized) {\r\n\t\t\tsprite.initialize();\r\n\t\t}\r\n\r\n\t\tthis._needBoundingCompute = true;\r\n\t}\r\n};\r\n\r\n/**\r\n * Remove a sprite from the group at the position.\r\n * @method removeAt\r\n * @param {Number} index The index of the sprite to remove.\r\n * @param {Boolean} splice Whether the object should be cut from the array entirely or not.\r\n */\r\nAtlantis.SpriteGroup.prototype.removeAt = function(index, splice) {\r\n\tvar result = null;\r\n\r\n\tif (this._sprites[index]) {\r\n\t\tresult = this._sprites[index];\r\n\t\tresult.parent = null;\r\n\r\n\t\tif (splice) {\r\n\t\t\tthis._sprites.splice(index, 1);\r\n\t\t} else {\r\n\t\t\tthis._sprites[index] = null;\r\n\t\t}\r\n\r\n\t\tthis._length--;\r\n\t\tthis._needBoundingCompute = true;\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * remove a sprite from the group.\r\n * @method remove\r\n * @param {Atlantis.Sprite} sprite The sprite to remove.\r\n * @param {Boolean} splice Whether the object should be cut from the array entirely or not.\r\n */\r\nAtlantis.SpriteGroup.prototype.remove = function(sprite, splice) {\r\n\tvar index = this._sprites.indexOf(sprite);\r\n\treturn this.removeAt(index, splice);\r\n};\r\n\r\n/** \r\n * Replace a sprite by another.\r\n * @methode replace\r\n * @param {Atlantis.Sprite} oldSprite The current sprite of this group that must be replaced.\r\n * @param {Atlantis.Sprite} newSprite The new sprite to replace the old sprite.\r\n * @return {Atlantis.Sprite} Return the new sprite if the replace operation success, otherwise return null.\r\n */\r\nAtlantis.SpriteGroup.prototype.replace = function(oldSprite, newSprite) {\r\n\tvar index = this._sprites.indexOf(oldSprite);\r\n\r\n\tif (index > -1) {\r\n\t\toldSprite.parent = null;\r\n\t\tnewSprite.parent = this;\r\n\t\tthis._sprites[index] = newSprite;\r\n\t\tthis._needBoundingCompute = true;\r\n\r\n\t\treturn newSprite;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nAtlantis.SpriteGroup.toArray = function() {\r\n\tvar sprites = [];\r\n\r\n\tfor (var i = 0; i < this._length; i++) {\r\n\t\tsprites.push(this._sprites[i]);\r\n\t}\r\n\r\n\treturn sprites;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * Define the type of a layer\r\n * - Tiles\r\n * - Background\r\n * - Objects\r\n * @class TilemapLayerType\r\n * @static\r\n */\r\nAtlantis.TilemapLayerType = {\r\n    Tiles: \"tilelayer\",\r\n    Background: \"imagelayer\",\r\n    Objects: \"objectlayer\"\r\n};\r\n\r\n/**\r\n * Define the type of projection of the map\r\n * - Orthogonal (2D)\r\n * - Isometric (2D Iso)\r\n * @class TilemapProjection\r\n * @static\r\n */\r\nAtlantis.TilemapProjection = {\r\n    Orthogonal: \"orthogonal\",\r\n    Isometric: \"isometric\"\r\n};\r\n\r\n/**\r\n * Represent a tileset which is an image that contains many other images named tiles.\r\n * @class Tileset\r\n * @constructor\r\n * @param {Atlantis.Tileset|Object} tileset (optional) An object that contains all necessary data to construct a tileset.\r\n */\r\nAtlantis.Tileset = function(tileset) {\r\n    this.firstGID = +tileset.firstgid || 1;\r\n    this.id = Atlantis.Tileset.Counter++;\r\n    this.name = tileset.name || [\"Tileset_\", this.id].join(\"\");\r\n    this.texture = tileset.texture;\r\n    this.width = +tileset.imagewidth | 0;\r\n    this.height = +tileset.imageheight | 0;\r\n    this.margin = +tileset.margin | 0;\r\n    this.padding = +tileset.spacing | 0;\r\n    this.tileWidth = +tileset.tilewidth | 0;\r\n    this.tileHeight = +tileset.tileheight | 0;\r\n    this.properties = tileset.properties || {};\r\n};\r\n\r\nAtlantis.Tileset.Counter = 0;\r\n\r\n/**\r\n * Represent a tilemap layer which contains a tileset or background.\r\n * @class TilemapLayer\r\n * @constructor\r\n * @param {Atlantis.TilemapLayer|Object} layer (optional) An object that contains all necessary data to construct a layer.\r\n */\r\nAtlantis.TilemapLayer = function(layer) {\r\n    layer = layer || {};\r\n    this.id = Atlantis.TilemapLayer.Counter++;\r\n    this.data = layer.data || [];\r\n    this.type = layer.type || Atlantis.TilemapLayer.Tiles;\r\n    this.visible = layer.visible;\r\n    this.opacity = +layer.opacity;\r\n    this.name = layer.name || [\"Layer_\", this.id].join(\"\");\r\n    this.width = +layer.width | 0;\r\n    this.height = +layer.height | 0;\r\n    this.offset = {\r\n        x: +layer.x | 0,\r\n        y: +layer.y | 0\r\n    };\r\n    this.properties = layer.properties || {};\r\n    this.backgroundId = +layer.backgroundId || +this.properties.backgroundId || 0;\r\n    this.tilesetId = +layer.tilesetId || +this.properties.tilesetId || 0;\r\n};\r\n\r\nAtlantis.TilemapLayer.Counter = 0;\r\n\r\n/**\r\n * This class is responsible to store all data for drawing a tilemap.\r\n * A tilemap is composed of layers, tilesets and backgrounds.\r\n * @class Tilemap\r\n * @constructor\r\n * @param {Atlantis.Tilemap|Object} tilemap (optional) An object that contains tilemap data.\r\n */\r\nAtlantis.Tilemap = function(tilemap) {\r\n    tilemap = tilemap || {};\r\n    this.id = Atlantis.Tilemap.Counter++;\r\n    this.name = tilemap.name || [\"Tilemap_\", this.id].join(\"\");\r\n    this.version = +tilemap.version | 0;\r\n    this.projection = tilemap.orientation || tilemap.projection || Atlantis.TilemapProjection.Orthogonal;\r\n\r\n    this.layers = tilemap.layers || [];\r\n    this.tilesets = tilemap.tilesets || [];\r\n    this.backgrounds = tilemap.backgrounds || [];\r\n\r\n    this.width = +tilemap.width | 0;\r\n    this.height = +tilemap.height | 0;\r\n    this.tileWidth = +tilemap.tilewidth | 0;\r\n    this.tileHeight = +tilemap.tileheight | 0;\r\n    this.mapWidth = this.width * this.tileWidth;\r\n    this.mapHeight = this.height * this.tileHeight;\r\n\r\n    this.properties = tilemap.properties || {};\r\n    this.loaded = (typeof(tilemap.loaded) !== \"undefined\") ? tilemap.loaded : false;\r\n    this.visible = (typeof(tilemap.visible) !== \"undefined\") ? tilemap.visible : true;\r\n\r\n    this._cacheTilesCanvas = [];\r\n};\r\n\r\nAtlantis.Tilemap.Counter = 0;\r\n\r\nAtlantis.Tilemap.prototype.update = function(camera) {\r\n    // TODO : Add collision detection \r\n};\r\n\r\n/**\r\n * Draw the tilemap if it's visible and loaded.\r\n * @method draw\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the tileset.\r\n * @param {Atlantis.Camera2D} camera The camera to use to defined what must be drawn.\r\n */\r\nAtlantis.Tilemap.prototype.draw = function(spriteBatch, camera) {\r\n    if (this.visible && this.loaded) {\r\n        for (var i = 0, l = this.layers.length; i < l; i++) {\r\n            if (this.layers[i].visible) {\r\n                if (this.layers[i].type === Atlantis.TilemapLayerType.Background) {\r\n                    this.drawBackground(spriteBatch, this.layers[i], this.backgrounds[this.layers[i].backgroundId]);\r\n                } else if (this.layers[i].type === Atlantis.TilemapLayerType.Tiles) {\r\n                    this.drawLayer(spriteBatch, camera, this.layers[i], this.tilesets[this.layers[i].tilesetId]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Draw the background with this defined offset\r\n * @method drawBackground\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the background.\r\n * @param {Atlantis.TilemapLayer} layer The layer to draw.\r\n * @param {Image|Canvas} background An image or canvas to draw as background.\r\n */\r\nAtlantis.Tilemap.prototype.drawBackground = function(spriteBatch, layer, background) {\r\n    spriteBatch.draw(background, {\r\n        x: layer.offset.x,\r\n        y: layer.offset.y\r\n    });\r\n};\r\n\r\n/**\r\n * Draw tiles with the defined offset, spacing and margin\r\n * @method drawLayer\r\n * @param {Atlantis.SpriteBatch} spriteBatch An instance of SpriteBatch for drawing the tileset.\r\n * @param {Atlantis.Camera2D} camera The camera to use to defined what must be drawn.\r\n * @param {Atlantis.TilemapLayer} layer The layer to draw.\r\n * @param {Atlantis.Tileset} The tileset to use for drawing the layer.\r\n */\r\nAtlantis.Tilemap.prototype.drawLayer = function(spriteBatch, camera, layer, tileset) {\r\n    var nbTileX = Math.floor((tileset.width - tileset.margin * 4) / tileset.tileWidth);\r\n\r\n    // posX/Y   : Relative position to the camera\r\n    // start/End/X/Y : Start/End position for the render loop  \r\n    var posX = camera.x / this.tileWidth,\r\n        posY = camera.y / this.tileHeight,\r\n        startX = Math.floor(posX),\r\n        startY = Math.floor(posY),\r\n        stopX = Math.min(Math.round((camera.x + Atlantis.screen.width) / tileset.tileWidth) + 1, layer.width),\r\n        stopY = Math.min(Math.round((camera.y + Atlantis.screen.height) / tileset.tileHeight) + 1, layer.height);\r\n\r\n    // Source rectangle values for drawing a tile.\r\n    var srcX = 0,\r\n        srcY = 0,\r\n        destX = 0,\r\n        destY = 0,\r\n        isoX = 0,\r\n        isoY = 0,\r\n        tileId = 0;\r\n\r\n    for (var x = startX; x < stopX; x++) {\r\n        for (var y = startY; y < stopY; y++) {\r\n            tileId = layer.data[x + y * layer.width] - tileset.firstGID;\r\n\r\n            // To prevent negative source rectangle\r\n            if (tileId >= 0) {\r\n                srcX = tileId % nbTileX;\r\n                srcY = Math.floor(tileId / nbTileX);\r\n                srcX = (srcY > 0) ? (srcX % (nbTileX * srcY)) : (srcX % nbTileX);\r\n\r\n                destX = ((x + layer.offset.x) - posX) * this.tileWidth;\r\n                destY = ((y + layer.offset.y) - posY) * this.tileHeight;\r\n\r\n                if (this.projection === Atlantis.TilemapProjection.Isometric) {\r\n                    isoX = (destX / 2 - destY);\r\n                    isoY = (destX / 2 + destY) / 2;\r\n                    destX = isoX + Atlantis.screen.width / 2;\r\n                    destY = isoY;\r\n                }\r\n\r\n                spriteBatch.draw(tileset.texture, {\r\n                    x: destX,\r\n                    y: destY,\r\n                    width: this.tileWidth,\r\n                    height: this.tileHeight\r\n                }, {\r\n                    x: tileset.margin + srcX * (tileset.tileWidth + tileset.padding),\r\n                    y: tileset.margin + srcY * (tileset.tileHeight + tileset.padding),\r\n                    width: tileset.tileWidth - tileset.padding,\r\n                    height: tileset.tileHeight - tileset.padding\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Get a transformed position from isometric world coordinates to screen coordinates.\r\n * @method isoToScreen\r\n * @static\r\n * @param {Number} x The x coordinate on isometric world.\r\n * @param {Number} y The y coordinate on isometric world.\r\n * @return {Object} Return an object with transformed coordinates.\r\n */\r\nAtlantis.Tilemap.isoToScreen = function(x, y) {\r\n    return {\r\n        x: (2 * y + x) / 2,\r\n        y: (2 * y - x) / 2\r\n    };\r\n};\r\n\r\n/**\r\n * Get a transformed position from screen coordinates to iso coordinates.\r\n * @method screenToIso\r\n * @static\r\n * @param {Number} x The x coordinate on screen.\r\n * @param {Number} y The y coordinate on screen.\r\n * @return {Object} Return an object with transformed coordinates.\r\n */\r\nAtlantis.Tilemap.screenToIso = function(x, y) {\r\n    return {\r\n        x: (x - y),\r\n        y: (x + y) / 2\r\n    };\r\n};\r\n\r\n/**\r\n * Gets the tile index at the specified position.\r\n * @method getTileIdAt\r\n * @param {Number} layerIndex The index of the layer\r\n * @param {Number} x The position of the tile on X axis.\r\n * @param {Number} y The postion of the tile on Y axis.\r\n * @return {Number} Return the id of the tile at this position if exists, otherwise return 0.\r\n */\r\nAtlantis.Tilemap.prototype.getTileIdAt = function(layerIndex, x, y) {\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex];\r\n        var tx = Math.floor(x / this.tileWidth);\r\n        var ty = Math.floor(y / this.tileHeight);\r\n        return layer.data[tx + ty * layer.width];\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nAtlantis.Tilemap.prototype.getTileRectAt = function(layerIndex, x, y) {\r\n    var rect = {\r\n        x: 0,\r\n        y: 0,\r\n        width: this.tileWidth,\r\n        height: this.tileHeight\r\n    };\r\n\r\n    if (this.layers[layerIndex]) {\r\n        rect.x = Math.floor(x / this.tileWidth);\r\n        rect.y = Math.floor(y / this.tileHeight);\r\n    }\r\n\r\n    return rect;\r\n};\r\n\r\n/**\r\n * Extract a tile from tileset and return a canvas element with the tile drawn in it.\r\n * It's usefull to do some tests, such as pixel perfect. \r\n * Note 1: that it's work with a scale different to 1.\r\n * Note 2: The extraction is done once, the result is stored in a cache, so you can safely call this method.\r\n * @method getTileAt\r\n * @param {Atlantis.Tileset} tileset The tileset to use to extract the tile.\r\n * @param {Number} layerIndex The index of the layer\r\n * @param {Number} x The position of the tile on X axis.\r\n * @param {Number} y The postion of the tile on Y axis.\r\n * @return {HTMLCanvas} Return a canvas element of the specified tile if exists, otherwise return null.\r\n */\r\nAtlantis.Tilemap.prototype.getTileAt = function(tileset, layerIndex, x, y) {\r\n    if (this.layers[layerIndex]) {\r\n        var layer = this.layers[layerIndex],\r\n            tileId = this.getTileIdAt(layerIndex, x, y),\r\n            cacheId = [layer.id, \"_\", tileset.id, \"_\", tileId].join(\"\");\r\n\r\n        if (!this._cacheTilesCanvas[cacheId]) {\r\n            var canvas = document.createElement(\"canvas\"),\r\n                context = canvas.getContext(\"2d\");\r\n\r\n            canvas.width = tileset.tileWidth;\r\n            canvas.height = tileset.tileHeight;\r\n\r\n            if (tileId >= 0) {\r\n                var nbTileX = tileset.imagewidth / tileset.tilewidth,\r\n                    srcX = tileId % nbTileX,\r\n                    srcY = Math.floor(tileId / nbTileX);\r\n\r\n                srcX = (srcY > 0) ? (srcX % (nbTileX * srcY)) : (srcX % nbTileX);\r\n\r\n                context.drawImage(tileset.texture, {\r\n                    x: srcX * tileset.tileWidth,\r\n                    y: srcY * tileset.tileHeight,\r\n                    width: tileset.tileWidth,\r\n                    height: tileset.tileHeight\r\n                }, {\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: this.tileWidth,\r\n                    height: this.tileHeight\r\n                });\r\n\r\n                this._cacheTilesCanvas[cacheId] = canvas;\r\n                return canvas;\r\n            }\r\n        } else {\r\n            return this._cacheTilesCanvas[cacheId];\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * A loader that load a map created with Tiled and exported to JSON.\r\n * @class TmxLoader\r\n * @static\r\n */\r\nAtlantis.TmxLoader = {\r\n    /**\r\n     * Load a tilemap at the specified path.\r\n     * @method load\r\n     * @param {String} mapPath\r\n     * @param {Function} callback\r\n     * @return {Atlantis.Tilemap} Return a tilemap.\r\n     */\r\n    load: function(mapPath, callback) {\r\n        var tilemap = new Atlantis.Tilemap();\r\n\r\n        Atlantis.app.content.load(mapPath, function(map) {\r\n            var i = 0,\r\n                l = 0;\r\n\r\n            for (i = 0, l = map.tilesets.length; i < l; i++) {\r\n                tilemap.tilesets.push(new Atlantis.Tileset(map.tilesets[i]));\r\n                tilemap.tilesets[i].texture = Atlantis.app.content.load(map.tilesets[i].image);\r\n                tilemap.tilesets[i].texture.width = map.tilesets[i].imagewidth;\r\n                tilemap.tilesets[i].texture.height = map.tilesets[i].imageheight;\r\n            }\r\n\r\n            for (i = 0, l = map.layers.length; i < l; i++) {\r\n                tilemap.layers.push(new Atlantis.TilemapLayer(map.layers[i]));\r\n\r\n                if (map.layers[i].image) {\r\n                    tilemap.backgrounds.push(Atlantis.app.content.load(map.layers[i].image));\r\n                    tilemap.layers[i].backgroundId = i;\r\n                }\r\n            }\r\n\r\n            tilemap.height = map.height;\r\n            tilemap.width = map.width;\r\n            tilemap.tileWidth = map.tilewidth;\r\n            tilemap.tileHeight = map.tileheight;\r\n            tilemap.mapWidth = tilemap.width * tilemap.tileWidth;\r\n            tilemap.mapHeight = tilemap.height * tilemap.tileHeight;\r\n            tilemap.projection = map.orientation;\r\n            tilemap.version = map.version;\r\n            tilemap.properties = map.properties;\r\n            tilemap.visible = true;\r\n            tilemap.loaded = true;\r\n\r\n            if (callback) {\r\n                callback(tilemap);\r\n            }\r\n        });\r\n\r\n        return tilemap;\r\n    }\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.KeyboardComponent = (function() {\r\n    var Keys = Atlantis.Keys;\r\n\r\n    /**\r\n     * A keyboard component that be used with KeyboardHelper to provide some\r\n     * interesting keyboars states as pressed, justPressed, etc.\r\n     * @class KeyboardComponent\r\n     * @constructor\r\n     * @extends Atlantis.GameComponent\r\n     * @param {Atlantis.Game} game A game instance.\r\n     */\r\n    var keyComponent = function(game) {\r\n        Atlantis.GameComponent.call(this, game);\r\n        this.keysState = game.keyboard.getState();\r\n        this.previousKeysState = null;\r\n    };\r\n    keyComponent.prototype = Object.create(Atlantis.GameComponent.prototype);\r\n\r\n    /**\r\n     * Update key states.\r\n     * @method update\r\n     * @param {Atlantis.GameTime} gameTime\r\n     */\r\n    keyComponent.prototype.update = function(gameTime) {\r\n        this.previousKeysState = this.keysState;\r\n        this.keysState = this.game.keyboard.getState();\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method pressed\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.pressed = function(key) {\r\n        return this.keysState.isKeyDown(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method released\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.released = function(key) {\r\n        return this.keysState.isKeyUp(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method justPressed\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.justPressed = function(key) {\r\n        return this.keysState.isKeyUp(key) && this.previousKeysState.isKeyDown(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method justReleased\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.justReleased = function(key) {\r\n        return this.keysState.isKeyDown(key) && this.previousKeysState.isKeyUp(key);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method up\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.up = function() {\r\n        return this.pressed(Keys.Up);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method down\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.down = function() {\r\n        return this.pressed(Keys.Down);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method left\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.left = function() {\r\n        return this.pressed(Keys.Left);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method right\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.right = function() {\r\n        return this.pressed(Keys.Right);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method enter\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.enter = function() {\r\n        return this.pressed(Keys.Enter);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method space\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.space = function() {\r\n        return this.pressed(Keys.Space);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method escape\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.escape = function() {\r\n        return this.pressed(Keys.Escape);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method control\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.control = function() {\r\n        return this.pressed(Keys.Control);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method shift\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.shift = function() {\r\n        return this.pressed(Keys.Shift);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @method tab\r\n     * @param {Atlantis.Keys|Number} key\r\n     * @return {Boolean} Return true if pressed, otherwise return false.\r\n     */\r\n    keyComponent.prototype.tab = function() {\r\n        return this.pressed(Keys.Tab);\r\n    };\r\n\r\n    return keyComponent;\r\n})();\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\nvar Atlantis = window.Atlantis || {};\r\n\r\nAtlantis.TouchComponent = (function() {\r\n    var touchComponent = function(game) {\r\n        Atlantis.GameComponent.call(this, game);\r\n        this.sensibility = new Atlantis.Vector2(1, 1);\r\n        this.deadZone = new Atlantis.Vector2(0, 0);\r\n        this.maxDelta = 100;\r\n        this.maxFingerPoints = 1;\r\n        this.delta = new Atlantis.Vector2(0, 0);\r\n        this._touchCollection = new Atlantis.TouchCollection();\r\n        this._position = [];\r\n        this._lastPosition = [];\r\n        this._needUpdate = false;\r\n    };\r\n\r\n    touchComponent.prototype = Object.create(Atlantis.GameComponent.prototype);\r\n\r\n    touchComponent.prototype.initialize = function() {\r\n        Atlantis.GameComponent.prototype.initialize(this);\r\n        this._touchCollection = this.game.touchPanel.getState();\r\n        this._lastTouchCollection = this.game.touchPanel.getState();\r\n\r\n        this._position.length = 0;\r\n        this._lastPosition.length = 0;\r\n\r\n        for (var i = 0; i < this.maxFingerPoints; i++) {\r\n            this._position.push(new Atlantis.Vector2(0, 0));\r\n            this._lastPosition.push(new Atlantis.Vector2(0, 0));\r\n        }\r\n    };\r\n\r\n    touchComponent.prototype.update = function(gameTime) {\r\n        if (this.maxFingerPoints) {\r\n            this._touchCollection = this.game.touchPanel.getState();\r\n\r\n            var count = this._touchCollection.length;\r\n\r\n            if (count) {\r\n                for (var i = 0; i < this.maxFingerPoints; i++) {\r\n                    if (i < count) {\r\n                        this._updateTouchState(i);\r\n                    } else {\r\n                        this._resetTrouchState(i);\r\n                    }\r\n                }\r\n\r\n                this.delta.x = (this._position[0].x - this._lastPosition[0].x) * this.sensibility.x;\r\n                this.delta.y = (this._position[0].y - this._lastPosition[0].y) * this.sensibility.y;\r\n            } else {\r\n                this.delta.x = 0;\r\n                this.delta.y = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    touchComponent.prototype._updateTouchState = function(index) {\r\n        this._lastPosition[index].x = this._position[index].x;\r\n        this._lastPosition[index].y = this._position[index].y;\r\n        this._position[index].x = this._touchCollection[index].position.x;\r\n        this._position[index].y = this._touchCollection[index].position.y;\r\n    };\r\n\r\n    touchComponent.prototype._resetTrouchState = function(index) {\r\n        this._lastPosition[index].x = 0;\r\n        this._lastPosition[index].y = 0;\r\n        this._position[index].x = 0;\r\n        this._position[index].y = 0;\r\n    };\r\n\r\n    touchComponent.prototype.pressed = function(index) {\r\n        if (!this._touchCollection[index]) {\r\n            return false;\r\n        }\r\n\r\n        return this._touchCollection[index].state === Atlantis.TouchLocationState.Pressed;\r\n    };\r\n\r\n    touchComponent.prototype.released = function(index) {\r\n        if (!this._touchCollection[index]) {\r\n            return false;\r\n        }\r\n\r\n        return this._touchCollection[index].state === (Atlantis.TouchLocationState.Released || Atlantis.TouchLocationState.Invalid);\r\n    };\r\n\r\n    touchComponent.prototype.moved = function(index) {\r\n        if (!this._touchCollection[index]) {\r\n            return false;\r\n        }\r\n\r\n        return this._touchCollection[index].state === Atlantis.TouchLocationState.Moved;\r\n    };\r\n\r\n    return touchComponent;\r\n})();\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * An interface for a 2D level.\r\n * @class Level\r\n \r\n */\r\nAtlantis.Level = function(name) {\r\n\tthis.active = false;\r\n\tthis.name = name || \"Level_0\";\r\n\tthis.scene = new Atlantis.SpriteGroup();\r\n\tthis.camera = new Atlantis.Camera2D(0, 0, Atlantis.screen.width, Atlantis.screen.height);\r\n\tthis.spriteBatch = new Atlantis.SpriteBatch(Atlantis.app.game.graphicsDevice);\r\n};\r\n\r\nAtlantis.Level.prototype.initialize = function() {\r\n\tthis.scene.initialize();\r\n\tthis.camera.reset();\r\n};\r\n\r\nAtlantis.Level.prototype.update = function(gameTime) {\r\n\tthis.scene.update(gameTime);\r\n\tthis.camera.update(gameTime);\r\n};\r\n\r\nAtlantis.Level.prototype.draw = function(gameTime) {\r\n\tthis.spriteBatch.begin();\r\n\tthis.scene.draw(this.spriteBatch);\r\n\tthis.spriteBatch.end();\r\n};\r\n\r\nAtlantis.Level.prototype.onEnabled = function() {\r\n\r\n};\r\n\r\nAtlantis.Level.prototype.onDisabled = function() {\r\n\r\n};\n/**\r\n * AtlantisEngine.js a lightweight JavaScript game engine.\r\n *\r\n * @module Atlantis\r\n * @submodule Engine\r\n * @namespace Atlantis\r\n */\r\n\r\nvar Atlantis = window.Atlantis || {};\r\n\r\n/**\r\n * This is a static class that contains some managers such as\r\n * Storage, Audio, Level, etc.\r\n * @class app\r\n * @static\r\n */\r\nAtlantis.app = {};\r\n\r\n/**\r\n * This is a static class that contains input managers\r\n * @class input\r\n * @static\r\n */\r\nAtlantis.input = {};\r\n\r\n/**\r\n * This is a static class that contains screen management\r\n * @class screen\r\n * @static\r\n */\r\nAtlantis.screen = {};\r\n\r\n/**\r\n * The engine class that initialize an Atlantis.Game object and setup managers and scene.\r\n * @constructor \r\n * @class Engine\r\n * @extends Atlantis.Game\r\n * @param {Number} width Desired screen width.\r\n * @param {Number} height Desired screen height\r\n * @param {Number} domElement The DOM element to use for canvas (optional).\r\n */\r\nAtlantis.GameApplication = function(width, height, domElement, params) {\r\n    Atlantis.Game.call(this, width, height, domElement, params);\r\n\r\n    this.audioManager = new Atlantis.AudioManager();\r\n    this.storageManager = new Atlantis.StorageManager();\r\n    this.levelManager = new Atlantis.LevelManager(this);\r\n    this.components.add(this.levelManager);\r\n\r\n    var that = this;\r\n\r\n    Atlantis.app = {\r\n        game: that,\r\n        content: that.content,\r\n        components: that.components,\r\n        storage: that.storageManager,\r\n        levelManager: that.levelManager\r\n    };\r\n\r\n    Atlantis.input = {\r\n        keys: null,\r\n        mouse: null,\r\n        touch: null,\r\n        gamepad: null\r\n    };\r\n\r\n    Atlantis.screen = {\r\n        width: width,\r\n        widthPerTwo: width / 2,\r\n        height: height,\r\n        heightPerTwo: height / 2,\r\n        getCanvasWidth: function() {\r\n            return that.graphicsDevice.getFrontBuffer().getWidth();\r\n        },\r\n        getCanvasHeight: function() {\r\n            return that.graphicsDevice.getFrontBuffer().getHeight();\r\n        }\r\n    };\r\n\r\n    document.addEventListener(Atlantis.events.ResolutionChanged, function(event) {\r\n        Atlantis.screen.width = event.width;\r\n        Atlantis.screen.widthPerTwo = event.width / 2;\r\n        Atlantis.screen.height = event.height;\r\n        Atlantis.screen.heightPerTwo = event.height / 2;\r\n    }, false);\r\n};\r\n\r\nAtlantis.GameApplication.prototype = Object.create(Atlantis.Game.prototype);\r\n\r\nAtlantis.GameApplication.prototype.initialize = function() {\r\n    Atlantis.Game.prototype.initialize.call(this);\r\n\r\n    Atlantis.screen.width = this.graphicsDevice.preferredBackBufferWidth;\r\n    Atlantis.screen.height = this.graphicsDevice.preferredBackBufferHeight;\r\n\r\n    var keyboardComponent = new Atlantis.KeyboardComponent(this);\r\n    this.components.add(keyboardComponent);\r\n\r\n    //var touchComponent = new Atlantis.TouchComponent(this);\r\n    //this.components.add(touchComponent);\r\n\r\n    Atlantis.input.keys = keyboardComponent;\r\n    //Atlantis.input.touch = touchComponent;\r\n};\r\n\r\nAtlantis.GameApplication.prototype.setScreenSize = function(width, height) {\r\n    this.graphicsDevice._frontBuffer.setSize(width, height);\r\n    this.graphicsDevice.applyChanges();\r\n};"],"sourceRoot":"/source/"}